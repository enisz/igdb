---
overview: Utility tools for making the job easier with the IGDB API
icon: fa-tools
---

# Utilities

A utility class to help with some tasks.

> The methods in this class are [static](https://www.php.net/manual/en/language.oop5.static.php), therefore you can use them with the double colon syntax.

## Authenticate
```php
public static function authenticate(string $client_id, string $client_secret) throws Exception: object
```

A helper method to generate your `access_token`. This method will send a post request to the Twitch API with your `client_id` and `client_secret`.

**Parameters**:
 - `$client_id`: your client id
 - `$client_secret`: the client secret generated by twitch

**Retunrs**: an object decoded from the response from the Twitch API containing three keys: `access_token`, `expires_in` and `token_type`.

If a non-successful response is recieved from Twitch, an `Exception` is thrown.

## Example {.tabset}
### Source
```php
<?php

    require_once "class.igdb.php";

    try {
        var_dump(IGDBUtils::authenticate("{client_id}", "{client_secret}"));
    } catch (Exception $e) {
        // something went wrong
        echo $e->getMessage();
    }

?>
```

### Result

```text
object(stdClass)[1]
  public 'access_token' => string 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' (length=30)
  public 'expires_in' => int 5269900
  public 'token_type' => string 'bearer' (length=6)
```

## {-}

The output of the method will contain your new `access_token`:

## Image URL
```php
public static function image_url(string $image_id, string $size) throws IGDBInvalidParameterException: string
```

Get the URL of a specific sized image for a record.

**Parameters**:
 - `$image_id`: the `image_id` of the image. Each image in the database has it's own `id` and `image_id` fields. You **must** use the `image_id` field!
 - `$size`: the required size. Possible sizes:
   - cover_small
   - cover_small_2x
   - screenshot_med
   - screenshot_med_2x
   - cover_big
   - cover_big_2x
   - logo_med
   - logo_med_2x
   - screenshot_big
   - screenshot_big_2x
   - screenshot_huge
   - screenshot_huge_2x
   - thumb
   - thumb_2x
   - micro
   - micro_2x
   - 720p
   - 720p_2x
   - 1080p
   - 1080p_2x

If an invalid second parameter is passed, an `IGDBInvalidParameterException` will be thrown.

## Example {.tabset}
### Source
```php
<?php

    require_once "class.igdb.php";

    $igdb = new IGDB("{client_id}", "{access_token}");
    $builder = new IGDBQueryBuilder();

    try {
        $result = $igdb->game(
            $builder
                ->fields("id, name, artworks.*")
                ->search("uncharted 4")
                ->limit(1)
                ->build()
        );

        var_dump($result);

        // processing the first result's first artwork
        echo "720p version: " . IGDBUtils::image_url($result[0]->artworks[0]->image_id, "720p");
    } catch (IGDBInvalidParameterException $e) {
        // invalid parameter passed to the builder
        echo $e->getMessage();
    } catch (IGDBEndpointException $e) {
        // failed query
        echo $e->getMessage();
    }

?>
```

### Result

```text
array (size=1)
  0 =>
    object(stdClass)[3]
      public 'id' => int 7331
      public 'artworks' =>
        array (size=5)
          0 =>
            object(stdClass)[4]
              public 'id' => int 6303
              public 'alpha_channel' => boolean false
              public 'animated' => boolean false
              public 'game' => int 7331
              public 'height' => int 1059
              public 'image_id' => string 'ar4v3' (length=5)
              public 'url' => string '//images.igdb.com/igdb/image/upload/t_thumb/ar4v3.jpg' (length=53)
              public 'width' => int 1500
              public 'checksum' => string 'ded76617-94df-a813-28cb-feffebeb9d36' (length=36)
          1 =>
            object(stdClass)[5]
              public 'id' => int 6304
              public 'alpha_channel' => boolean false
              public 'animated' => boolean false
              public 'game' => int 7331
              public 'height' => int 1059
              public 'image_id' => string 'ar4v4' (length=5)
              public 'url' => string '//images.igdb.com/igdb/image/upload/t_thumb/ar4v4.jpg' (length=53)
              public 'width' => int 1500
              public 'checksum' => string '5655acde-a94d-8aa5-8c35-2ef4bc2e965d' (length=36)
          2 =>
            object(stdClass)[6]
              public 'id' => int 6305
              public 'alpha_channel' => boolean false
              public 'animated' => boolean false
              public 'game' => int 7331
              public 'height' => int 1060
              public 'image_id' => string 'ar4v5' (length=5)
              public 'url' => string '//images.igdb.com/igdb/image/upload/t_thumb/ar4v5.jpg' (length=53)
              public 'width' => int 1500
              public 'checksum' => string '30441489-b264-70d7-2d26-86b7c1eb3d3a' (length=36)
          3 =>
            object(stdClass)[7]
              public 'id' => int 6306
              public 'alpha_channel' => boolean false
              public 'animated' => boolean false
              public 'game' => int 7331
              public 'height' => int 1060
              public 'image_id' => string 'ar4v6' (length=5)
              public 'url' => string '//images.igdb.com/igdb/image/upload/t_thumb/ar4v6.jpg' (length=53)
              public 'width' => int 1500
              public 'checksum' => string 'e8629a83-2452-ec8c-2388-f42c6ec21de5' (length=36)
          4 =>
            object(stdClass)[8]
              public 'id' => int 6307
              public 'alpha_channel' => boolean false
              public 'animated' => boolean false
              public 'game' => int 7331
              public 'height' => int 1060
              public 'image_id' => string 'ar4v7' (length=5)
              public 'url' => string '//images.igdb.com/igdb/image/upload/t_thumb/ar4v7.jpg' (length=53)
              public 'width' => int 1500
              public 'checksum' => string 'e0b49da1-76dd-a863-b499-30b7f0ae0c78' (length=36)
      public 'name' => string 'Uncharted 4: A Thief's End' (length=26)
720p version: https://images.igdb.com/igdb/image/upload/t_720p/ar4v3.jpg
```

## {-}

On the last line of the result you can see the 720p version of the image which is a valid url.

## Webhooks

There are multiple helper methods to work with webhooks.

### Create a webhook
```php
public static function create_webhook(string $client_id, string $access_token, string $endpoint, string $method, string $url, string $secret) throws IGDBInvalidParameterException, Exception: mixed
```

This method will create a webhook.

**Parameters:**
 - `$client_id`: your client id
 - `$access_token`: your generated access token
 - `$endpoint`: the name of the endpoint where you expect new data from (it's name, not the url!)
 - `$method`: the type of method. Can be:
   - `create`: sends new items from the API
   - `delete`: sends deleted items from the API
   - `update`: sends updated items from the API
 - `$url`: your url where you expect the data to be sent
 - `$secret`: the password for your webhook

**Returns:** the details of the created webhook

The method will throw `IGDBInvalidParameterException` if:
 - `$endpoint` is invalid
 - `$method` is invalid

The method will throw `Exception` if non-successful response code is recieved from IGDB API.

### Example {.tabset}
#### Source

```php
<?php

  var_dump(
    IGDBUtils::create_webhook(
      "{client_id}",
      "{access_token}",
      "game",
      "create",
      "http://my-url.com/my-endpoint",
      "very secret password"
    )
  );

?>
```

#### Result

```text
object(stdClass)[1]
  public 'id' => int 9034
  public 'url' => string 'http://my-url.com/my-endpoint' (length=29)
  public 'category' => int 625691411
  public 'sub_category' => int 0
  public 'active' => boolean true
  public 'number_of_retries' => int 0
  public 'api_key' => string 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' (length=30)
  public 'secret' => string 'very secret password' (length=20)
  public 'created_at' => int 1705802392
  public 'updated_at' => int 1705802392
```
### {-}

### Get a webhook
```php
public static function get_webhook(string $client_id, string $access_token, string $id): mixed
```

Get a single webhook by its ID.

**Parameters:**
 - `$client_id`: your client id
 - `$access_token`: your generated access token
 - `$id`: the ID of the webhook

**Returns:** details of the requested webhook

### Example {.tabset}
#### Source

```php
<?php

  var_dump(
    IGDBUtils::get_webhook("{client_id}", "{access_token}", 9034)
  );

?>
```

#### Result

```text
object(stdClass)[1]
  public 'id' => int 9034
  public 'url' => string 'http://my-url.com/my-endpoint' (length=29)
  public 'category' => int 625691411
  public 'sub_category' => int 0
  public 'active' => boolean true
  public 'number_of_retries' => int 0
  public 'api_key' => string 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' (length=30)
  public 'secret' => string 'very secret password' (length=20)
  public 'created_at' => int 1705802392
  public 'updated_at' => int 1705802392
```

### {-}

### Get all webhooks
```php
public static function get_webhooks(string $client_id, string $access_token): array
```

Get all registered webhooks.

**Parameters:**
 - `$client_id`: your client id
 - `$access_token`: your generated access token

**Returns:** details of all registered webhooks

### Example {.tabset}
#### Source
```php

<?php
  var_dump(
    IGDBUtils::get_webhooks("{client_id}", "{access_token}")
  );

?>
```

#### Result

```text
array (size=2)
  0 =>
    object(stdClass)[2]
      public 'id' => int 9034
      public 'url' => string 'http://my-url.com/my-endpoint' (length=29)
      public 'category' => int 625691411
      public 'sub_category' => int 0
      public 'active' => boolean true
      public 'number_of_retries' => int 0
      public 'api_key' => string 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' (length=30)
      public 'secret' => string 'very secret password' (length=20)
      public 'created_at' => int 1705802392
      public 'updated_at' => int 1705802392
  1 =>
    object(stdClass)[4]
      public 'id' => int 9035
      public 'url' => string 'http://my-url.com/my-other-endpoint' (length=35)
      public 'category' => int 625691411
      public 'sub_category' => int 2
      public 'active' => boolean true
      public 'number_of_retries' => int 0
      public 'api_key' => string 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' (length=30)
      public 'secret' => string 'very secret password' (length=20)
      public 'created_at' => int 1705803591
      public 'updated_at' => int 1705803745
```
### {-}

### Delete a webhook
```php
public static function delete_webhook($client_id, $access_token, $id)
```

Delete a webhook by its ID.

**Parameters:**
 - `$client_id`: your client id
 - `$access_token`: your generated access token
 - `$endpoint`: the name of the endpoint where you expect new data from (it's name, not the url!)
 - `$method`: the type of method. Can be:
   - `create`: sends new items from the API
   - `delete`: sends deleted items from the API
   - `update`: sends updated items from the API
 - `$url`: your url where you expect the data to be sent
 - `$secret`: the password for your webhook

**Returns:** the details of the deleted webhook

### Example {.tabset}
#### Source

```php
<?php

  var_dump(
    IGDBUtils::delete_webhook("{client_id}", "{access_token}", 9034)
  );

?>
```

#### Result

```text
object(stdClass)[1]
  public 'id' => int 9034
  public 'url' => string 'http://my-url.com/my-endpoint' (length=29)
  public 'category' => int 625691411
  public 'sub_category' => int 0
  public 'active' => boolean true
  public 'number_of_retries' => int 0
  public 'api_key' => string 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' (length=30)
  public 'secret' => string 'very secret password' (length=20)
  public 'created_at' => int 1705802392
  public 'updated_at' => int 1705802392
```
### {-}
