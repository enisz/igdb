import{$ as eu,$b as as,A as pe,Aa as ru,B as Kc,Ba as Qo,Bb as yu,C as Gn,Ca as ou,Cb as Du,Da as tt,E as q,F as Yc,Fa as Jo,G as Qi,H as Xt,Ha as kt,Hb as rn,I as It,Ia as Pt,Ib as bu,J as Wo,Ja as nn,Jb as wu,K as Pe,Ka as su,Kb as Zn,L as Qc,La as au,Ma as cu,N as en,Na as uu,O as Jc,Oa as lu,P as At,Pa as du,Q as ht,Qa as hu,Qb as er,R as qo,Ra as Bt,Rb as is,S as Zc,Sb as Cu,Tb as rs,U as Xc,Ua as fu,V as Ji,Va as Se,Vb as tr,W as Ft,Wa as pu,Wb as os,X as _e,Xa as nt,Xb as nr,Y as me,Ya as mu,Z as oe,Za as Zo,Zb as ss,_ as Ko,_a as Xo,_b as on,a as w,aa as tn,ab as P,b as X,ba as W,bb as gu,bc as Eu,ca as C,cb as $t,cc as sn,da as Ce,db as ue,dc as ir,ea as tu,eb as de,f as S,fa as Yo,fb as it,g as jc,ga as U,gb as es,h as Uc,ha as A,hb as Kn,i as Ki,ia as g,j as Ho,ja as zn,jb as Lt,k as Go,ka as Wn,kb as Xi,l as ee,la as Ee,m as J,ma as ce,mb as Yn,n as Ze,na as nu,o as fe,oa as ft,p as T,q as Hn,r as Hc,s as Gc,sb as vu,t as zc,ta as Nt,tb as _u,u as R,ua as Zi,ub as ts,v as Yi,va as qn,w as ae,wa as iu,wb as ns,x as Wc,xa as Xe,xb as Qn,y as zo,ya as et,yb as Jn,z as qc,za as Ge,zb as Vt}from"./chunk-2CJAWYAV.js";var ds=null;function rt(){return ds}function Iu(t){ds||(ds=t)}var rr=class{},ne=new U("DocumentToken"),Au=(()=>{let e=class e{historyGo(n){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>g(ap))(),providedIn:"platform"});let t=e;return t})();var ap=(()=>{let e=class e extends Au{constructor(){super(),this._doc=g(ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rt().getBaseHref(this._doc)}onPopState(n){let r=rt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=rt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function Fu(t,e){if(t.length==0)return e;if(e.length==0)return t;let i=0;return t.endsWith("/")&&i++,e.startsWith("/")&&i++,i==2?t+e.substring(1):i==1?t+e:t+"/"+e}function Su(t){let e=t.match(/#|\?|$/),i=e&&e.index||t.length,n=i-(t[i-1]==="/"?1:0);return t.slice(0,n)+t.slice(i)}function jt(t){return t&&t[0]!=="?"?"?"+t:t}var cn=(()=>{let e=class e{historyGo(n){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>g(Nu))(),providedIn:"root"});let t=e;return t})(),cp=new U("appBaseHref"),Nu=(()=>{let e=class e extends cn{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??g(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Fu(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+jt(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,s){let a=this.prepareExternalUrl(o+jt(s));this._platformLocation.pushState(n,r,a)}replaceState(n,r,o,s){let a=this.prepareExternalUrl(o+jt(s));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}};e.\u0275fac=function(r){return new(r||e)(A(Au),A(cp,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ti=(()=>{let e=class e{constructor(n){this._subject=new ue,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=dp(Su(Ou(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+jt(r))}normalize(n){return e.stripTrailingSlash(lp(this._basePath,Ou(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jt(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jt(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}};e.normalizeQueryParams=jt,e.joinWithSlash=Fu,e.stripTrailingSlash=Su,e.\u0275fac=function(r){return new(r||e)(A(cn))},e.\u0275prov=C({token:e,factory:()=>up(),providedIn:"root"});let t=e;return t})();function up(){return new ti(A(cn))}function lp(t,e){if(!t||!e.startsWith(t))return e;let i=e.substring(t.length);return i===""||["/",";","?","#"].includes(i[0])?i:e}function Ou(t){return t.replace(/\/index.html$/,"")}function dp(t){if(new RegExp("^(https?:)?//").test(t)){let[,i]=t.split(/\/\/[^\/]+/);return i}return t}var ku=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(ku||{});var ze=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(ze||{});function Xn(t,e){let i=ns(t),n=i[Qn.NumberSymbols][e];if(typeof n>"u"){if(e===ze.CurrencyDecimal)return i[Qn.NumberSymbols][ze.Decimal];if(e===ze.CurrencyGroup)return i[Qn.NumberSymbols][ze.Group]}return n}function hp(t,e){return ns(t)[Qn.NumberFormats][e]}var fp=/^(\d+)?\.((\d+)(-(\d+))?)?$/,xu=22,or=".",ei="0",pp=";",mp=",",cs="#";function gp(t,e,i,n,r,o,s=!1){let a="",u=!1;if(!isFinite(t))a=Xn(i,ze.Infinity);else{let c=Dp(t);s&&(c=yp(c));let l=e.minInt,d=e.minFrac,h=e.maxFrac;if(o){let x=o.match(fp);if(x===null)throw new Error(`${o} is not a valid digit info`);let O=x[1],k=x[3],$=x[5];O!=null&&(l=us(O)),k!=null&&(d=us(k)),$!=null?h=us($):k!=null&&d>h&&(h=d)}bp(c,d,h);let f=c.digits,m=c.integerLen,b=c.exponent,_=[];for(u=f.every(x=>!x);m<l;m++)f.unshift(0);for(;m<0;m++)f.unshift(0);m>0?_=f.splice(m,f.length):(_=f,f=[0]);let y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(Xn(i,n)),_.length&&(a+=Xn(i,r)+_.join("")),b&&(a+=Xn(i,ze.Exponential)+"+"+b)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function vp(t,e,i){let n=hp(e,ku.Decimal),r=_p(n,Xn(e,ze.MinusSign));return gp(t,r,e,ze.Group,ze.Decimal,i)}function _p(t,e="-"){let i={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=t.split(pp),r=n[0],o=n[1],s=r.indexOf(or)!==-1?r.split(or):[r.substring(0,r.lastIndexOf(ei)+1),r.substring(r.lastIndexOf(ei)+1)],a=s[0],u=s[1]||"";i.posPre=a.substring(0,a.indexOf(cs));for(let l=0;l<u.length;l++){let d=u.charAt(l);d===ei?i.minFrac=i.maxFrac=l+1:d===cs?i.maxFrac=l+1:i.posSuf+=d}let c=a.split(mp);if(i.gSize=c[1]?c[1].length:0,i.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let l=r.length-i.posPre.length-i.posSuf.length,d=o.indexOf(cs);i.negPre=o.substring(0,d).replace(/'/g,""),i.negSuf=o.slice(d+l).replace(/'/g,"")}else i.negPre=e+i.posPre,i.negSuf=i.posSuf;return i}function yp(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function Dp(t){let e=Math.abs(t)+"",i=0,n,r,o,s,a;for((r=e.indexOf(or))>-1&&(e=e.replace(or,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===ei;o++);if(o===(a=e.length))n=[0],r=1;else{for(a--;e.charAt(a)===ei;)a--;for(r-=o,n=[],s=0;o<=a;o++,s++)n[s]=Number(e.charAt(o))}return r>xu&&(n=n.splice(0,xu-1),i=r-1,r=1),{digits:n,exponent:i,integerLen:r}}function bp(t,e,i){if(e>i)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${i}).`);let n=t.digits,r=n.length-t.integerLen,o=Math.min(Math.max(e,r),i),s=o+t.integerLen,a=n[s];if(s>0){n.splice(Math.max(t.integerLen,s));for(let d=s;d<n.length;d++)n[d]=0}else{r=Math.max(0,r),t.integerLen=1,n.length=Math.max(1,s=o+1),n[0]=0;for(let d=1;d<s;d++)n[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)n.unshift(0),t.integerLen++;n.unshift(1),t.integerLen++}else n[s-1]++;for(;r<Math.max(0,o);r++)n.push(0);let u=o!==0,c=e+t.integerLen,l=n.reduceRight(function(d,h,f,m){return h=h+d,m[f]=h<10?h:h-10,u&&(m[f]===0&&f>=c?m.pop():u=!1),h>=10?1:0},0);l&&(n.unshift(l),t.integerLen++)}function us(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function sr(t,e){e=encodeURIComponent(e);for(let i of t.split(";")){let n=i.indexOf("="),[r,o]=n==-1?[i,""]:[i.slice(0,n),i.slice(n+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var ls=/\s+/,Mu=[],By=(()=>{let e=class e{constructor(n,r,o,s){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=o,this._renderer=s,this.initialClasses=Mu,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(ls):Mu}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(ls):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let o=this.stateMap.get(n);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],o=n[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(ls).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(r){return new(r||e)(P(mu),P(Zo),P(Se),P(nt))},e.\u0275dir=ce({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var $y=(()=>{let e=class e{constructor(n,r){this._viewContainer=n,this._context=new hs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Tu("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Tu("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}};e.\u0275fac=function(r){return new(r||e)(P(Yn),P(er))},e.\u0275dir=ce({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),hs=class{constructor(){this.$implicit=null,this.ngIf=null}};function Tu(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${eu(e)}'.`)}var Ly=(()=>{let e=class e{constructor(n,r,o){this._ngEl=n,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[o,s]=n.split("."),a=o.indexOf("-")===-1?void 0:kt.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(P(Se),P(Zo),P(nt))},e.\u0275dir=ce({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})();function wp(t,e){return new W(2100,!1)}var Vy=(()=>{let e=class e{constructor(n){this._locale=n}transform(n,r,o){if(!Cp(n))return null;o=o||this._locale;try{let s=Ep(n);return vp(s,o,r)}catch(s){throw wp(e,s.message)}}};e.\u0275fac=function(r){return new(r||e)(P(as,16))},e.\u0275pipe=nu({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();function Cp(t){return!(t==null||t===""||t!==t)}function Ep(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Sp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=Ce({});let t=e;return t})(),ms="browser",Op="server";function xp(t){return t===ms}function gs(t){return t===Op}var Pu=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new fs(A(ne),window)});let t=e;return t})(),fs=class{constructor(e,i){this.document=e,this.window=i,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let i=Mp(this.document,e);i&&(this.scrollToElement(i),i.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let i=e.getBoundingClientRect(),n=i.left+this.window.pageXOffset,r=i.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function Mp(t,e){let i=t.getElementById(e)||t.getElementsByName(e)[0];if(i)return i;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=n.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=n.nextNode()}}return null}var an=class{};var ii=class{},cr=class{},Ut=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(i=>{let n=i.indexOf(":");if(n>0){let r=i.slice(0,n),o=r.toLowerCase(),s=i.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((i,n)=>{this.setHeaderEntries(n,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([i,n])=>{this.setHeaderEntries(i,n)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){let i=new t;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){let i=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(e.name,i);let r=(e.op==="a"?this.headers.get(i):void 0)||[];r.push(...n),this.headers.set(i,r);break;case"d":let o=e.value;if(!o)this.headers.delete(i),this.normalizedNames.delete(i);else{let s=this.headers.get(i);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,s)}break}}setHeaderEntries(e,i){let n=(Array.isArray(i)?i:[i]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}};var _s=class{encodeKey(e){return $u(e)}encodeValue(e){return $u(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Ip(t,e){let i=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],u=i.get(s)||[];u.push(a),i.set(s,u)}),i}var Ap=/%(\d[a-f0-9])/gi,Fp={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $u(t){return encodeURIComponent(t).replace(Ap,(e,i)=>Fp[i]??e)}function ar(t){return`${t}`}var pt=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _s,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Ip(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{let n=e.fromObject[i],r=Array.isArray(n)?n.map(ar):[ar(n)];this.map.set(i,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){let i=[];return Object.keys(e).forEach(n=>{let r=e[n];Array.isArray(r)?r.forEach(o=>{i.push({param:n,value:o,op:"a"})}):i.push({param:n,value:r,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let i=this.encoder.encodeKey(e);return this.map.get(e).map(n=>i+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let i=new t({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let i=(e.op==="a"?this.map.get(e.param):void 0)||[];i.push(ar(e.value)),this.map.set(e.param,i);break;case"d":if(e.value!==void 0){let n=this.map.get(e.param)||[],r=n.indexOf(ar(e.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ys=class{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Np(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Lu(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Vu(t){return typeof Blob<"u"&&t instanceof Blob}function ju(t){return typeof FormData<"u"&&t instanceof FormData}function kp(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ni=class t{constructor(e,i,n,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(Np(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers||(this.headers=new Ut),this.context||(this.context=new ys),!this.params)this.params=new pt,this.urlWithParams=i;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=i;else{let a=i.indexOf("?"),u=a===-1?"?":a<i.length-1?"&":"";this.urlWithParams=i+u+s}}}serializeBody(){return this.body===null?null:Lu(this.body)||Vu(this.body)||ju(this.body)||kp(this.body)||typeof this.body=="string"?this.body:this.body instanceof pt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ju(this.body)?null:Vu(this.body)?this.body.type||null:Lu(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof pt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let i=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new t(i,n,o,{params:c,headers:u,context:l,reportProgress:a,responseType:r,withCredentials:s})}},un=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(un||{}),ri=class{constructor(e,i=200,n="OK"){this.headers=e.headers||new Ut,this.status=e.status!==void 0?e.status:i,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ds=class t extends ri{constructor(e={}){super(e),this.type=un.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ur=class t extends ri{constructor(e={}){super(e),this.type=un.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},lr=class extends ri{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function vs(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Pp=(()=>{let e=class e{constructor(n){this.handler=n}request(n,r,o={}){let s;if(n instanceof ni)s=n;else{let c;o.headers instanceof Ut?c=o.headers:c=new Ut(o.headers);let l;o.params&&(o.params instanceof pt?l=o.params:l=new pt({fromObject:o.params})),s=new ni(n,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=T(s).pipe(It(c=>this.handler.handle(c)));if(n instanceof ni||o.observe==="events")return a;let u=a.pipe(q(c=>c instanceof ur));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(R(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(R(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(R(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(R(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new pt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,vs(o,r))}post(n,r,o={}){return this.request("POST",n,vs(o,r))}put(n,r,o={}){return this.request("PUT",n,vs(o,r))}};e.\u0275fac=function(r){return new(r||e)(A(ii))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function Bp(t,e){return e(t)}function $p(t,e,i){return(n,r)=>et(i,()=>e(n,o=>t(o,r)))}var Gu=new U(""),Lp=new U(""),Vp=new U("");var Uu=(()=>{let e=class e extends ii{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=g(nr);let o=g(Vp,{optional:!0});this.backend=o??n}handle(n){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Gu),...this.injector.get(Lp,[])]));this.chain=o.reduceRight((s,a)=>$p(s,a,this.injector),Bp)}let r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(At(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(A(cr),A(Xe))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();var jp=/^\)\]\}',?\n/;function Up(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Hu=(()=>{let e=class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new W(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?fe(r.\u0275loadImpl()):T(null)).pipe(_e(()=>new Ki(s=>{let a=r.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((_,y)=>a.setRequestHeader(_,y.join(","))),n.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let _=n.detectContentTypeHeader();_!==null&&a.setRequestHeader("Content-Type",_)}if(n.responseType){let _=n.responseType.toLowerCase();a.responseType=_!=="json"?_:"text"}let u=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let _=a.statusText||"OK",y=new Ut(a.getAllResponseHeaders()),x=Up(a)||n.url;return c=new Ds({headers:y,status:a.status,statusText:_,url:x}),c},d=()=>{let{headers:_,status:y,statusText:x,url:O}=l(),k=null;y!==204&&(k=typeof a.response>"u"?a.responseText:a.response),y===0&&(y=k?200:0);let $=y>=200&&y<300;if(n.responseType==="json"&&typeof k=="string"){let j=k;k=k.replace(jp,"");try{k=k!==""?JSON.parse(k):null}catch(M){k=j,$&&($=!1,k={error:M,text:k})}}$?(s.next(new ur({body:k,headers:_,status:y,statusText:x,url:O||void 0})),s.complete()):s.error(new lr({error:k,headers:_,status:y,statusText:x,url:O||void 0}))},h=_=>{let{url:y}=l(),x=new lr({error:_,status:a.status||0,statusText:a.statusText||"Unknown Error",url:y||void 0});s.error(x)},f=!1,m=_=>{f||(s.next(l()),f=!0);let y={type:un.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(y.total=_.total),n.responseType==="text"&&a.responseText&&(y.partialText=a.responseText),s.next(y)},b=_=>{let y={type:un.UploadProgress,loaded:_.loaded};_.lengthComputable&&(y.total=_.total),s.next(y)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),n.reportProgress&&(a.addEventListener("progress",m),u!==null&&a.upload&&a.upload.addEventListener("progress",b)),a.send(u),s.next({type:un.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),n.reportProgress&&(a.removeEventListener("progress",m),u!==null&&a.upload&&a.upload.removeEventListener("progress",b)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(A(an))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),zu=new U("XSRF_ENABLED"),Hp="XSRF-TOKEN",Gp=new U("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>Hp}),zp="X-XSRF-TOKEN",Wp=new U("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>zp}),dr=class{},qp=(()=>{let e=class e{constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=sr(n,this.cookieName),this.lastCookieString=n),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(A(ne),A(tt),A(Gp))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function Kp(t,e){let i=t.url.toLowerCase();if(!g(zu)||t.method==="GET"||t.method==="HEAD"||i.startsWith("http://")||i.startsWith("https://"))return e(t);let n=g(dr).getToken(),r=g(Wp);return n!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,n)})),e(t)}function e1(...t){let e=[Pp,Hu,Uu,{provide:ii,useExisting:Uu},{provide:cr,useExisting:Hu},{provide:Gu,useValue:Kp,multi:!0},{provide:zu,useValue:!0},{provide:dr,useClass:qp}];for(let i of t)e.push(...i.\u0275providers);return qn(e)}var Cs=class extends rr{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Es=class t extends Cs{static makeCurrent(){Iu(new t)}onAndCancel(e,i,n){return e.addEventListener(i,n),()=>{e.removeEventListener(i,n)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=Jp();return i==null?null:Zp(i)}resetBaseElement(){oi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sr(document.cookie,e)}},oi=null;function Jp(){return oi=oi||document.querySelector("base"),oi?oi.getAttribute("href"):null}function Zp(t){return new URL(t,document.baseURI).pathname}var Xp=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Ss=new U("EventManagerPlugins"),Yu=(()=>{let e=class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}};e.\u0275fac=function(r){return new(r||e)(A(Ss),A(de))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),hr=class{constructor(e){this._doc=e}},bs="ng-app-id",Qu=(()=>{let e=class e{constructor(n,r,o,s={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gs(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${bs}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){let o=this.styleRef;if(o.has(n)){let s=o.get(n);return s.usage+=r,s.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===n)return o.delete(r),s.removeAttribute(bs),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(bs,this.appId),n.appendChild(a),a}}addStyleToHost(n,r){let o=this.getStyleElement(n,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(A(ne),A(Qo),A(Jo,8),A(tt))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),ws={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xs=/%COMP%/g,Ju="%COMP%",em=`_nghost-${Ju}`,tm=`_ngcontent-${Ju}`,nm=!0,im=new U("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>nm});function rm(t){return tm.replace(xs,t)}function om(t){return em.replace(xs,t)}function Zu(t,e){return e.map(i=>i.replace(xs,t))}var Wu=(()=>{let e=class e{constructor(n,r,o,s,a,u,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=gs(u),this.defaultRenderer=new si(n,a,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zn.ShadowDom&&(r=X(w({},r),{encapsulation:zn.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof fr?o.applyToHost(n):o instanceof ai&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case zn.Emulated:s=new fr(c,l,r,this.appId,d,a,u,h);break;case zn.ShadowDom:return new Os(c,l,n,r,a,u,this.nonce,h);default:s=new ai(c,l,r,d,a,u,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(A(Yu),A(Qu),A(Qo),A(im),A(ne),A(tt),A(de),A(Jo))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),si=class{constructor(e,i,n,r){this.eventManager=e,this.doc=i,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(ws[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(qu(e)?e.content:e).appendChild(i)}insertBefore(e,i,n){e&&(qu(e)?e.content:e).insertBefore(i,n)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new W(-5104,!1);return i||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,n,r){if(r){i=r+":"+i;let o=ws[r];o?e.setAttributeNS(o,i,n):e.setAttribute(i,n)}else e.setAttribute(i,n)}removeAttribute(e,i,n){if(n){let r=ws[n];r?e.removeAttributeNS(r,i):e.removeAttribute(`${n}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,n,r){r&(kt.DashCase|kt.Important)?e.style.setProperty(i,n,r&kt.Important?"important":""):e.style[i]=n}removeStyle(e,i,n){n&kt.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,n){e!=null&&(e[i]=n)}setValue(e,i){e.nodeValue=i}listen(e,i,n){if(typeof e=="string"&&(e=rt().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(n))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function qu(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Os=class extends si{constructor(e,i,n,r,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=i,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Zu(r.id,r.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,n){return super.insertBefore(this.nodeOrShadowRoot(e),i,n)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ai=class extends si{constructor(e,i,n,r,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=u?Zu(u,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fr=class extends ai{constructor(e,i,n,r,o,s,a,u){let c=r+"-"+n.id;super(e,i,n,o,s,a,u,c),this.contentAttr=rm(c),this.hostAttr=om(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let n=super.createElement(e,i);return super.setAttribute(n,this.contentAttr,""),n}},sm=(()=>{let e=class e extends hr{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(A(ne))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Ku=["alt","control","meta","shift"],am={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cm={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},um=(()=>{let e=class e extends hr{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rt().onAndCancel(n,s.domEventName,a))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),Ku.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),a+=l+".")}),a+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(n,r){let o=am[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(o=n.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Ku.forEach(a=>{if(a!==o){let u=cm[a];u(n)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(n,r,o){return s=>{e.matchEventFullKeyCode(s,n)&&o.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}};e.\u0275fac=function(r){return new(r||e)(A(ne))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function D1(t,e){return Eu(w({rootComponent:t},lm(e)))}function lm(t){return{appProviders:[...mm,...t?.providers??[]],platformProviders:pm}}function dm(){Es.makeCurrent()}function hm(){return new Xo}function fm(){return ru(document),document}var pm=[{provide:tt,useValue:ms},{provide:ou,useValue:dm,multi:!0},{provide:ne,useFactory:fm,deps:[]}];var mm=[{provide:iu,useValue:"root"},{provide:Xo,useFactory:hm,deps:[]},{provide:Ss,useClass:sm,multi:!0,deps:[ne,de,tt]},{provide:Ss,useClass:um,multi:!0,deps:[ne]},Wu,Qu,Yu,{provide:pu,useExisting:Wu},{provide:an,useClass:Xp,deps:[]},[]];function gm(){return new Ms(A(ne))}var Ms=(()=>{let e=class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};e.\u0275fac=function(r){return new(r||e)(A(ne))},e.\u0275prov=C({token:e,factory:function(r){let o=null;return r?o=new r:o=gm(),o},providedIn:"root"});let t=e;return t})();var vm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=A(Xu),o},providedIn:"root"});let t=e;return t})();function _m(t){return new Xu(t.get(ne))}var Xu=(()=>{let e=class e extends vm{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Bt.NONE:return r;case Bt.HTML:return nn(r,"HTML")?Pt(r):hu(this._doc,String(r)).toString();case Bt.STYLE:return nn(r,"Style")?Pt(r):r;case Bt.SCRIPT:if(nn(r,"Script"))return Pt(r);throw new W(5200,!1);case Bt.URL:return nn(r,"URL")?Pt(r):du(String(r));case Bt.RESOURCE_URL:if(nn(r,"ResourceURL"))return Pt(r);throw new W(5201,!1);default:throw new W(5202,!1)}}bypassSecurityTrustHtml(n){return su(n)}bypassSecurityTrustStyle(n){return au(n)}bypassSecurityTrustScript(n){return cu(n)}bypassSecurityTrustUrl(n){return uu(n)}bypassSecurityTrustResourceUrl(n){return lu(n)}};e.\u0275fac=function(r){return new(r||e)(A(ne))},e.\u0275prov=C({token:e,factory:function(r){let o=null;return r?o=new r:o=_m(A(Ge)),o},providedIn:"root"});let t=e;return t})();var F="primary",bi=Symbol("RouteTitle"),Fs=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function pn(t){return new Fs(t)}function bm(t,e,i){let n=i.path.split("/");if(n.length>t.length||i.pathMatch==="full"&&(e.hasChildren()||n.length<t.length))return null;let r={};for(let o=0;o<n.length;o++){let s=n[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function wm(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!We(t[i],e[i]))return!1;return!0}function We(t,e){let i=t?Ns(t):void 0,n=e?Ns(e):void 0;if(!i||!n||i.length!=n.length)return!1;let r;for(let o=0;o<i.length;o++)if(r=i[o],!ol(t[r],e[r]))return!1;return!0}function Ns(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ol(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let i=[...t].sort(),n=[...e].sort();return i.every((r,o)=>n[o]===r)}else return t===e}function sl(t){return t.length>0?t[t.length-1]:null}function _t(t){return Hc(t)?t:Jn(t)?fe(Promise.resolve(t)):T(t)}var Cm={exact:cl,subset:ul},al={exact:Em,subset:Sm,ignored:()=>!0};function el(t,e,i){return Cm[i.paths](t.root,e.root,i.matrixParams)&&al[i.queryParams](t.queryParams,e.queryParams)&&!(i.fragment==="exact"&&t.fragment!==e.fragment)}function Em(t,e){return We(t,e)}function cl(t,e,i){if(!Gt(t.segments,e.segments)||!gr(t.segments,e.segments,i)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!t.children[n]||!cl(t.children[n],e.children[n],i))return!1;return!0}function Sm(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(i=>ol(t[i],e[i]))}function ul(t,e,i){return ll(t,e,e.segments,i)}function ll(t,e,i,n){if(t.segments.length>i.length){let r=t.segments.slice(0,i.length);return!(!Gt(r,i)||e.hasChildren()||!gr(r,i,n))}else if(t.segments.length===i.length){if(!Gt(t.segments,i)||!gr(t.segments,i,n))return!1;for(let r in e.children)if(!t.children[r]||!ul(t.children[r],e.children[r],n))return!1;return!0}else{let r=i.slice(0,t.segments.length),o=i.slice(t.segments.length);return!Gt(t.segments,r)||!gr(t.segments,r,n)||!t.children[F]?!1:ll(t.children[F],e,o,n)}}function gr(t,e,i){return e.every((n,r)=>al[i](t[r].parameters,n.parameters))}var mt=class{constructor(e=new H([],{}),i={},n=null){this.root=e,this.queryParams=i,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pn(this.queryParams)),this._queryParamMap}toString(){return Mm.serialize(this)}},H=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vr(this)}},Ht=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap||(this._parameterMap=pn(this.parameters)),this._parameterMap}toString(){return hl(this)}};function Om(t,e){return Gt(t,e)&&t.every((i,n)=>We(i.parameters,e[n].parameters))}function Gt(t,e){return t.length!==e.length?!1:t.every((i,n)=>i.path===e[n].path)}function xm(t,e){let i=[];return Object.entries(t.children).forEach(([n,r])=>{n===F&&(i=i.concat(e(r,n)))}),Object.entries(t.children).forEach(([n,r])=>{n!==F&&(i=i.concat(e(r,n)))}),i}var Tr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>new yr)(),providedIn:"root"});let t=e;return t})(),yr=class{parse(e){let i=new Ps(e);return new mt(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${ci(e.root,!0)}`,n=Im(e.queryParams),r=typeof e.fragment=="string"?`#${Tm(e.fragment)}`:"";return`${i}${n}${r}`}},Mm=new yr;function vr(t){return t.segments.map(e=>hl(e)).join("/")}function ci(t,e){if(!t.hasChildren())return vr(t);if(e){let i=t.children[F]?ci(t.children[F],!1):"",n=[];return Object.entries(t.children).forEach(([r,o])=>{r!==F&&n.push(`${r}:${ci(o,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}else{let i=xm(t,(n,r)=>r===F?[ci(t.children[F],!1)]:[`${r}:${ci(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[F]!=null?`${vr(t)}/${i[0]}`:`${vr(t)}/(${i.join("//")})`}}function dl(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pr(t){return dl(t).replace(/%3B/gi,";")}function Tm(t){return encodeURI(t)}function ks(t){return dl(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _r(t){return decodeURIComponent(t)}function tl(t){return _r(t.replace(/\+/g,"%20"))}function hl(t){return`${ks(t.path)}${Rm(t.parameters)}`}function Rm(t){return Object.keys(t).map(e=>`;${ks(e)}=${ks(t[e])}`).join("")}function Im(t){let e=Object.keys(t).map(i=>{let n=t[i];return Array.isArray(n)?n.map(r=>`${pr(i)}=${pr(r)}`).join("&"):`${pr(i)}=${pr(n)}`}).filter(i=>!!i);return e.length?`?${e.join("&")}`:""}var Am=/^[^\/()?;#]+/;function Ts(t){let e=t.match(Am);return e?e[0]:""}var Fm=/^[^\/()?;=#]+/;function Nm(t){let e=t.match(Fm);return e?e[0]:""}var km=/^[^=?&#]+/;function Pm(t){let e=t.match(km);return e?e[0]:""}var Bm=/^[^&#]+/;function $m(t){let e=t.match(Bm);return e?e[0]:""}var Ps=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new H([],{}):new H([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(n[F]=new H(e,i)),n}parseSegment(){let e=Ts(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new Ht(_r(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=Nm(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let r=Ts(this.remaining);r&&(n=r,this.capture(n))}e[_r(i)]=_r(n)}parseQueryParam(e){let i=Pm(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let s=$m(this.remaining);s&&(n=s,this.capture(n))}let r=tl(i),o=tl(n);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=Ts(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new W(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=F);let s=this.parseChildren();i[o]=Object.keys(s).length===1?s[F]:new H([],s),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function fl(t){return t.segments.length>0?new H([],{[F]:t}):t}function pl(t){let e={};for(let n of Object.keys(t.children)){let r=t.children[n],o=pl(r);if(n===F&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[n]=o)}let i=new H(t.segments,e);return Lm(i)}function Lm(t){if(t.numberOfChildren===1&&t.children[F]){let e=t.children[F];return new H(t.segments.concat(e.segments),e.children)}return t}function mn(t){return t instanceof mt}function Vm(t,e,i=null,n=null){let r=ml(t);return gl(r,e,i,n)}function ml(t){let e;function i(o){let s={};for(let u of o.children){let c=i(u);s[u.outlet]=c}let a=new H(o.url,s);return o===t&&(e=a),a}let n=i(t.root),r=fl(n);return e??r}function gl(t,e,i,n){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Rs(r,r,r,i,n);let o=jm(e);if(o.toRoot())return Rs(r,r,new H([],{}),i,n);let s=Um(o,r,t),a=s.processChildren?di(s.segmentGroup,s.index,o.commands):_l(s.segmentGroup,s.index,o.commands);return Rs(r,s.segmentGroup,a,i,n)}function Dr(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function pi(t){return typeof t=="object"&&t!=null&&t.outlets}function Rs(t,e,i,n,r){let o={};n&&Object.entries(n).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=i:s=vl(t,e,i);let a=fl(pl(s));return new mt(a,o,r)}function vl(t,e,i){let n={};return Object.entries(t.children).forEach(([r,o])=>{o===e?n[r]=i:n[r]=vl(o,e,i)}),new H(t.segments,n)}var br=class{constructor(e,i,n){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=n,e&&n.length>0&&Dr(n[0]))throw new W(4003,!1);let r=n.find(pi);if(r&&r!==sl(n))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jm(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new br(!0,0,t);let e=0,i=!1,n=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?i=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new br(i,e,n)}var hn=class{constructor(e,i,n){this.segmentGroup=e,this.processChildren=i,this.index=n}};function Um(t,e,i){if(t.isAbsolute)return new hn(e,!0,0);if(!i)return new hn(e,!1,NaN);if(i.parent===null)return new hn(i,!0,0);let n=Dr(t.commands[0])?0:1,r=i.segments.length-1+n;return Hm(i,r,t.numberOfDoubleDots)}function Hm(t,e,i){let n=t,r=e,o=i;for(;o>r;){if(o-=r,n=n.parent,!n)throw new W(4005,!1);r=n.segments.length}return new hn(n,!1,r-o)}function Gm(t){return pi(t[0])?t[0].outlets:{[F]:t}}function _l(t,e,i){if(t||(t=new H([],{})),t.segments.length===0&&t.hasChildren())return di(t,e,i);let n=zm(t,e,i),r=i.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let o=new H(t.segments.slice(0,n.pathIndex),{});return o.children[F]=new H(t.segments.slice(n.pathIndex),t.children),di(o,0,r)}else return n.match&&r.length===0?new H(t.segments,{}):n.match&&!t.hasChildren()?Bs(t,e,i):n.match?di(t,0,r):Bs(t,e,i)}function di(t,e,i){if(i.length===0)return new H(t.segments,{});{let n=Gm(i),r={};if(Object.keys(n).some(o=>o!==F)&&t.children[F]&&t.numberOfChildren===1&&t.children[F].segments.length===0){let o=di(t.children[F],e,i);return new H(t.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=_l(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{n[o]===void 0&&(r[o]=s)}),new H(t.segments,r)}}function zm(t,e,i){let n=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=i.length)return o;let s=t.segments[r],a=i[n];if(pi(a))break;let u=`${a}`,c=n<i.length-1?i[n+1]:null;if(r>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!il(u,c,s))return o;n+=2}else{if(!il(u,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function Bs(t,e,i){let n=t.segments.slice(0,e),r=0;for(;r<i.length;){let o=i[r];if(pi(o)){let u=Wm(o.outlets);return new H(n,u)}if(r===0&&Dr(i[0])){let u=t.segments[e];n.push(new Ht(u.path,nl(i[0]))),r++;continue}let s=pi(o)?o.outlets[F]:`${o}`,a=r<i.length-1?i[r+1]:null;s&&a&&Dr(a)?(n.push(new Ht(s,nl(a))),r+=2):(n.push(new Ht(s,{})),r++)}return new H(n,{})}function Wm(t){let e={};return Object.entries(t).forEach(([i,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[i]=Bs(new H([],{}),0,n))}),e}function nl(t){let e={};return Object.entries(t).forEach(([i,n])=>e[i]=`${n}`),e}function il(t,e,i){return t==i.path&&We(e,i.parameters)}var hi="imperative",Re=class{constructor(e,i){this.id=e,this.url=i}},gn=class extends Re{constructor(e,i,n="imperative",r=null){super(e,i),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ot=class extends Re{constructor(e,i,n){super(e,i),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gt=class extends Re{constructor(e,i,n,r){super(e,i),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vt=class extends Re{constructor(e,i,n,r){super(e,i),this.reason=n,this.code=r,this.type=16}},mi=class extends Re{constructor(e,i,n,r){super(e,i),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wr=class extends Re{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$s=class extends Re{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ls=class extends Re{constructor(e,i,n,r,o){super(e,i),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vs=class extends Re{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},js=class extends Re{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Us=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hs=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gs=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zs=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ws=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qs=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cr=class{constructor(e,i,n){this.routerEvent=e,this.position=i,this.anchor=n,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},gi=class{},vi=class{constructor(e){this.url=e}};var Ks=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rr,this.attachRef=null}},Rr=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ks,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Er=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=Ys(e,this._root);return i?i.children.map(n=>n.value):[]}firstChild(e){let i=Ys(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=Qs(e,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Qs(e,this._root).map(i=>i.value)}};function Ys(t,e){if(t===e.value)return e;for(let i of e.children){let n=Ys(t,i);if(n)return n}return null}function Qs(t,e){if(t===e.value)return[e];for(let i of e.children){let n=Qs(t,i);if(n.length)return n.unshift(e),n}return[]}var Oe=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function dn(t){let e={};return t&&t.children.forEach(i=>e[i.value.outlet]=i),e}var Sr=class extends Er{constructor(e,i){super(e),this.snapshot=i,sa(this,e)}toString(){return this.snapshot.toString()}};function yl(t,e){let i=qm(t,e),n=new J([new Ht("",{})]),r=new J({}),o=new J({}),s=new J({}),a=new J(""),u=new zt(n,r,s,a,o,F,e,i.root);return u.snapshot=i.root,new Sr(new Oe(u,[]),i)}function qm(t,e){let i={},n={},r={},o="",s=new _i([],i,r,o,n,F,e,null,{});return new Or("",new Oe(s,[]))}var zt=class{constructor(e,i,n,r,o,s,a,u){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(R(c=>c[bi]))??T(void 0),this.url=e,this.params=i,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(R(e=>pn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(R(e=>pn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function oa(t,e,i="emptyOnly"){let n,{routeConfig:r}=t;return e!==null&&(i==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:w(w({},e.params),t.params),data:w(w({},e.data),t.data),resolve:w(w(w(w({},t.data),e.data),r?.data),t._resolvedData)}:n={params:w({},t.params),data:w({},t.data),resolve:w(w({},t.data),t._resolvedData??{})},r&&bl(r)&&(n.resolve[bi]=r.title),n}var _i=class{get title(){return this.data?.[bi]}constructor(e,i,n,r,o,s,a,u,c){this.url=e,this.params=i,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pn(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},Or=class extends Er{constructor(e,i){super(i),this.url=e,sa(this,i)}toString(){return Dl(this._root)}};function sa(t,e){e.value._routerState=t,e.children.forEach(i=>sa(t,i))}function Dl(t){let e=t.children.length>0?` { ${t.children.map(Dl).join(", ")} } `:"";return`${t.value}${e}`}function Is(t){if(t.snapshot){let e=t.snapshot,i=t._futureSnapshot;t.snapshot=i,We(e.queryParams,i.queryParams)||t.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&t.fragmentSubject.next(i.fragment),We(e.params,i.params)||t.paramsSubject.next(i.params),wm(e.url,i.url)||t.urlSubject.next(i.url),We(e.data,i.data)||t.dataSubject.next(i.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Js(t,e){let i=We(t.params,e.params)&&Om(t.url,e.url),n=!t.parent!=!e.parent;return i&&!n&&(!t.parent||Js(t.parent,e.parent))}function bl(t){return typeof t.title=="string"||t.title===null}var Km=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=F,this.activateEvents=new ue,this.deactivateEvents=new ue,this.attachEvents=new ue,this.detachEvents=new ue,this.parentContexts=g(Rr),this.location=g(Yn),this.changeDetector=g($t),this.environmentInjector=g(Xe),this.inputBinder=g(aa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;let o=this.location,a=n.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Zs(n,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ce({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ft]});let t=e;return t})(),Zs=class{constructor(e,i,n){this.route=e,this.childContexts=i,this.parent=n}get(e,i){return e===zt?this.route:e===Rr?this.childContexts:this.parent.get(e,i)}},aa=new U("");function Ym(t,e,i){let n=yi(t,e._root,i?i._root:void 0);return new Sr(n,e)}function yi(t,e,i){if(i&&t.shouldReuseRoute(e.value,i.value.snapshot)){let n=i.value;n._futureSnapshot=e.value;let r=Qm(t,e,i);return new Oe(n,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yi(t,a)),s}}let n=Jm(e.value),r=e.children.map(o=>yi(t,o));return new Oe(n,r)}}function Qm(t,e,i){return e.children.map(n=>{for(let r of i.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return yi(t,n,r);return yi(t,n)})}function Jm(t){return new zt(new J(t.url),new J(t.params),new J(t.queryParams),new J(t.fragment),new J(t.data),t.outlet,t.component,t)}var wl="ngNavigationCancelingError";function Cl(t,e){let{redirectTo:i,navigationBehaviorOptions:n}=mn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=El(!1,0,e);return r.url=i,r.navigationBehaviorOptions=n,r}function El(t,e,i){let n=new Error("NavigationCancelingError: "+(t||""));return n[wl]=!0,n.cancellationCode=e,i&&(n.url=i),n}function Zm(t){return Sl(t)&&mn(t.url)}function Sl(t){return t&&t[wl]}var Xm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Wn({type:e,selectors:[["ng-component"]],standalone:!0,features:[Zn],decls:1,vars:0,template:function(r,o){r&1&&ts(0,"router-outlet")},dependencies:[Km],encapsulation:2});let t=e;return t})();function eg(t,e){return t.providers&&!t._injector&&(t._injector=wu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ca(t){let e=t.children&&t.children.map(ca),i=e?X(w({},t),{children:e}):w({},t);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==F&&(i.component=Xm),i}function qe(t){return t.outlet||F}function tg(t,e){let i=t.filter(n=>qe(n)===e);return i.push(...t.filter(n=>qe(n)!==e)),i}function wi(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var ng=(t,e,i,n)=>R(r=>(new Xs(e,r.targetRouterState,r.currentRouterState,i,n).activate(t),r)),Xs=class{constructor(e,i,n,r,o){this.routeReuseStrategy=e,this.futureState=i,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let i=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,n,e),Is(this.futureState.root),this.activateChildRoutes(i,n,e)}deactivateChildRoutes(e,i,n){let r=dn(i);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,i,n){let r=e.value,o=i?i.value:null;if(r===o)if(r.component){let s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,i,s.children)}else this.deactivateChildRoutes(e,i,n);else o&&this.deactivateRouteAndItsChildren(i,n)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let n=i.getContext(e.value.outlet),r=n&&e.value.component?n.children:i,o=dn(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let n=i.getContext(e.value.outlet),r=n&&e.value.component?n.children:i,o=dn(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,i,n){let r=dn(i);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new qs(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zs(e.value.snapshot))}activateRoutes(e,i,n){let r=e.value,o=i?i.value:null;if(Is(r),r===o)if(r.component){let s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,i,s.children)}else this.activateChildRoutes(e,i,n);else if(r.component){let s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Is(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=wi(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,n)}},xr=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fn=class{constructor(e,i){this.component=e,this.route=i}};function ig(t,e,i){let n=t._root,r=e?e._root:null;return ui(n,r,i,[n.value])}function rg(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function _n(t,e){let i=Symbol(),n=e.get(t,i);return n===i?typeof t=="function"&&!tu(t)?t:e.get(t):n}function ui(t,e,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=dn(e);return t.children.forEach(s=>{og(s,o[s.value.outlet],i,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>fi(a,i.getContext(s),r)),r}function og(t,e,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=i?i.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=sg(s,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new xr(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ui(t,e,a?a.children:null,n,r):ui(t,e,i,n,r),u&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new fn(a.outlet.component,s))}else s&&fi(e,a,r),r.canActivateChecks.push(new xr(n)),o.component?ui(t,null,a?a.children:null,n,r):ui(t,null,i,n,r);return r}function sg(t,e,i){if(typeof i=="function")return i(t,e);switch(i){case"pathParamsChange":return!Gt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gt(t.url,e.url)||!We(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Js(t,e)||!We(t.queryParams,e.queryParams);case"paramsChange":default:return!Js(t,e)}}function fi(t,e,i){let n=dn(t),r=t.value;Object.entries(n).forEach(([o,s])=>{r.component?e?fi(s,e.children.getContext(o),i):fi(s,null,i):fi(s,e,i)}),r.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new fn(e.outlet.component,r)):i.canDeactivateChecks.push(new fn(null,r)):i.canDeactivateChecks.push(new fn(null,r))}function Ci(t){return typeof t=="function"}function ag(t){return typeof t=="boolean"}function cg(t){return t&&Ci(t.canLoad)}function ug(t){return t&&Ci(t.canActivate)}function lg(t){return t&&Ci(t.canActivateChild)}function dg(t){return t&&Ci(t.canDeactivate)}function hg(t){return t&&Ci(t.canMatch)}function Ol(t){return t instanceof Gc||t?.name==="EmptyError"}var mr=Symbol("INITIAL_VALUE");function vn(){return _e(t=>Yi(t.map(e=>e.pipe(Pe(1),Ft(mr)))).pipe(R(e=>{for(let i of e)if(i!==!0){if(i===mr)return mr;if(i===!1||i instanceof mt)return i}return!0}),q(e=>e!==mr),Pe(1)))}function fg(t,e){return ae(i=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=i;return s.length===0&&o.length===0?T(X(w({},i),{guardsResult:!0})):pg(s,n,r,t).pipe(ae(a=>a&&ag(a)?mg(n,o,t,e):T(a)),R(a=>X(w({},i),{guardsResult:a})))})}function pg(t,e,i,n){return fe(t).pipe(ae(r=>Dg(r.component,r.route,i,e,n)),ht(r=>r!==!0,!0))}function mg(t,e,i,n){return fe(e).pipe(It(r=>Wc(vg(r.route.parent,n),gg(r.route,n),yg(t,r.path,i),_g(t,r.route,i))),ht(r=>r!==!0,!0))}function gg(t,e){return t!==null&&e&&e(new Ws(t)),T(!0)}function vg(t,e){return t!==null&&e&&e(new Gs(t)),T(!0)}function _g(t,e,i){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return T(!0);let r=n.map(o=>zo(()=>{let s=wi(e)??i,a=_n(o,s),u=ug(a)?a.canActivate(e,t):et(s,()=>a(e,t));return _t(u).pipe(ht())}));return T(r).pipe(vn())}function yg(t,e,i){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>rg(s)).filter(s=>s!==null).map(s=>zo(()=>{let a=s.guards.map(u=>{let c=wi(s.node)??i,l=_n(u,c),d=lg(l)?l.canActivateChild(n,t):et(c,()=>l(n,t));return _t(d).pipe(ht())});return T(a).pipe(vn())}));return T(o).pipe(vn())}function Dg(t,e,i,n,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return T(!0);let s=o.map(a=>{let u=wi(e)??r,c=_n(a,u),l=dg(c)?c.canDeactivate(t,e,i,n):et(u,()=>c(t,e,i,n));return _t(l).pipe(ht())});return T(s).pipe(vn())}function bg(t,e,i,n){let r=e.canLoad;if(r===void 0||r.length===0)return T(!0);let o=r.map(s=>{let a=_n(s,t),u=cg(a)?a.canLoad(e,i):et(t,()=>a(e,i));return _t(u)});return T(o).pipe(vn(),xl(n))}function xl(t){return Uc(oe(e=>{if(mn(e))throw Cl(t,e)}),R(e=>e===!0))}function wg(t,e,i,n){let r=e.canMatch;if(!r||r.length===0)return T(!0);let o=r.map(s=>{let a=_n(s,t),u=hg(a)?a.canMatch(e,i):et(t,()=>a(e,i));return _t(u)});return T(o).pipe(vn(),xl(n))}var Di=class{constructor(e){this.segmentGroup=e||null}},Mr=class extends Error{constructor(e){super(),this.urlTree=e}};function ln(t){return Hn(new Di(t))}function Cg(t){return Hn(new W(4e3,!1))}function Eg(t){return Hn(El(!1,3))}var ea=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let n=[],r=i.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return T(n);if(r.numberOfChildren>1||!r.children[F])return Cg(e.redirectTo);r=r.children[F]}}applyRedirectCommands(e,i,n){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,n);if(i.startsWith("/"))throw new Mr(r);return r}applyRedirectCreateUrlTree(e,i,n,r){let o=this.createSegmentGroup(e,i.root,n,r);return new mt(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let n={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);n[r]=i[a]}else n[r]=o}),n}createSegmentGroup(e,i,n,r){let o=this.createSegments(e,i.segments,n,r),s={};return Object.entries(i.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,n,r)}),new H(o,s)}createSegments(e,i,n,r){return i.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,n))}findPosParam(e,i,n){let r=n[i.path.substring(1)];if(!r)throw new W(4001,!1);return r}findOrReturn(e,i){let n=0;for(let r of i){if(r.path===e.path)return i.splice(n),r;n++}return e}},ta={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Sg(t,e,i,n,r){let o=ua(t,e,i);return o.matched?(n=eg(e,n),wg(n,e,i,r).pipe(R(s=>s===!0?o:w({},ta)))):T(o)}function ua(t,e,i){if(e.path==="**")return Og(i);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||i.length>0)?w({},ta):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(e.matcher||bm)(i,t,e);if(!r)return w({},ta);let o={};Object.entries(r.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=r.consumed.length>0?w(w({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Og(t){return{matched:!0,parameters:t.length>0?sl(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function rl(t,e,i,n){return i.length>0&&Tg(t,i,n)?{segmentGroup:new H(e,Mg(n,new H(i,t.children))),slicedSegments:[]}:i.length===0&&Rg(t,i,n)?{segmentGroup:new H(t.segments,xg(t,e,i,n,t.children)),slicedSegments:i}:{segmentGroup:new H(t.segments,t.children),slicedSegments:i}}function xg(t,e,i,n,r){let o={};for(let s of n)if(Ir(t,i,s)&&!r[qe(s)]){let a=new H([],{});o[qe(s)]=a}return w(w({},r),o)}function Mg(t,e){let i={};i[F]=e;for(let n of t)if(n.path===""&&qe(n)!==F){let r=new H([],{});i[qe(n)]=r}return i}function Tg(t,e,i){return i.some(n=>Ir(t,e,n)&&qe(n)!==F)}function Rg(t,e,i){return i.some(n=>Ir(t,e,n))}function Ir(t,e,i){return(t.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function Ig(t,e,i,n){return qe(t)!==n&&(n===F||!Ir(e,i,t))?!1:ua(e,t,i).matched}function Ag(t,e,i){return e.length===0&&!t.children[i]}var na=class{};function Fg(t,e,i,n,r,o,s="emptyOnly"){return new ia(t,e,i,n,r,s,o).recognize()}var Ng=31,ia=class{constructor(e,i,n,r,o,s,a){this.injector=e,this.configLoader=i,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ea(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=rl(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(R(i=>{let n=new _i([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,{},F,this.rootComponentType,null,{}),r=new Oe(n,i),o=new Or("",r),s=Vm(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,F).pipe(Xt(n=>{if(n instanceof Mr)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Di?this.noMatchError(n):n}))}inheritParamsAndData(e,i){let n=e.value,r=oa(n,i,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(e,i,n,r){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,i,n):this.processSegment(e,i,n,n.segments,r,!0).pipe(R(o=>o instanceof Oe?[o]:[]))}processChildren(e,i,n){let r=[];for(let o of Object.keys(n.children))o==="primary"?r.unshift(o):r.push(o);return fe(r).pipe(It(o=>{let s=n.children[o],a=tg(i,o);return this.processSegmentGroup(e,a,s,o)}),Xc((o,s)=>(o.push(...s),o)),Wo(null),Zc(),ae(o=>{if(o===null)return ln(n);let s=Ml(o);return kg(s),T(s)}))}processSegment(e,i,n,r,o,s){return fe(i).pipe(It(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,n,r,o,s).pipe(Xt(u=>{if(u instanceof Di)return T(null);throw u}))),ht(a=>!!a),Xt(a=>{if(Ol(a))return Ag(n,r,o)?T(new na):ln(n);throw a}))}processSegmentAgainstRoute(e,i,n,r,o,s,a){return Ig(n,r,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,n,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,i,n,o,s):ln(r):ln(r)}expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=ua(i,r,o);if(!a)return ln(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Ng&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,d).pipe(ae(h=>this.processSegment(e,n,i,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,i,n,r,o){let s=Sg(i,n,r,e,this.urlSerializer);return n.path==="**"&&(i.children={}),s.pipe(_e(a=>a.matched?(e=n._injector??e,this.getChildConfig(e,n,r).pipe(_e(({routes:u})=>{let c=n._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new _i(l,h,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,Bg(n),qe(n),n.component??n._loadedComponent??null,n,$g(n)),{segmentGroup:m,slicedSegments:b}=rl(i,l,d,u);if(b.length===0&&m.hasChildren())return this.processChildren(c,u,m).pipe(R(y=>y===null?null:new Oe(f,y)));if(u.length===0&&b.length===0)return T(new Oe(f,[]));let _=qe(n)===o;return this.processSegment(c,u,m,b,_?F:o,!0).pipe(R(y=>new Oe(f,y instanceof Oe?[y]:[])))}))):ln(i)))}getChildConfig(e,i,n){return i.children?T({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?T({routes:i._loadedRoutes,injector:i._loadedInjector}):bg(e,i,n,this.urlSerializer).pipe(ae(r=>r?this.configLoader.loadChildren(e,i).pipe(oe(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):Eg(i))):T({routes:[],injector:e})}};function kg(t){t.sort((e,i)=>e.value.outlet===F?-1:i.value.outlet===F?1:e.value.outlet.localeCompare(i.value.outlet))}function Pg(t){let e=t.value.routeConfig;return e&&e.path===""}function Ml(t){let e=[],i=new Set;for(let n of t){if(!Pg(n)){e.push(n);continue}let r=e.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),i.add(r)):e.push(n)}for(let n of i){let r=Ml(n.children);e.push(new Oe(n.value,r))}return e.filter(n=>!i.has(n))}function Bg(t){return t.data||{}}function $g(t){return t.resolve||{}}function Lg(t,e,i,n,r,o){return ae(s=>Fg(t,e,i,n,s.extractedUrl,r,o).pipe(R(({state:a,tree:u})=>X(w({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Vg(t,e){return ae(i=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=i;if(!r.length)return T(i);let o=new Set(r.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of Tl(u))s.add(c);let a=0;return fe(s).pipe(It(u=>o.has(u)?jg(u,n,t,e):(u.data=oa(u,u.parent,t).resolve,T(void 0))),oe(()=>a++),qo(1),ae(u=>a===s.size?T(i):Ze))})}function Tl(t){let e=t.children.map(i=>Tl(i)).flat();return[t,...e]}function jg(t,e,i,n){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!bl(r)&&(o[bi]=r.title),Ug(o,t,e,n).pipe(R(s=>(t._resolvedData=s,t.data=oa(t,t.parent,i).resolve,null)))}function Ug(t,e,i,n){let r=Ns(t);if(r.length===0)return T({});let o={};return fe(r).pipe(ae(s=>Hg(t[s],e,i,n).pipe(ht(),oe(a=>{o[s]=a}))),qo(1),Qc(o),Xt(s=>Ol(s)?Ze:Hn(s)))}function Hg(t,e,i,n){let r=wi(e)??n,o=_n(t,r),s=o.resolve?o.resolve(e,i):et(r,()=>o(e,i));return _t(s)}function As(t){return _e(e=>{let i=t(e);return i?fe(i).pipe(R(()=>e)):T(e)})}var Rl=(()=>{let e=class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===F);return r}getResolvedTitleForRoute(n){return n.data[bi]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>g(Gg))(),providedIn:"root"});let t=e;return t})(),Gg=(()=>{let e=class e extends Rl{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(A(Ms))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ar=new U("",{providedIn:"root",factory:()=>({})}),la=new U("ROUTES"),zg=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=g(os)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return T(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=_t(n.loadComponent()).pipe(R(Il),oe(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),At(()=>{this.componentLoaders.delete(n)})),o=new Go(r,()=>new ee).pipe(Ho());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return T({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Wg(r,this.compiler,n,this.onLoadEndListener).pipe(At(()=>{this.childrenLoaders.delete(r)})),a=new Go(s,()=>new ee).pipe(Ho());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Wg(t,e,i,n){return _t(t.loadChildren()).pipe(R(Il),ae(r=>r instanceof bu||Array.isArray(r)?T(r):fe(e.compileModuleAsync(r))),R(r=>{n&&n(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(i).injector,s=o.get(la,[],{optional:!0,self:!0}).flat()),{routes:s.map(ca),injector:o}}))}function qg(t){return t&&typeof t=="object"&&"default"in t}function Il(t){return qg(t)?t.default:t}var da=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>g(Kg))(),providedIn:"root"});let t=e;return t})(),Kg=(()=>{let e=class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yg=new U("");var Al=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ee,this.transitionAbortSubject=new ee,this.configLoader=g(zg),this.environmentInjector=g(Xe),this.urlSerializer=g(Tr),this.rootContexts=g(Rr),this.location=g(ti),this.inputBindingEnabled=g(aa,{optional:!0})!==null,this.titleStrategy=g(Rl),this.options=g(Ar,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=g(da),this.createViewTransition=g(Yg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>T(void 0),this.rootComponentType=null;let n=o=>this.events.next(new Us(o)),r=o=>this.events.next(new Hs(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(X(w(w({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,o){return this.transitions=new J({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hi,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(q(s=>s.id!==0),R(s=>X(w({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),_e(s=>{this.currentTransition=s;let a=!1,u=!1;return T(s).pipe(oe(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?X(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_e(c=>{let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new vt(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),Ze}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return T(c).pipe(_e(h=>{let f=this.transitions?.getValue();return this.events.next(new gn(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ze:Promise.resolve(h)}),Lg(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),oe(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=X(w({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new wr(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:b,extras:_}=c,y=new gn(h,this.urlSerializer.serialize(f),m,b);this.events.next(y);let x=yl(f,this.rootComponentType).snapshot;return this.currentTransition=s=X(w({},c),{targetSnapshot:x,urlAfterRedirects:f,extras:X(w({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,T(s)}else{let h="";return this.events.next(new vt(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),Ze}}),oe(c=>{let l=new $s(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),R(c=>(this.currentTransition=s=X(w({},c),{guards:ig(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),fg(this.environmentInjector,c=>this.events.next(c)),oe(c=>{if(s.guardsResult=c.guardsResult,mn(c.guardsResult))throw Cl(this.urlSerializer,c.guardsResult);let l=new Ls(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),q(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",3),!1)),As(c=>{if(c.guards.canActivateChecks.length)return T(c).pipe(oe(l=>{let d=new Vs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),_e(l=>{let d=!1;return T(l).pipe(Vg(this.paramsInheritanceStrategy,this.environmentInjector),oe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",2)}}))}),oe(l=>{let d=new js(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),As(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(oe(f=>{d.component=f}),R(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Yi(l(c.targetSnapshot.root)).pipe(Wo(null),Pe(1))}),As(()=>this.afterPreactivation()),_e(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?fe(d).pipe(R(()=>s)):T(s)}),R(c=>{let l=Ym(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=X(w({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),oe(()=>{this.events.next(new gi)}),ng(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pe(1),oe({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ot(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),me(this.transitionAbortSubject.pipe(oe(c=>{throw c}))),At(()=>{if(!a&&!u){let c="";this.cancelNavigationTransition(s,c,1)}this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Xt(c=>{if(u=!0,Sl(c))this.events.next(new gt(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),Zm(c)?this.events.next(new vi(c.url)):s.resolve(!1);else{this.events.next(new mi(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(c))}catch(l){s.reject(l)}}return Ze}))}))}cancelNavigationTransition(n,r,o){let s=new gt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Qg(t){return t!==hi}var Jg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>g(Zg))(),providedIn:"root"});let t=e;return t})(),ra=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},Zg=(()=>{let e=class e extends ra{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Nt(e)))(o||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:()=>(()=>g(Xg))(),providedIn:"root"});let t=e;return t})(),Xg=(()=>{let e=class e extends Fl{constructor(){super(...arguments),this.location=g(ti),this.urlSerializer=g(Tr),this.options=g(Ar,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=g(da),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=yl(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof gn)this.stateMemento=this.createStateMemento();else if(n instanceof vt)this.rawUrlTree=r.initialUrl;else if(n instanceof wr){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else n instanceof gi?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof gt&&(n.code===3||n.code===2)?this.restoreHistory(r):n instanceof mi?this.restoreHistory(r,!0):n instanceof ot&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=w(w({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=w(w({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Nt(e)))(o||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),li=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(li||{});function e0(t,e){t.events.pipe(q(i=>i instanceof ot||i instanceof gt||i instanceof mi||i instanceof vt),R(i=>i instanceof ot||i instanceof vt?li.COMPLETE:(i instanceof gt?i.code===0||i.code===1:!1)?li.REDIRECTING:li.FAILED),q(i=>i!==li.REDIRECTING),Pe(1)).subscribe(()=>{e()})}function t0(t){throw t}var n0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},i0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ha=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=g(tr),this.stateManager=g(Fl),this.options=g(Ar,{optional:!0})||{},this.pendingTasks=g(nr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=g(Al),this.urlSerializer=g(Tr),this.location=g(ti),this.urlHandlingStrategy=g(da),this._events=new ee,this.errorHandler=this.options.errorHandler||t0,this.navigated=!1,this.routeReuseStrategy=g(Jg),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=g(la,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!g(aa,{optional:!0}),this.eventsSubscription=new jc,this.isNgZoneEnabled=g(de)instanceof de&&de.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof gt&&r.code!==0&&r.code!==1)this.navigated=!0;else if(r instanceof ot)this.navigated=!0;else if(r instanceof vi){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Qg(o.source)};this.scheduleNavigation(a,hi,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}o0(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)}))}navigateToSyncWithBrowser(n,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=w({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(n);this.scheduleNavigation(u,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ca),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=w(w({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=ml(f)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),h=this.currentUrlTree.root}return gl(h,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=mn(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,hi,null,r)}navigate(n,r={skipLocationChange:!1}){return r0(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=w({},n0):r===!1?o=w({},i0):o=r,mn(n))return el(this.currentUrlTree,n,o);let s=this.parseUrl(n);return el(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.keys(n).reduce((r,o)=>{let s=n[o];return s!=null&&(r[o]=s),r},{})}scheduleNavigation(n,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return e0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function r0(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function o0(t){return!(t instanceof gi)&&!(t instanceof vi)}var W1=(()=>{let e=class e{constructor(n,r,o,s,a,u){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new ee,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof ot&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n!=null?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,o,s,a){if(this.urlTree===null||this.isAnchorElement&&(n!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let n=this.href===null?null:fu(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,n,r):o.removeAttribute(s,n)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(P(ha),P(zt),Zi("tabindex"),P(nt),P(Se),P(cn))},e.\u0275dir=ce({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&Vt("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Kn("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",sn],skipLocationChange:["skipLocationChange","skipLocationChange",sn],replaceUrl:["replaceUrl","replaceUrl",sn],routerLink:"routerLink"},standalone:!0,features:[es,ft]});let t=e;return t})();var Nl=new U(""),s0=(()=>{let e=class e{constructor(n,r,o,s,a={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof gn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ot?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof vt&&n.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Cr&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Cr(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){gu()},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function q1(t,...e){return qn([{provide:la,multi:!0,useValue:t},[],{provide:zt,useFactory:a0,deps:[ha]},{provide:ss,multi:!0,useFactory:c0},e.map(i=>i.\u0275providers)])}function a0(t){return t.routerState.root}function kl(t,e){return{\u0275kind:t,\u0275providers:e}}function K1(t={}){return kl(4,[{provide:Nl,useFactory:()=>{let i=g(Pu),n=g(de),r=g(Al),o=g(Tr);return new s0(o,r,i,n,t)}}])}function c0(){let t=g(Ge);return e=>{let i=t.get(on);if(e!==i.components[0])return;let n=t.get(ha),r=t.get(u0);t.get(l0)===1&&n.initialNavigation(),t.get(d0,null,Yo.Optional)?.setUpPreloading(),t.get(Nl,null,Yo.Optional)?.init(),n.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var u0=new U("",{factory:()=>new ee}),l0=new U("",{providedIn:"root",factory:()=>1});var d0=new U("");function Y1(t){return kl(5,[{provide:Ar,useValue:t}])}var zl=(()=>{let e=class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};e.\u0275fac=function(r){return new(r||e)(P(nt),P(Se))},e.\u0275dir=ce({type:e});let t=e;return t})(),Wl=(()=>{let e=class e extends zl{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Nt(e)))(o||e)}})(),e.\u0275dir=ce({type:e,features:[it]});let t=e;return t})(),pa=new U("NgValueAccessor"),h0={provide:pa,useExisting:tn(()=>f0),multi:!0},f0=(()=>{let e=class e extends Wl{writeValue(n){this.setProperty("checked",n)}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Nt(e)))(o||e)}})(),e.\u0275dir=ce({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&Vt("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[rn([h0]),it]});let t=e;return t})(),p0={provide:pa,useExisting:tn(()=>ql),multi:!0};function m0(){let t=rt()?rt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var g0=new U("CompositionEventMode"),ql=(()=>{let e=class e extends zl{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!m0())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};e.\u0275fac=function(r){return new(r||e)(P(nt),P(Se),P(g0,8))},e.\u0275dir=ce({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Vt("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[rn([p0]),it]});let t=e;return t})();function yt(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Kl(t){return t!=null&&typeof t.length=="number"}var Yl=new U("NgValidators"),Ql=new U("NgAsyncValidators"),v0=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Pl=class{static min(e){return _0(e)}static max(e){return y0(e)}static required(e){return D0(e)}static requiredTrue(e){return b0(e)}static email(e){return w0(e)}static minLength(e){return C0(e)}static maxLength(e){return E0(e)}static pattern(e){return S0(e)}static nullValidator(e){return Jl(e)}static compose(e){return id(e)}static composeAsync(e){return od(e)}};function _0(t){return e=>{if(yt(e.value)||yt(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i<t?{min:{min:t,actual:e.value}}:null}}function y0(t){return e=>{if(yt(e.value)||yt(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i>t?{max:{max:t,actual:e.value}}:null}}function D0(t){return yt(t.value)?{required:!0}:null}function b0(t){return t.value===!0?null:{required:!0}}function w0(t){return yt(t.value)||v0.test(t.value)?null:{email:!0}}function C0(t){return e=>yt(e.value)||!Kl(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function E0(t){return e=>Kl(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function S0(t){if(!t)return Jl;let e,i;return typeof t=="string"?(i="",t.charAt(0)!=="^"&&(i+="^"),i+=t,t.charAt(t.length-1)!=="$"&&(i+="$"),e=new RegExp(i)):(i=t.toString(),e=t),n=>{if(yt(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function Jl(t){return null}function Zl(t){return t!=null}function Xl(t){return Jn(t)?fe(t):t}function ed(t){let e={};return t.forEach(i=>{e=i!=null?w(w({},e),i):e}),Object.keys(e).length===0?null:e}function td(t,e){return e.map(i=>i(t))}function O0(t){return!t.validate}function nd(t){return t.map(e=>O0(e)?e:i=>e.validate(i))}function id(t){if(!t)return null;let e=t.filter(Zl);return e.length==0?null:function(i){return ed(td(i,e))}}function rd(t){return t!=null?id(nd(t)):null}function od(t){if(!t)return null;let e=t.filter(Zl);return e.length==0?null:function(i){let n=td(i,e).map(Xl);return qc(n).pipe(R(ed))}}function sd(t){return t!=null?od(nd(t)):null}function Bl(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ad(t){return t._rawValidators}function cd(t){return t._rawAsyncValidators}function fa(t){return t?Array.isArray(t)?t:[t]:[]}function Nr(t,e){return Array.isArray(t)?t.includes(e):t===e}function $l(t,e){let i=fa(e);return fa(t).forEach(r=>{Nr(i,r)||i.push(r)}),i}function Ll(t,e){return fa(e).filter(i=>!Nr(t,i))}var kr=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},Dn=class extends kr{get formDirective(){return null}get path(){return null}},Oi=class extends kr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Pr=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},x0={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},fD=X(w({},x0),{"[class.ng-submitted]":"isSubmitted"}),pD=(()=>{let e=class e extends Pr{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(P(Oi,2))},e.\u0275dir=ce({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Lt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[it]});let t=e;return t})(),mD=(()=>{let e=class e extends Pr{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(P(Dn,10))},e.\u0275dir=ce({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&Lt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[it]});let t=e;return t})();var Ei="VALID",Fr="INVALID",yn="PENDING",Si="DISABLED";function ud(t){return(Vr(t)?t.validators:t)||null}function M0(t){return Array.isArray(t)?rd(t):t||null}function ld(t,e){return(Vr(e)?e.asyncValidators:t)||null}function T0(t){return Array.isArray(t)?sd(t):t||null}function Vr(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function R0(t,e,i){let n=t.controls;if(!(e?Object.keys(n):n).length)throw new W(1e3,"");if(!n[i])throw new W(1001,"")}function I0(t,e,i){t._forEachChild((n,r)=>{if(i[r]===void 0)throw new W(1002,"")})}var Br=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ei}get invalid(){return this.status===Fr}get pending(){return this.status==yn}get disabled(){return this.status===Si}get enabled(){return this.status!==Si}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($l(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($l(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ll(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ll(e,this._rawAsyncValidators))}hasValidator(e){return Nr(this._rawValidators,e)}hasAsyncValidator(e){return Nr(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=yn,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Si,this.errors=null,this._forEachChild(n=>{n.disable(X(w({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(X(w({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Ei,this._forEachChild(n=>{n.enable(X(w({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(X(w({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ei||this.status===yn)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Si:Ei}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=yn,this._hasOwnPendingAsyncValidator=!0;let i=Xl(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,r)=>n&&n._find(r),this)}getError(e,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?Si:this.errors?Fr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yn)?yn:this._anyControlsHaveStatus(Fr)?Fr:Ei}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vr(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=M0(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=T0(this._rawAsyncValidators)}},Vl=class extends Br{constructor(e,i,n){super(ud(i),ld(n,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,i){return this.controls[e]?this.controls[e]:(this.controls[e]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(e,i,n={}){this.registerControl(e,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(e,i,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],i&&this.registerControl(e,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,i={}){I0(this,!0,e),Object.keys(e).forEach(n=>{R0(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e={},i={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(e,i,n)=>(e[n]=i.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(i,n)=>n._syncPendingControls()?!0:i);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(i=>{let n=this.controls[i];n&&e(n,i)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[i,n]of Object.entries(this.controls))if(this.contains(i)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(i,n,r)=>((n.enabled||this.disabled)&&(i[r]=n.value),i))}_reduceChildren(e,i){let n=e;return this._forEachChild((r,o)=>{n=i(n,r,o)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var dd=new U("CallSetDisabledState",{providedIn:"root",factory:()=>ma}),ma="always";function A0(t,e){return[...e.path,t]}function jl(t,e,i=ma){ga(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),N0(t,e),P0(t,e),k0(t,e),F0(t,e)}function Ul(t,e,i=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Lr(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function $r(t,e){t.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function F0(t,e){if(e.valueAccessor.setDisabledState){let i=n=>{e.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(i),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(i)})}}function ga(t,e){let i=ad(t);e.validator!==null?t.setValidators(Bl(i,e.validator)):typeof i=="function"&&t.setValidators([i]);let n=cd(t);e.asyncValidator!==null?t.setAsyncValidators(Bl(n,e.asyncValidator)):typeof n=="function"&&t.setAsyncValidators([n]);let r=()=>t.updateValueAndValidity();$r(e._rawValidators,r),$r(e._rawAsyncValidators,r)}function Lr(t,e){let i=!1;if(t!==null){if(e.validator!==null){let r=ad(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(i=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=cd(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(i=!0,t.setAsyncValidators(o))}}}let n=()=>{};return $r(e._rawValidators,n),$r(e._rawAsyncValidators,n),i}function N0(t,e){e.valueAccessor.registerOnChange(i=>{t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&hd(t,e)})}function k0(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&hd(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function hd(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function P0(t,e){let i=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};t.registerOnChange(i),e._registerOnDestroy(()=>{t._unregisterOnChange(i)})}function B0(t,e){t==null,ga(t,e)}function $0(t,e){return Lr(t,e)}function L0(t,e){if(!t.hasOwnProperty("model"))return!1;let i=t.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function V0(t){return Object.getPrototypeOf(t.constructor)===Wl}function j0(t,e){t._syncPendingControls(),e.forEach(i=>{let n=i.control;n.updateOn==="submit"&&n._pendingChange&&(i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function U0(t,e){if(!e)return null;Array.isArray(e);let i,n,r;return e.forEach(o=>{o.constructor===ql?i=o:V0(o)?n=o:r=o}),r||n||i||null}function H0(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function Hl(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function Gl(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var G0=class extends Br{constructor(e=null,i,n){super(ud(i),ld(n,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vr(i)&&(i.nonNullable||i.initialValueIsDefault)&&(Gl(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hl(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hl(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Gl(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var z0=t=>t instanceof G0;var vD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ce({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var W0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=Ce({});let t=e;return t})();var fd=new U("NgModelWithFormControlWarning");var q0={provide:Dn,useExisting:tn(()=>K0)},K0=(()=>{let e=class e extends Dn{constructor(n,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ue,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return jl(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Ul(n.control||null,n,!1),H0(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,j0(this.form,this.directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,o=this.form.get(n.path);r!==o&&(Ul(r||null,n),z0(o)&&(jl(o,n,this.callSetDisabledState),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);B0(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&$0(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ga(this.form,this),this._oldForm&&Lr(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(P(Yl,10),P(Ql,10),P(dd,8))},e.\u0275dir=ce({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&Vt("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rn([q0]),it,ft]});let t=e;return t})();var Y0={provide:Oi,useExisting:tn(()=>Q0)},Q0=(()=>{let e=class e extends Oi{set isDisabled(n){}constructor(n,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ue,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=U0(this,s)}ngOnChanges(n){this._added||this._setUpControl(),L0(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return A0(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(P(Dn,13),P(Yl,10),P(Ql,10),P(pa,10),P(fd,8))},e.\u0275dir=ce({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[rn([Y0]),it,ft]});let t=e;return t})();var J0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=Ce({imports:[W0]});let t=e;return t})();var _D=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:fd,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:dd,useValue:n.callSetDisabledState??ma}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=Ce({imports:[J0]});let t=e;return t})();var Z0=["*"];var X0=["dialog"];var pd={animation:!0,transitionTimerDelayMs:5},md=(()=>{let e=class e{constructor(){this.animation=pd.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ev(t){let{transitionDelay:e,transitionDuration:i}=window.getComputedStyle(t),n=parseFloat(e),r=parseFloat(i);return(n+r)*1e3}function gd(t){return typeof t=="string"}function va(t){return t!=null}function tv(t){return t&&t.then}function Da(t){return(t||document.body).getBoundingClientRect()}function nv(t){return e=>new Ki(i=>{let n=s=>t.run(()=>i.next(s)),r=s=>t.run(()=>i.error(s)),o=()=>t.run(()=>i.complete());return e.subscribe({next:n,error:r,complete:o})})}var iv=()=>{},{transitionTimerDelayMs:rv}=pd,jr=new Map,Dt=(t,e,i,n)=>{let r=n.context||{},o=jr.get(e);if(o)switch(n.runningTransition){case"continue":return Ze;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),jr.delete(e)}let s=i(e,n.animation,r)||iv;if(!n.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>s()),T(void 0).pipe(nv(t));let a=new ee,u=new ee,c=a.pipe(Jc(!0));jr.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:r});let l=ev(e);return t.runOutsideAngular(()=>{let d=pe(e,"transitionend").pipe(me(c),q(({target:f})=>f===e)),h=Kc(l+rv).pipe(me(c));Yc(h,d,u).pipe(me(c)).subscribe(()=>{jr.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};function ov(t,e){if(typeof navigator>"u")return"0px";let{classList:i}=t,n=i.contains("show");n||i.add("show"),t.style[e]="";let r=t.getBoundingClientRect()[e]+"px";return n||i.remove("show"),r}var sv=(t,e,i)=>{let{direction:n,maxSize:r,dimension:o}=i,{classList:s}=t;function a(){s.add("collapse"),n==="show"?s.add("show"):s.remove("show")}if(!e){a();return}return r||(r=ov(t,o),i.maxSize=r,t.style[o]=n!=="show"?r:"0px",s.remove("collapse"),s.remove("collapsing"),s.remove("show"),Da(t),s.add("collapsing")),t.style[o]=n==="show"?r:"0px",()=>{a(),s.remove("collapsing"),t.style[o]=""}},av=(()=>{let e=class e{constructor(){this._ngbConfig=g(md),this.horizontal=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(n){this._animation=n}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ob=(()=>{let e=class e{constructor(){this._config=g(av),this._element=g(Se),this._zone=g(de),this.animation=this._config.animation,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new ue,this.horizontal=this._config.horizontal,this.shown=new ue,this.hidden=new ue}set collapsed(n){this._isCollapsed!==n&&(this._isCollapsed=n,this._afterInit&&this._runTransitionWithEvents(n,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(n=this._isCollapsed){this.collapsed=!n,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(n,r){return Dt(this._zone,this._element.nativeElement,sv,{animation:r,runningTransition:"stop",context:{direction:n?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(n,r){this._runTransition(n,r).subscribe(()=>{n?this.hidden.emit():this.shown.emit()})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ce({type:e,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(r,o){r&2&&Lt("collapse-horizontal",o.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0});let t=e;return t})();var ba=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(ba||{});var xb=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})();var cv=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function vd(t){let e=Array.from(t.querySelectorAll(cv)).filter(i=>i.tabIndex!==-1);return[e[0],e[e.length-1]]}var uv=(t,e,i,n=!1)=>{t.runOutsideAngular(()=>{let r=pe(e,"focusin").pipe(me(i),R(o=>o.target));pe(e,"keydown").pipe(me(i),q(o=>o.which===ba.Tab),Ko(r)).subscribe(([o,s])=>{let[a,u]=vd(e);(s===a||s===e)&&o.shiftKey&&(u.focus(),o.preventDefault()),s===u&&!o.shiftKey&&(a.focus(),o.preventDefault())}),n&&pe(e,"click").pipe(me(i),Ko(r),R(o=>o[1])).subscribe(o=>o.focus())})};var Mb=new Date(1882,10,12),Tb=new Date(2174,10,25);var Rb=1e3*60*60*24;var wa=1080,lv=24*wa,dv=12*wa+793,Ib=29*lv+dv,Ab=11*wa+204;var Fb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=Ce({});let t=e;return t})(),hv=(()=>{let e=class e{constructor(){this._ngbConfig=g(md),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(n){this._animation=n}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bn=class{constructor(e,i,n){this.nodes=e,this.viewRef=i,this.componentRef=n}};var fv=(()=>{let e=class e{constructor(){this._document=g(ne)}hide(){let n=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,o=r.style,{overflow:s,paddingRight:a}=o;if(n>0){let u=parseFloat(window.getComputedStyle(r).paddingRight);o.paddingRight=`${u+n}px`}return o.overflow="hidden",()=>{n>0&&(o.paddingRight=a),o.overflow=s}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pv=(()=>{let e=class e{constructor(){this._nativeElement=g(Se).nativeElement,this._zone=g(de)}ngOnInit(){this._zone.onStable.asObservable().pipe(Pe(1)).subscribe(()=>{Dt(this._zone,this._nativeElement,(n,r)=>{r&&Da(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Dt(this._zone,this._nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Wn({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,o){r&2&&(Xi("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),Lt("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Zn],decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),Ur=class{update(e){}close(e){}dismiss(e){}},mv=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],gv=["animation","backdropClass"],_a=class{_applyWindowOptions(e,i){mv.forEach(n=>{va(i[n])&&(e[n]=i[n])})}_applyBackdropOptions(e,i){gv.forEach(n=>{va(i[n])&&(e[n]=i[n])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(me(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(me(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,i,n,r){this._windowCmptRef=e,this._contentRef=i,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new ee,this._dismissed=new ee,this._hidden=new ee,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let i=this._beforeDismiss();tv(i)?i.then(n=>{n!==!1&&this._dismiss(e)},()=>{}):i!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),i=this._backdropCmptRef?this._backdropCmptRef.instance.hide():T(void 0);e.subscribe(()=>{let{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),i.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Qi(e,i).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},ya=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(ya||{}),vv=(()=>{let e=class e{constructor(){this._document=g(ne),this._elRef=g(Se),this._zone=g(de),this._closed$=new ee,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ue,this.shown=new ee,this.hidden=new ee}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":gd(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Pe(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:n}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=Dt(this._zone,n,()=>n.classList.remove("show"),r),s=Dt(this._zone,this._dialogEl.nativeElement,()=>{},r),a=Qi(o,s);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let n={animation:this.animation,runningTransition:"continue"},r=Dt(this._zone,this._elRef.nativeElement,(s,a)=>{a&&Da(s),s.classList.add("show")},n),o=Dt(this._zone,this._dialogEl.nativeElement,()=>{},n);Qi(r,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{pe(n,"keydown").pipe(me(this._closed$),q(o=>o.which===ba.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(ya.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;pe(this._dialogEl.nativeElement,"mousedown").pipe(me(this._closed$),oe(()=>r=!1),_e(()=>pe(n,"mouseup").pipe(me(this._closed$),Pe(1))),q(({target:o})=>n===o)).subscribe(()=>{r=!0}),pe(n,"click").pipe(me(this._closed$)).subscribe(({target:o})=>{n===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(ya.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){let r=n.querySelector("[ngbAutofocus]"),o=vd(n)[0];(r||o||n).focus()}}_restoreFocus(){let n=this._document.body,r=this._elWithFocus,o;r&&r.focus&&n.contains(r)?o=r:o=n,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Dt(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Wn({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,o){if(r&1&&Cu(X0,7),r&2){let s;is(s=rs())&&(o._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,o){r&2&&(Kn("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),Xi("modal d-block"+(o.windowClass?" "+o.windowClass:"")),Lt("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Zn],ngContentSelectors:Z0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(r,o){r&1&&(yu(),vu(0,"div",0,1)(2,"div",2),Du(3),_u()()),r&2&&Xi("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),_v=(()=>{let e=class e{constructor(){this._applicationRef=g(on),this._injector=g(Ge),this._environmentInjector=g(Xe),this._document=g(ne),this._scrollBar=g(fv),this._activeWindowCmptHasChanged=new ee,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new ue;let n=g(de);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];uv(n,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let n=this._scrollBarRestoreFn;n&&(this._scrollBarRestoreFn=null,n())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(n,r,o){let s=o.container instanceof HTMLElement?o.container:va(o.container)?this._document.querySelector(o.container):this._document.body;if(!s)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new Ur;n=o.injector||n;let u=n.get(Xe,null)||this._environmentInjector,c=this._getContentRef(n,u,r,a,o),l=o.backdrop!==!1?this._attachBackdrop(s):void 0,d=this._attachWindowComponent(s,c.nodes),h=new _a(d,c,l,o.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.hidden.pipe(Pe(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=f=>{h.close(f)},a.dismiss=f=>{h.dismiss(f)},a.update=f=>{h.update(f)},h.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),l&&l.instance&&l.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(r=>r.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n){let r=ir(pv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),n.appendChild(r.location.nativeElement),r}_attachWindowComponent(n,r){let o=ir(vv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(o.hostView),n.appendChild(o.location.nativeElement),o}_getContentRef(n,r,o,s,a){return o?o instanceof er?this._createFromTemplateRef(o,s):gd(o)?this._createFromString(o):this._createFromComponent(n,r,o,s,a):new bn([])}_createFromTemplateRef(n,r){let o={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},s=n.createEmbeddedView(o);return this._applicationRef.attachView(s),new bn([s.rootNodes],s)}_createFromString(n){let r=this._document.createTextNode(`${n}`);return new bn([[r]])}_createFromComponent(n,r,o,s,a){let u=Ge.create({providers:[{provide:Ur,useValue:s}],parent:n}),c=ir(o,{environmentInjector:r,elementInjector:u}),l=c.location.nativeElement;return a.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new bn([[l]],c.hostView,c)}_setAriaHidden(n){let r=n.parentElement;r&&n!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==n&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,r)=>{n?r.setAttribute("aria-hidden",n):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){let r=()=>{let o=this._modalRefs.indexOf(n);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(r,r)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{let r=this._windowCmpts.indexOf(n);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nb=(()=>{let e=class e{constructor(){this._injector=g(Ge),this._modalStack=g(_v),this._config=g(hv)}open(n,r={}){let o=w(X(w({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,n,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=Ce({});let t=e;return t})();var Pb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ee({type:e}),e.\u0275inj=Ce({});let t=e;return t})();var Bb=new U("live announcer delay",{providedIn:"root",factory:()=>100});function bt(t){"@babel/helpers - typeof";return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(t)}function Ca(t,e){if(bt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(bt(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ea(t){var e=Ca(t,"string");return bt(e)==="symbol"?e:String(e)}function _d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ea(n.key),n)}}function Ie(t,e,i){return e&&_d(t.prototype,e),i&&_d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function yd(t){return t[t.length-1]}function Hr(t){return Array.isArray(t)?t.slice(0):[t]}function wn(t){return Array.isArray(t)}function Dd(t){return t!=null}function Gr(t,e){var i=0,n=-1;for(var r of t){n=n+1;var o=e(r,n);if(o)i=i+1;else break}return i}function zr(t,e){for(var i=e.length,n=0;n<i;++n){var r=e[n];t.push(r)}}function Wr(t){var e=t.split("-");if(e.length!==2)throw new Error("malformatted revision: "+t);return{height:parseInt(e[0],10),hash:e[1]}}function bd(t){var e=parseInt(t.split("-")[0],10);return e}function Cn(t,e){var i=e?e._rev:null,n=i?Wr(i).height:0,r=n+1;return r+"-"+t}var xi=1;function wt(){return{lwt:xi}}function $e(){return""}function wd(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}function Cd(t,e,i){if(e.length!==i.length)return!1;for(var n=0,r=e.length;n<r;){var o=e[n],s=i[n];if(n++,o._rev!==s._rev||o[t]!==s[t])return!1}return!0}var Zb=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});var Xb=Object.freeze(["prototype","__proto__","constructor"]);var yv="[native code] }",ew=yv.length;var Ct=class t{constructor(e,i){e=this.words=e||[],this.sigBytes=i===void 0?e.length*4:i}toString(e){return(e||Dv).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let i=0;i<e.sigBytes;i++){let n=e.words[i>>>2]>>>24-i%4*8&255;this.words[this.sigBytes+i>>>2]|=n<<24-(this.sigBytes+i)%4*8}else for(let i=0;i<e.sigBytes;i+=4)this.words[this.sigBytes+i>>>2]=e.words[i>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new t([...this.words])}},Dv={stringify(t){let e=[];for(let i=0;i<t.sigBytes;i++){let n=t.words[i>>>2]>>>24-i%4*8&255;e.push((n>>>4).toString(16),(n&15).toString(16))}return e.join("")}};var bv={parse(t){let e=t.length,i=[];for(let n=0;n<e;n++)i[n>>>2]|=(t.charCodeAt(n)&255)<<24-n%4*8;return new Ct(i,e)}},wv={parse(t){return bv.parse(unescape(encodeURIComponent(t)))}},Sa=class{constructor(){this._data=new Ct,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new Ct,this._nDataBytes=0}_append(e){typeof e=="string"&&(e=wv.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,i){}_process(e){let i,n=this._data.sigBytes/(this.blockSize*4);e?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);let r=n*this.blockSize,o=Math.min(r*4,this._data.sigBytes);if(r){for(let s=0;s<r;s+=this.blockSize)this._doProcessBlock(this._data.words,s);i=this._data.words.splice(0,r),this._data.sigBytes-=o}return new Ct(i,o)}},Oa=class extends Sa{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}},Ed=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Cv=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Wt=[],xa=class extends Oa{constructor(){super(...arguments),this._hash=new Ct([...Ed])}reset(){super.reset(),this._hash=new Ct([...Ed])}_doProcessBlock(e,i){let n=this._hash.words,r=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=n[6],d=n[7];for(let h=0;h<64;h++){if(h<16)Wt[h]=e[i+h]|0;else{let O=Wt[h-15],k=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,$=Wt[h-2],j=($<<15|$>>>17)^($<<13|$>>>19)^$>>>10;Wt[h]=k+Wt[h-7]+j+Wt[h-16]}let f=u&c^~u&l,m=r&o^r&s^o&s,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),y=d+_+f+Cv[h]+Wt[h],x=b+m;d=l,l=c,c=u,u=a+y|0,a=s,s=o,o=r,r=y+x|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+d|0}finalize(e){super.finalize(e);let i=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(i/4294967296),this._data.words[(n+64>>>9<<4)+15]=i,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}};function Sd(t){return new xa().finalize(t).toString()}function qt(t){return Sd(t)}function Od(){return new Promise(t=>setTimeout(t,0))}function Ev(t=0){return new Promise(e=>setTimeout(e,t))}var xd=Promise.resolve(!0),Le=Promise.resolve(!1),Md=Promise.resolve(null),st=Promise.resolve(),Ma=st;function Td(t=void 0){return Ma=Ma.then(()=>typeof requestIdleCallback=="function"?new Promise(e=>{requestIdleCallback(()=>e(),{timeout:t})}):Ev(0)),Ma}function Rd(t,e){return t.reduce((i,n)=>i.then(n),Promise.resolve(e))}function Kt(t=10){for(var e="",i="abcdefghijklmnopqrstuvwxyz",n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function qr(t){t+="";var e=t.charAt(0).toUpperCase();return e+t.substr(1)}function Kr(t){for(;t.charAt(0)===".";)t=t.substr(1);for(;t.slice(-1)===".";)t=t.slice(0,-1);return t}function En(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var i,n;if(Array.isArray(t)){if(i=t.length,i!==e.length)return!1;for(n=i;n--!==0;)if(!En(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var r=Object.keys(t);if(i=r.length,i!==Object.keys(e).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[n]))return!1;for(n=i;n--!==0;){var o=r[n];if(!En(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}var Sv=t=>{var e=typeof t;return t!==null&&(e==="object"||e==="function")},Ta=new Set(["__proto__","prototype","constructor"]),Ov=new Set("0123456789");function xv(t){var e=[],i="",n="start",r=!1;for(var o of t)switch(o){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");r&&(i+=o),n="property",r=!r;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(r){r=!1,i+=o;break}if(Ta.has(i))return[];e.push(i),i="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(r){r=!1,i+=o;break}if(n==="property"){if(Ta.has(i))return[];e.push(i),i=""}n="index";break}case"]":{if(n==="index"){e.push(Number.parseInt(i,10)),i="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!Ov.has(o))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),r&&(r=!1,i+="\\"),i+=o}}switch(r&&(i+="\\"),n){case"property":{if(Ta.has(i))return[];e.push(i);break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function Mv(t,e){if(typeof e!="number"&&Array.isArray(t)){var i=Number.parseInt(e,10);return Number.isInteger(i)&&t[i]===t[e]}return!1}function Sn(t,e,i){if(Array.isArray(e)&&(e=e.join(".")),!Sv(t)||typeof e!="string")return i===void 0?t:i;var n=xv(e);if(n.length===0)return i;for(var r=0;r<n.length;r++){var o=n[r];if(Mv(t,o)?t=r===n.length-1?void 0:null:t=t[o],t==null){if(r!==n.length-1)return i;break}}return t===void 0?i:t}function Yr(t){var e=t.split("."),i=e.length;return i===1?n=>n[t]:n=>{for(var r=n,o=0;o<i;++o){var s=e[o];if(r=r[s],typeof r>"u")return r}return r}}function Ia(t,e){var i=t[e];if(!i)throw new Error("missing value from object "+e);return i}function Y(t){return Object.assign({},t)}function Id(t){return Object.keys(t)[0]}function On(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort((n,r)=>typeof n=="string"&&typeof r=="string"?n.localeCompare(r):typeof n=="object"?1:-1).map(n=>On(n,e));if(typeof t=="object"&&!Array.isArray(t)){if(t instanceof RegExp)return t;var i={};return Object.keys(t).sort((n,r)=>n.localeCompare(r)).forEach(n=>{i[n]=On(t[n],e)}),i}return t}function Ra(t){if(!t||t===null||typeof t!="object")return t;if(Array.isArray(t)){for(var e=new Array(t.length),i=e.length;i--;)e[i]=Ra(t[i]);return e}var n={};for(var r in t)n[r]=Ra(t[r]);return n}var Ve=Ra;function xn(t,e,i){return Object.defineProperty(t,e,{get:function(){return i}}),i}function Ad(t,e){return e instanceof RegExp?e.toString():e}function Ke(t,e){var i=t.get(e);if(typeof i>"u")throw new Error("missing value from map "+e);return i}function je(t,e,i,n){var r=t.get(e);return typeof r>"u"?(r=i(),t.set(e,r)):n&&n(r),r}function K(t){var e=t.split("-"),i="RxDB";return e.forEach(n=>{i+=qr(n)}),i+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+i+" } from 'rxdb/plugins/"+t+`';
            addRxPlugin(`+i+`);
        `)}var Aa=0;function re(){var t=new Date().getTime();t=t+.01,t<=Aa&&(t=Aa+.01);var e=parseFloat(t.toFixed(2));return Aa=e,e}function B(t){if(!t)throw new Error("ensureNotFalsy() is falsy");return t}var Qr={bufferSize:1,refCount:!0};var Fd=/\./g;var Tv=/(\/?)(.+)\1([a-z]*)/i;function Nd(t){var e=B(t.toString().match(Tv));return{pattern:e[2],flags:e[3]}}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},at(t,e)}function Jr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,at(t,e)}function Mi(t){return Mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Mi(t)}function Fa(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Na(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mn(t,e,i){return Na()?Mn=Reflect.construct.bind():Mn=function(r,o,s){var a=[null];a.push.apply(a,o);var u=Function.bind.apply(r,a),c=new u;return s&&at(c,s.prototype),c},Mn.apply(null,arguments)}function Tn(t){var e=typeof Map=="function"?new Map:void 0;return Tn=function(n){if(n===null||!Fa(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return Mn(n,arguments,Mi(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),at(r,n)},Tn(t)}var G={isDevMode(){return!1},deepFreezeWhenDevMode(t){return t},tunnelErrorMessage(t){return"RxDB Error-Code "+t+`.
        Error messages are not included in RxDB core to reduce build size.
        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html
        - or search for the error code here: https://github.com/pubkey/rxdb/search?q=`+t+`
        `}};function Rv(t){var e="";return Object.keys(t).length===0||(e+=`Given parameters: {
`,e+=Object.keys(t).map(i=>{var n="[object Object]";try{i==="errors"?n=t[i].map(r=>JSON.stringify(r,Object.getOwnPropertyNames(r))):n=JSON.stringify(t[i],function(r,o){return o===void 0?null:o},2)}catch{}return i+":"+n}).join(`
`),e+="}"),e}function kd(t,e,i){return"RxError ("+e+`):
`+t+`
`+Rv(i)}var Iv=function(t){Jr(e,t);function e(n,r,o={}){var s,a=kd(r,n,o);return s=t.call(this,a)||this,s.code=n,s.message=a,s.parameters=o,s.rxdb=!0,s}var i=e.prototype;return i.toString=function(){return this.message},Ie(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),e}(Tn(Error)),Av=function(t){Jr(e,t);function e(n,r,o={}){var s,a=kd(r,n,o);return s=t.call(this,a)||this,s.code=n,s.message=a,s.parameters=o,s.rxdb=!0,s}var i=e.prototype;return i.toString=function(){return this.message},Ie(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),e}(Tn(TypeError));function E(t,e){return new Iv(t,G.tunnelErrorMessage(t),e)}function Rn(t,e){return new Av(t,G.tunnelErrorMessage(t),e)}function ka(t){return t&&t.status===409?t:!1}var Fv={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function Pd(t){return E("COL20",{name:Fv[t.status],document:t.documentId,writeError:t})}var In={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function le(t,e){In[t]&&In[t].forEach(i=>i(e))}function Et(t,e){return Promise.all(In[t].map(i=>i(e)))}function Zr(t){return t.documentData?t.documentData:t.previousDocumentData}function Bd(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:G.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}function St(t,e){var i=e;i=i.replace(Fd,".properties."),i="properties."+i,i=Kr(i);var n=Sn(t,i);return n}function Xr(t,e,i){if(typeof e.primaryKey=="string")return i;var n=Ti(e,i),r=i[t];if(r&&r!==n)throw E("DOC19",{args:{documentData:i,existingPrimary:r,newPrimary:n},schema:e});return i[t]=n,i}function ye(t){return typeof t=="string"?t:t.key}function Ti(t,e){if(typeof t.primaryKey=="string")return e[t.primaryKey];var i=t.primaryKey;return i.fields.map(n=>{var r=Sn(e,n);if(typeof r>"u")throw E("DOC18",{args:{field:n,documentData:e}});return r}).join(i.separator)}function $d(t){var e=On(t,!0);return e}function eo(t){t=Y(t);var e=ye(t.primaryKey);t.properties=Y(t.properties),t.additionalProperties=!1,t.hasOwnProperty("keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=Nv,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var i=Pa(t);return zr(t.required,i),t.required=t.required.filter(n=>!n.includes(".")).filter((n,r,o)=>o.indexOf(n)===r),t.version=t.version||0,t.indexes&&(t.indexes=t.indexes.map(n=>{var r=wn(n)?n.slice(0):[n];if(!r.includes(e)){var o=r.slice(0);return o.push(e),o}return r})),t}var Nv={type:"object",properties:{lwt:{type:"number",minimum:xi,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function Pa(t){var e=Object.keys(t.properties).filter(n=>t.properties[n].final),i=ye(t.primaryKey);return e.push(i),typeof t.primaryKey!="string"&&t.primaryKey.fields.forEach(n=>e.push(n)),e}function Ld(t,e){for(var i=Object.keys(t.defaultValues),n=0;n<i.length;++n){var r=i[n];(!e.hasOwnProperty(r)||typeof e[r]>"u")&&(e[r]=t.defaultValues[r])}return e}var Vd={type:"object",properties:{id:{type:"string"},lwt:{type:"number"}},required:["id","lwt"],additionalProperties:!1};var Hd="_rxdb_internal";function Gd(t,e){return S(this,null,function*(){var i=yield t.findDocumentsById([e],!1),n=i[e];return n||null})}function zd(t,e,i){var n=e.documentData,r=e.previousDocumentData,o={eventId:e.eventId,documentId:e.documentId,collectionName:i?i.name:void 0,startTime:e.startTime,endTime:e.endTime,isLocal:t,operation:e.operation,documentData:G.deepFreezeWhenDevMode(n),previousDocumentData:G.deepFreezeWhenDevMode(r)};return o}function Ii(t,e,i,n){if(n)throw n.status===409?E("CONFLICT",{collection:t.name,id:e,writeError:n,data:i}):n.status===422?E("VD2",{collection:t.name,id:e,writeError:n,data:i}):n}function Wd(t,e,i,n,r){for(var o=!!t.schema.attachments,s=[],a=[],u={},c=new Map,l=Kt(10),d={id:l,events:[],checkpoint:null,context:r},h=d.events,f=[],m=[],b=[],_=re(),y=typeof i.get=="function",x=y?i.size>0:Object.keys(i).length>0,O,k=n.length,$=function(){var M=n[j],ie=M.document[e],Mt=!1;x&&(Mt=y?i.get(ie):i[ie]);var Tt;if(Mt){var np=Mt._rev;if(!M.previous||M.previous&&np!==M.previous._rev){var ip={isError:!0,status:409,documentId:ie,writeRow:M,documentInDb:Mt};return u[ie]=ip,1}var Gi=o?jd(M):M;o&&(M.document._deleted?M.previous&&Object.keys(M.previous._attachments).forEach(we=>{m.push({documentId:ie,attachmentId:we,digest:B(M.previous)._attachments[we].digest})}):(Object.entries(M.document._attachments).find(([we,ke])=>{var qi=M.previous?M.previous._attachments[we]:void 0;return!qi&&!ke.data&&(Tt={documentId:ie,documentInDb:Mt,isError:!0,status:510,writeRow:M,attachmentId:we}),!0}),Tt||Object.entries(M.document._attachments).forEach(([we,ke])=>{var qi=M.previous?M.previous._attachments[we]:void 0;if(!qi)f.push({documentId:ie,attachmentId:we,attachmentData:ke,digest:qt(ke.data)});else{var rp=Gi.document._attachments[we].digest;ke.data&&qi.digest!==rp&&b.push({documentId:ie,attachmentId:we,attachmentData:ke,digest:qt(ke.data)})}}))),Tt?u[ie]=Tt:(a.push(Gi),(!O||O.document._meta.lwt<Gi.document._meta.lwt)&&(O=Gi));var Rt=M.document,zi=null,Uo=null,Wi=null;if(M.previous&&M.previous._deleted&&!Rt._deleted)Wi="INSERT",zi=o?Ri(Rt):Rt;else if(M.previous&&!M.previous._deleted&&!Rt._deleted)Wi="UPDATE",zi=o?Ri(Rt):Rt,Uo=M.previous;else if(Rt._deleted)Wi="DELETE",zi=B(M.document),Uo=M.previous;else throw E("SNH",{args:{writeRow:M}});var Vc={eventId:Ud(l,j,ie,M),documentId:ie,documentData:zi,previousDocumentData:Uo,operation:Wi,startTime:_,endTime:re()};c.set(ie,Vc),h.push(Vc)}else{var tp=!!M.document._deleted;if(o&&Object.entries(M.document._attachments).forEach(([we,ke])=>{ke.data?f.push({documentId:ie,attachmentId:we,attachmentData:ke,digest:qt(ke.data)}):(Tt={documentId:ie,isError:!0,status:510,writeRow:M,attachmentId:we},u[ie]=Tt)}),Tt||(o?s.push(jd(M)):s.push(M),(!O||O.document._meta.lwt<M.document._meta.lwt)&&(O=M)),!tp){var Lc={eventId:Ud(l,j,ie,M),documentId:ie,operation:"INSERT",documentData:o?Ri(M.document):M.document,previousDocumentData:o&&M.previous?Ri(M.previous):M.previous,startTime:_,endTime:re()};c.set(ie,Lc),h.push(Lc)}}},j=0;j<k;j++)$();return{bulkInsertDocs:s,bulkUpdateDocs:a,newestRow:O,errors:u,changeByDocId:c,eventBulk:d,attachmentsAdd:f,attachmentsRemove:m,attachmentsUpdate:b}}function jd(t){return{previous:t.previous,document:Ri(t.document)}}function kv(t){return atob(t).length}function Pv(t){var e=t.data;if(!e)return t;var i={digest:qt(e),length:kv(e),type:t.type};return i}function Ri(t){var e=Y(t);return e._attachments={},Object.entries(t._attachments).forEach(([i,n])=>{e._attachments[i]=Pv(n)}),e}function to(t){var e=Y(t);return e._meta=Y(t._meta),e}function Ud(t,e,i,n){return t+"|"+e+"|"+i+"|"+n.document._rev}function no(t,e,i){G.deepFreezeWhenDevMode(i);var n=ye(i.primaryKey);function r(s){var a=Y(s.document);return a._meta=Y(a._meta),G.isDevMode()&&(a=Xr(n,i,a),s.previous,s.previous&&Object.keys(s.previous._meta).forEach(u=>{if(!s.document._meta.hasOwnProperty(u))throw E("SNH",{dataBefore:s.previous,dataAfter:s.document})})),a._meta.lwt=re(),a._rev=Cn(t.token,s.previous),{document:a,previous:s.previous}}var o={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(s,a){var u=s.map(c=>r(c));return t.lockedRun(()=>e.bulkWrite(u,a)).then(c=>{var l=Object.values(c.error).filter(f=>!!(f.status===409&&!f.writeRow.previous&&!f.writeRow.document._deleted&&B(f.documentInDb)._deleted));if(l.length>0){var d={error:Y(c.error),success:Y(c.success)},h=l.map(f=>(delete d.error[f.documentId],{previous:f.documentInDb,document:Object.assign({},f.writeRow.document,{_rev:Cn(t.token,f.documentInDb)})}));return t.lockedRun(()=>e.bulkWrite(h,a)).then(f=>(d.error=Object.assign(d.error,f.error),d.success=Object.assign(d.success,f.success),d))}return c})},query(s){return t.lockedRun(()=>e.query(s))},count(s){return t.lockedRun(()=>e.count(s))},findDocumentsById(s,a){return t.lockedRun(()=>e.findDocumentsById(s,a))},getAttachmentData(s,a,u){return t.lockedRun(()=>e.getAttachmentData(s,a,u))},getChangedDocumentsSince(s,a){return t.lockedRun(()=>e.getChangedDocumentsSince(B(s),a))},cleanup(s){return t.lockedRun(()=>e.cleanup(s))},remove(){return t.storageInstances.delete(o),t.lockedRun(()=>e.remove())},close(){return t.storageInstances.delete(o),t.lockedRun(()=>e.close())},changeStream(){return e.changeStream()},conflictResultionTasks(){return e.conflictResultionTasks()},resolveConflictResultionTask(s){if(s.output.isEqual)return e.resolveConflictResultionTask(s);var a=Object.assign({},s.output.documentData,{_meta:wt(),_rev:$e(),_attachments:{}}),u=Y(a);return delete u._meta,delete u._rev,delete u._attachments,e.resolveConflictResultionTask({id:s.id,output:{isEqual:!1,documentData:u}})}};return t.storageInstances.add(o),o}function qd(t){if(t.schema.keyCompression)throw E("UT5",{args:{params:t}});if(Bv(t.schema))throw E("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw E("UT7",{args:{params:t}})}function Bv(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}var Kd=function(){function t(i,n,r,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=i,this.primaryPath=n,this.preWrite=r,this.postWrite=o}var e=t.prototype;return e.addWrite=function(n,r){var o=n[this.primaryPath],s=je(this.queueByDocId,o,()=>[]),a=new Promise((u,c)=>{var l={lastKnownDocumentState:n,modifier:r,resolve:u,reject:c};B(s).push(l),this.triggerRun()});return a},e.triggerRun=function(){return S(this,null,function*(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],r=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(r.entries()).map(u=>S(this,[u],function*([s,a]){var c=$v(a.map(h=>h.lastKnownDocumentState)),l=c;for(var d of a)try{l=yield d.modifier(Ve(l))}catch(h){d.reject(h),d.reject=()=>{},d.resolve=()=>{}}try{yield this.preWrite(l,c)}catch(h){a.forEach(f=>f.reject(h));return}n.push({previous:c,document:l})})));var o=n.length>0?yield this.storageInstance.bulkWrite(n,"incremental-write"):{error:{},success:{}};return yield Promise.all(Array.from(Object.entries(o.success)).map(([s,a])=>{this.postWrite(a);var u=Ke(r,s);u.forEach(c=>c.resolve(a))})),Array.from(Object.entries(o.error)).forEach(([s,a])=>{var u=Ke(r,s),c=ka(a);if(c){var l=je(this.queueByDocId,s,()=>[]);u.reverse().forEach(h=>{h.lastKnownDocumentState=B(c.documentInDb),B(l).unshift(h)})}else{var d=Pd(a);u.forEach(h=>h.reject(d))}}),this.isRunning=!1,this.triggerRun()}})},t}();function Ba(t){var e=i=>S(this,null,function*(){var n=wd(i);n._deleted=i._deleted;var r=yield t(n),o=Object.assign({},r,{_meta:i._meta,_attachments:i._attachments,_rev:i._rev,_deleted:typeof r._deleted<"u"?r._deleted:i._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o});return e}function $v(t){var e=t[0],i=Wr(e._rev).height;return t.forEach(n=>{var r=Wr(n._rev).height;r>i&&(e=n,i=r)}),e}var Ai={get primaryPath(){var t=this;if(t.isInstanceOfRxDocument)return t.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){var t=this;if(t.isInstanceOfRxDocument)return t._data._rev},get deleted$(){var t=this;if(t.isInstanceOfRxDocument)return t.$.pipe(R(e=>e._deleted))},get deleted(){var t=this;if(t.isInstanceOfRxDocument)return t._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){var t=this;return t.collection.$.pipe(q(e=>!e.isLocal),q(e=>e.documentId===this.primary),R(e=>Zr(e)),Ft(t.collection._docCache.getLatestDocumentData(this.primary)),en((e,i)=>e._rev===i._rev),R(e=>this.collection._docCache.getCachedRxDocument(e)),Ji(Qr))},get$(t){if(G.isDevMode()){if(t.includes(".item."))throw E("DOC1",{path:t});if(t===this.primaryPath)throw E("DOC2");if(this.collection.schema.finalFields.includes(t))throw E("DOC3",{path:t});var e=St(this.collection.schema.jsonSchema,t);if(!e)throw E("DOC4",{path:t})}return this.$.pipe(R(i=>Sn(i,t)),en())},populate(t){var e=St(this.collection.schema.jsonSchema,t),i=this.get(t);if(!i)return Md;if(!e)throw E("DOC5",{path:t});if(!e.ref)throw E("DOC6",{path:t,schemaObj:e});var n=this.collection.database.collections[e.ref];if(!n)throw E("DOC7",{ref:e.ref,path:t,schemaObj:e});return e.type==="array"?n.findByIds(i).exec().then(r=>{var o=r.values();return Array.from(o)}):n.findOne(i).exec()},get(t){if(this._data){var e=this._propertyCache.get(t);if(e)return e;var i=Sn(this._data,t);return typeof i!="object"||Array.isArray(i)?G.deepFreezeWhenDevMode(i):(i=Ve(i),$a(this.collection.schema,i,t,this),this._propertyCache.set(t,i),i)}},toJSON(t=!1){if(t)return G.deepFreezeWhenDevMode(this._data);var e=Y(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,G.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return Ve(this.toJSON(t))},update(t){throw K("update")},incrementalUpdate(t){throw K("update")},updateCRDT(t){throw K("crdt")},putAttachment(){throw K("attachments")},getAttachment(){throw K("attachments")},allAttachments(){throw K("attachments")},get allAttachments$(){throw K("attachments")},modify(t,e){return S(this,null,function*(){var i=this._data,n=yield Ba(t)(i);return this._saveData(n,i)})},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,Ba(t)).then(i=>this.collection._docCache.getCachedRxDocument(i))},patch(t){var e=this._data,i=Ve(e);return Object.entries(t).forEach(([n,r])=>{i[n]=r}),this._saveData(i,e)},incrementalPatch(t){return this.incrementalModify(e=>(Object.entries(t).forEach(([i,n])=>{e[i]=n}),e))},_saveData(t,e){return S(this,null,function*(){if(t=Y(t),this._data._deleted)throw E("DOC11",{id:this.primary,document:this});yield La(this.collection,t,e);var i=yield this.collection.storageInstance.bulkWrite([{previous:e,document:t}],"rx-document-save-data"),n=i.error[this.primary];return Ii(this.collection,this.primary,t,n),yield this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(Ia(i.success,this.primary))})},remove(){var t=this.collection;if(this.deleted)return Promise.reject(E("DOC13",{document:this,id:this.primary}));var e=Y(this._data),i;return t._runHooks("pre","remove",e,this).then(()=>S(this,null,function*(){e._deleted=!0;var n=yield t.storageInstance.bulkWrite([{previous:this._data,document:e}],"rx-document-remove"),r=n.error[this.primary];return Ii(t,this.primary,e,r),Ia(n.success,this.primary)})).then(n=>(i=n,this.collection._runHooks("post","remove",e,this))).then(()=>this.collection._docCache.getCachedRxDocument(i))},incrementalRemove(){return this.incrementalModify(t=>S(this,null,function*(){return yield this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t})).then(t=>S(this,null,function*(){return yield this.collection._runHooks("post","remove",t._data,t),t}))},destroy(){throw E("DOC14")}};function Yd(t=Ai){var e=function(n,r){this.collection=n,this._data=r,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function $a(t,e,i="",n=!1){if(e!==null){var r=St(t.jsonSchema,i);typeof r>"u"||(r.properties&&(r=r.properties),Object.keys(r).forEach(o=>{var s=Kr(i+"."+o);e.__defineGetter__(o,function(){var a=n||this;if(!(!a.get||typeof a.get!="function")){var u=a.get(s);return u}}),Object.defineProperty(e,o+"$",{get:function(){var a=n||this;return a.get$(s)},enumerable:!1,configurable:!1}),Object.defineProperty(e,o+"_",{get:function(){var a=n||this;return a.populate(s)},enumerable:!1,configurable:!1}),e.__defineSetter__(o,function(a){var u=n||this;return u.set(s,a)})}))}}function Qd(t,e,i){var n=new t(e,i);return le("createRxDocument",n),n}function La(t,e,i){return e._meta=Object.assign({},i._meta,e._meta),G.isDevMode()&&t.schema.validateChange(i,e),t._runHooks("pre","save",e,i)}var Va=function(){function t(i,n){this.jsonSchema=i,this.hashFunction=n,this.indexes=Lv(this.jsonSchema),this.primaryPath=ye(this.jsonSchema.primaryKey),this.finalFields=Pa(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(n,r){this.finalFields.forEach(o=>{if(!En(n[o],r[o]))throw E("DOC9",{dataBefore:n,dataAfter:r,fieldName:o,schema:this.jsonSchema})})},e.getDocumentPrototype=function(){var n={};return $a(this,n,""),xn(this,"getDocumentPrototype",()=>n),n},e.getPrimaryOfDocumentData=function(n){return Ti(this.jsonSchema,n)},Ie(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var i={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>n.hasOwnProperty("default")).forEach(([n,r])=>i[n]=r.default),xn(this,"defaultValues",i)}},{key:"hash",get:function(){return xn(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),t}();function Lv(t){return(t.indexes||[]).map(e=>wn(e)?e:[e])}function Jd(t,e,i=!0){i&&le("preCreateRxSchema",t);var n=eo(t);n=$d(n),G.deepFreezeWhenDevMode(n);var r=new Va(n,e);return le("createRxSchema",r),r}var An="UNKNOWN";function io(t){return t[t.length-1]}function Vv(t){let e=typeof t;return t!==null&&(e==="object"||e==="function")}function ja(t,e,i){if(Array.isArray(e)&&(e=e.join(".")),!Vv(t)||typeof e!="string")return i===void 0?t:i;let n=e.split(".");if(n.length===0)return i;for(let r=0;r<n.length;r++){let o=n[r];if(jv(t,o)?t=r===n.length-1?void 0:null:t=t[o],t==null){if(r!==n.length-1)return i;break}}return t===void 0?i:t}function jv(t,e){if(typeof e!="number"&&Array.isArray(t)){let i=Number.parseInt(e,10);return Number.isInteger(i)&&t[i]===t[e]}return!1}var Ua=t=>!!t.queryParams.limit,Zd=t=>t.queryParams.limit===1,Xd=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),eh=t=>t.changeEvent.operation==="DELETE",th=t=>t.changeEvent.operation==="INSERT",nh=t=>t.changeEvent.operation==="UPDATE",ih=t=>t.changeEvent.previous===An,rh=t=>Ua(t)&&t.previousResults.length>=t.queryParams.limit,oh=t=>{let e=t.queryParams.sortFields,i=t.changeEvent.previous,n=t.changeEvent.doc;if(!n)return!1;if(!i||i===An)return!0;for(let r=0;r<e.length;r++){let o=e[r],s=ja(i,o),a=ja(n,o);if(s!==a)return!0}return!1},sh=t=>{let e=t.changeEvent.id;if(t.keyDocumentMap)return t.keyDocumentMap.has(e);{let i=t.queryParams.primaryKey,n=t.previousResults;for(let r=0;r<n.length;r++)if(n[r][i]===e)return!0;return!1}},ah=t=>{let e=t.previousResults[0];return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},ch=t=>{let e=io(t.previousResults);return!!(e&&e[t.queryParams.primaryKey]===t.changeEvent.id)},uh=t=>{let e=t.changeEvent.previous;if(!e||e===An)return!1;let i=t.previousResults[0];return i?i[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,i)<0:!1},lh=t=>{let e=t.changeEvent.previous;if(!e||e===An)return!1;let i=io(t.previousResults);return i?i[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,i)>0:!1},dh=t=>{let e=t.changeEvent.doc;if(!e)return!1;let i=t.previousResults[0];return i?i[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,i)<0:!1},hh=t=>{let e=t.changeEvent.doc;if(!e)return!1;let i=io(t.previousResults);return i?i[t.queryParams.primaryKey]===t.changeEvent.id?!0:t.queryParams.sortComparator(e,i)>0:!1},fh=t=>{let e=t.changeEvent.previous;return!e||e===An?!1:t.queryParams.queryMatcher(e)},ph=t=>{let e=t.changeEvent.doc;return e?t.queryParams.queryMatcher(e):!1},mh=t=>t.previousResults.length===0;var gh={0:th,1:nh,2:eh,3:Ua,4:Zd,5:Xd,6:mh,7:ih,8:rh,9:ah,10:ch,11:oh,12:sh,13:uh,14:lh,15:dh,16:hh,17:fh,18:ph};function ro(t,e,i,n){var r=t.length,o=r-1,s=0;if(r===0)return t.push(e),0;for(var a;n<=o;)s=n+(o-n>>1),a=t[s],i(a,e)<=0?n=s+1:o=s-1;return i(a,e)<=0&&s++,t.splice(s,0,e),s}var vh=t=>{},oo=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},so=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},ao=t=>{let e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},co=t=>{let e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},_h=t=>{ao(t),so(t)},yh=t=>{co(t),oo(t)},Dh=t=>{ao(t),oo(t)},bh=t=>{co(t),so(t)},Ha=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);let e=t.queryParams.primaryKey,i=t.previousResults;for(let n=0;n<i.length;n++)if(i[n][e]===t.changeEvent.id){i.splice(n,1);break}},wh=t=>{let e=t.changeEvent.doc,i=t.queryParams.primaryKey,n=t.previousResults;for(let r=0;r<n.length;r++)if(n[r][i]===t.changeEvent.id){n[r]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}},Ch=t=>{let e={_id:"wrongHuman"+new Date().getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},Ga=t=>{let e=t.changeEvent.id,i=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,i)}else if(t.previousResults.find(r=>r[t.queryParams.primaryKey]===e))return;ro(t.previousResults,i,t.queryParams.sortComparator,0)},Eh=t=>{Ha(t),Ga(t)},Sh=t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},Oh=t=>{throw new Error("Action unknownAction should never be called")};var xh=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Mh={doNothing:vh,insertFirst:oo,insertLast:so,removeFirstItem:ao,removeLastItem:co,removeFirstInsertLast:_h,removeLastInsertFirst:yh,removeFirstInsertFirst:Dh,removeLastInsertLast:bh,removeExisting:Ha,replaceExisting:wh,alwaysWrong:Ch,insertAtSortPosition:Ga,removeExistingAndInsertAtSortPosition:Eh,runFullQueryAgain:Sh,unknownAction:Oh};function uo(t){return t.charCodeAt(0)-40}function Th(t){return t?"1":"0"}function Uv(t=6){let e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length;for(let r=0;r<t;r++)e+=i.charAt(Math.floor(Math.random()*n));return e}var FC=Uv(4);function za(t,e){let i=[];for(let n=0,r=t.length;n<r;n+=e)i.push(t.substring(n,n+e));return i}function Rh(t){let e=new Map,n=2+parseInt(t.charAt(0)+t.charAt(1),10)*2,r=t.substring(2,n),o=za(r,2);for(let b=0;b<o.length;b++){let _=o[b],y=_.charAt(0),x=uo(_.charAt(1));e.set(y,x)}let s=t.substring(n,t.length-3),a=za(s,4);for(let b=0;b<a.length;b++){let _=a[b],y=_.charAt(0),x=_.charAt(1),O=_.charAt(2),k=uo(_.charAt(3));if(!e.has(x))throw new Error("missing node with id "+x);if(!e.has(O))throw new Error("missing node with id "+O);let $=e.get(x),j=e.get(O),M={l:k,0:$,1:j};e.set(y,M)}let u=t.slice(-3),c=u.charAt(0),l=u.charAt(1),d=uo(u.charAt(2)),h=e.get(c),f=e.get(l);return{l:d,0:h,1:f}}function Ih(t,e,i){let n=t,r=t.l;for(;;){let o=e[r](i),s=Th(o);if(n=n[s],typeof n=="number"||typeof n=="string")return n;r=n.l}}var Hv="14a2b0c/d1e,f+g5h.i4j*k-l)m(n6ohk1pdf1qef1rin-sjn-ton-ugn-vmn-whn-xkn-yln-zdf5{ef5|wx5}df7~dz7\x7Fef7\xA1bk7\xA2e{7\xA3g|7\xA4ry7\xA5dp7\xA6gk7\xA7eq7\xA8gt7\xA9ac7\xAAmv7\xABgu7\xACnm7\xADiy7\xAEnw7\xAF\xA4s8\xB0\xAB\xA68\xB1\xACk8\xB2\xAAm8\xB3\xAEv8\xB4\xABn8\xB5\xACn8\xB6vm8\xB7xv8\xB8mn8\xB9\xADj8\xBA\xAEm8\xBBxm8\xBC\xAD\xB93\xBD}~3\xBE\xA9\xB03\xBF\x7F\xA23\xC0\xA1\xA33\xC1m\xB13\xC2\xAE\xBA3\xC3m\xBA3\xC4\xA9\xB43\xC5b\xAE3\xC6m\xB53\xC7m\xBB3\xC8x\xBB3\xC9kn3\xCAm\xB83\xCB\xBCj6\xCC\xC2m6\xCD\xC6\xC36\xCE\xC8m6\xCFnm6\xD0\xCA\xC76\xD1\xCC\xCE,\xD2\xCD\xD0,\xD3\xC5\xC9,\xD4\xB2\xB6,\xD5\xB3\xB7,\xD6\xAEn,\xD7\xBA\xBB,\xD8mf9\xD9\xCB\xC19\xDAym9\xDBm\xCF9\xDC\xD1\xD29\xDDz{2\xDEpq2\xDF\xBD\xBF2\xE0\xBE\xC02\xE1\xA5\xA72\xE2\xB0\xA82\xE3\xC4\xD32\xE4\xB4\xD62\xE5\xDDn0\xE6\xDEn0\xE7\xD8\xDB0\xE8\xD9\xDC0\xE9\xDFn0\xEA\xE0\xE30\xEB\xB2\xD40\xEC\xAF\xD50\xED\xE1n0\xEE\xE2\xE40\xEF\xB9\xD70\xF0\xE7v/\xF1\xE5\xE6/\xF2\xE7\xEB/\xF3\xE8\xEC/\xF4\xE9\xED/\xF5\xEA\xEE/\xF6\xDAy/\xF7\xF2m(\xF8\xF3\xEF(\xF9\xF6y(\xFA\xF7\xF8:\xFB\xF4\xF5:\xFCm\xF9:\xFD\xF0\xF14\xFE\xFA\xFB4\xFF\xFE\xFD*\u0100\xFCm*\xFF\u0100.",Wa;function Gv(){return Wa||(Wa=Rh(Hv)),Wa}var Ah=t=>Ih(Gv(),gh,t);function Fh(t){let e=Ah(t);return xh[e]}function Nh(t,e,i,n,r){let o=Mh[t];return o({queryParams:e,changeEvent:i,previousResults:n,keyDocumentMap:r}),n}var Ae=String.fromCharCode(65535),Ot=Number.MIN_VALUE;function Ph(t,e){var i=ye(t.primaryKey),n=e.selector,r=t.indexes?t.indexes.slice(0):[];e.index?r=[e.index]:r.push([i]);var o=e.sort.map(l=>Object.keys(l)[0]),s=o.join(","),a=!!e.sort.find(l=>Object.values(l)[0]==="desc"),u=-1,c;return r.forEach(l=>{var d=!0,h=!0,f=l.map(_=>{var y=n[_],x=y?Object.keys(y):[],O={};if(!y||!x.length){var k=h?Ot:Ae;O={startKey:k,endKey:d?Ae:Ot,inclusiveStart:!0,inclusiveEnd:!0}}else x.forEach($=>{if(lo.has($)){var j=y[$],M=qv($,j);O=Object.assign(O,M)}});return typeof O.startKey>"u"&&(O.startKey=Ot),typeof O.endKey>"u"&&(O.endKey=Ae),typeof O.inclusiveStart>"u"&&(O.inclusiveStart=!0),typeof O.inclusiveEnd>"u"&&(O.inclusiveEnd=!0),h&&!O.inclusiveStart&&(h=!1),d&&!O.inclusiveEnd&&(d=!1),O}),m={index:l,startKeys:f.map(_=>_.startKey),endKeys:f.map(_=>_.endKey),inclusiveEnd:d,inclusiveStart:h,sortFieldsSameAsIndexFields:!a&&s===l.join(","),selectorSatisfiedByIndex:kh(l,e.selector)},b=Kv(t,e,m);(b>0&&b>u||e.index)&&(u=b,c=m)}),c||(c={index:[i],startKeys:[Ot],endKeys:[Ae],inclusiveEnd:!0,inclusiveStart:!0,sortFieldsSameAsIndexFields:!a&&s===i,selectorSatisfiedByIndex:kh([i],e.selector)}),c}var lo=new Set(["$eq","$gt","$gte","$lt","$lte"]),zv=new Set(["$eq","$gt","$gte"]),Wv=new Set(["$eq","$lt","$lte"]);function kh(t,e){var i=Object.entries(e),n=i.find(([u,c])=>{if(!t.includes(u))return!0;var l=Object.entries(c).find(([d,h])=>!lo.has(d));return l});if(n)return!1;var r,o=t.find(u=>{var c=e[u];if(!c)return!1;var l=Object.keys(c).find(d=>zv.has(d));return r&&l?!0:(l!=="$eq"&&(r=l),!1)});if(o)return!1;var s,a=t.find(u=>{var c=e[u];if(!c)return!1;var l=Object.keys(c).find(d=>Wv.has(d));return s&&l?!0:(l!=="$eq"&&(s=l),!1)});return!a}function qv(t,e){switch(t){case"$eq":return{startKey:e,endKey:e};case"$lte":return{endKey:e};case"$gte":return{startKey:e};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}function Kv(t,e,i){var n=0,r=l=>{l>0&&(n=n+l)},o=10,s=Gr(i.startKeys,l=>l!==Ot&&l!==Ae);r(s*o);var a=Gr(i.startKeys,l=>l!==Ae&&l!==Ot);r(a*o);var u=Gr(i.startKeys,(l,d)=>l===i.endKeys[d]);r(u*o*1.5);var c=i.sortFieldsSameAsIndexFields?5:0;return r(c),n}var Ya=Number.MAX_SAFE_INTEGER,Qa=Number.MIN_SAFE_INTEGER,Yt=Symbol("missing"),Yv=Object.getPrototypeOf({}),Qv="[object Object]",Jv=/^\[object ([a-zA-Z0-9]+)\]$/,po=t=>{let e=Fn(t),i=0,n=e.length;for(;n;)i=(i<<5)-i^e.charCodeAt(--n);return i>>>0},Vh=new Set(["null","undefined","boolean","number","string","date","regexp"]),Zv={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},se=(t,e)=>{t===Yt&&(t=void 0),e===Yt&&(e=void 0);let[i,n]=[t,e].map(r=>Zv[Fe(r).toLowerCase()]);return i!==n?i-n:i===1||i===2||i===6?t<e?-1:t>e?1:0:Ne(t,e)?0:t<e?-1:t>e?1:0};function v(t,e){if(!t)throw new Error(e)}var Pn=t=>{let e=new Map,i=r=>{if(e.has(r))throw new Error("cycle detected during clone operation.");e.set(r,!0)},n=r=>{if(r instanceof Date)return new Date(r);if(I(r)){i(r);let o=new Array(r.length),s=r.length;for(let a=0;a<s;a++)o[a]=n(r[a]);return o}if(N(r)){i(r);let o={};for(let s in r)o[s]=n(r[s]);return o}return r};return n(t)},Fe=t=>Jv.exec(Object.prototype.toString.call(t))[1],Fi=t=>typeof t=="boolean",L=t=>typeof t=="string",V=t=>!isNaN(t)&&typeof t=="number";var I=Array.isArray,N=t=>{if(!t)return!1;let e=Object.getPrototypeOf(t);return(e===Yv||e===null)&&Qv===Object.prototype.toString.call(t)},Ni=t=>t===Object(t),ki=t=>t instanceof Date,Pi=t=>t instanceof RegExp,Ja=t=>typeof t=="function",D=t=>t==null,Ye=(t,e)=>t.includes(e),mo=(t,e)=>!Ye(t,e),Qe=(t,e=!0)=>!!t||e&&t==="",xe=t=>D(t)||L(t)&&!t||t instanceof Array&&t.length===0||N(t)&&Object.keys(t).length===0,Bh=t=>t===Yt,ct=t=>t instanceof Array?t:[t],ge=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),Xv=(t,e)=>N(t)&&N(e)||I(t)&&I(e);function kn(t,e,i){if(i=i||{flatten:!1},Bh(t)||D(t))return e;if(Bh(e)||D(e))return t;if(!Xv(t,e)){if(i.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(i.skipValidation=!0,I(t)){let n=t,r=e;if(i.flatten){let o=0,s=0;for(;o<n.length&&s<r.length;)n[o]=kn(n[o++],r[s++],i);for(;s<r.length;)n.push(e[s++])}else De(n,r)}else for(let n in e)t[n]=kn(t[n],e[n],i);return t}function $h(t,e=po){let i=new Map;return t.forEach((n,r)=>{let o=go(n,e);i.has(o)?i.get(o).some(s=>Ne(t[s],n))||i.get(o).push(r):i.set(o,[r])}),i}function Qt(t,e=po){if(t.some(a=>a.length==0))return[];if(t.length===1)return Array.from(t);let i=jh(t.map((a,u)=>[u,a.length]),a=>a[1]),n=t[i[0][0]],r=$h(n,e),o=new Map,s=new Array;return r.forEach((a,u)=>{let c=a.map(f=>n[f]),l=c.map(f=>0),d=c.map(f=>[i[0][0],0]),h=!1;for(let f=1;f<t.length;f++){let[m,b]=i[f],_=t[m];if(o.has(f)||o.set(f,$h(_)),o.get(f).has(u)){let y=o.get(f).get(u).map(x=>_[x]);h=c.map((x,O)=>y.some((k,$)=>{let j=l[O];return Ne(x,k)&&(l[O]++,m<d[O][0]&&(d[O]=[m,o.get(f).get(u)[$]])),j<l[O]})).some(Boolean)}if(!h)return}h&&De(s,l.map((f,m)=>f===t.length-1?[c[m],d[m]]:Yt).filter(f=>f!==Yt))}),s.sort((a,u)=>{let[c,[l,d]]=a,[h,[f,m]]=u,b=se(l,f);return b!==0?b:se(d,m)}).map(a=>a[0])}function Za(t,e=0){let i=new Array;function n(r,o){for(let s=0,a=r.length;s<a;s++)I(r[s])&&(o>0||o<0)?n(r[s],Math.max(-1,o-1)):i.push(r[s])}return n(t,e),i}function Ne(t,e){let i=[t],n=[e];for(;i.length>0;){if(t=i.pop(),e=n.pop(),t===e)continue;let r=Fe(t).toLowerCase();if(r!==Fe(e).toLowerCase()||r==="function")return!1;if(r==="array"){let o=t,s=e;if(o.length!==s.length)return!1;if(o.length===s.length&&o.length===0)continue;De(i,o),De(n,s)}else if(r==="object"){let o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(let a=0,u=o.length;a<u;a++){let c=o[a];if(!ge(e,c))return!1;i.push(t[c]),n.push(e[c])}}else if(Fn(t)!==Fn(e))return!1}return i.length===0}function Fn(t){let e=Fe(t).toLowerCase();switch(e){case"boolean":case"number":case"regexp":return t.toString();case"string":return JSON.stringify(t);case"date":return t.toISOString();case"null":case"undefined":return e;case"array":return"["+t.map(Fn).join(",")+"]";default:break}let i=e==="object"?"":`${Fe(t)}`,n=Object.keys(t);return n.sort(),`${i}{`+n.map(r=>`${Fn(r)}:${Fn(t[r])}`).join(",")+"}"}function go(t,e){return e=e||po,D(t)?null:e(t).toString()}function jh(t,e,i=se){if(xe(t))return t;let n=new Array,r=new Array;for(let o=0;o<t.length;o++){let s=t[o],a=e(s,o);D(a)?r.push(s):n.push([a,s])}return n.sort((o,s)=>i(o[0],s[0])),De(r,n.map(o=>o[1]))}function vo(t,e,i=po){if(t.length<1)return new Map;let n=new Map,r=new Map;for(let o=0;o<t.length;o++){let s=t[o],a=e(s,o),u=go(a,i);if(u===null)r.has(null)?r.get(null).push(s):r.set(null,[s]);else{let c=n.has(u)?n.get(u).find(l=>Ne(l,a)):null;D(c)?(r.set(a,[s]),n.has(u)?n.get(u).push(a):n.set(u,[a])):r.get(c).push(s)}}return r}var qa=5e4;function De(t,...e){return t instanceof Array?e.reduce((i,n)=>{let r=Math.ceil(n.length/qa),o=0;for(;r-- >0;)Array.prototype.push.apply(i,n.slice(o,o+qa)),o+=qa;return i},t):e.filter(Ni).reduce((i,n)=>(Object.assign(i,n),i),t)}function Ka(t,e){return Ni(t)?t[e]:void 0}function e_(t,e){if(e<1)return t;for(;e--&&t.length===1;)t=t[0];return t}function ut(t,e,i){let n=0;function r(s,a){let u=s;for(let c=0;c<a.length;c++){let l=a[c];if(/^\d+$/.exec(l)===null&&u instanceof Array){if(c===0&&n>0)break;n+=1;let h=a.slice(c);u=u.reduce((f,m)=>{let b=r(m,h);return b!==void 0&&f.push(b),f},[]);break}else u=Ka(u,l);if(u===void 0)break}return u}let o=Vh.has(Fe(t).toLowerCase())?t:r(t,e.split("."));return o instanceof Array&&i?.unwrapArray?e_(o,n):o}function Nn(t,e,i){let n=e.split("."),r=n[0],o=n.slice(1).join("."),s=/^\d+$/.exec(r)!==null,a=n.length>1,u,c;if(t instanceof Array)if(s)u=Ka(t,Number(r)),a&&(u=Nn(u,o,i)),u=[u];else{u=[];for(let l of t)c=Nn(l,e,i),i?.preserveMissing?(c===void 0&&(c=Yt),u.push(c)):c!==void 0&&u.push(c)}else{if(c=Ka(t,r),a&&(c=Nn(c,o,i)),c===void 0)return;u=i?.preserveKeys?Object.assign({},t):{},u[r]=c}return u}function ho(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===Yt?t.splice(e,1):ho(t[e]);else if(N(t))for(let e in t)ge(t,e)&&ho(t[e])}var Lh=/^\d+$/;function fo(t,e,i,n){let r=e.split("."),o=r[0],s=r.slice(1).join(".");if(r.length===1)(N(t)||I(t)&&Lh.test(o))&&i(t,o);else{n?.buildGraph&&D(t[o])&&(t[o]={});let a=t[o];if(!a)return;let u=!!(r.length>1&&Lh.test(r[1]));a instanceof Array&&n?.descendArray&&!u?a.forEach(c=>fo(c,s,i,n)):fo(a,s,i,n)}}function _o(t,e,i){fo(t,e,(n,r)=>{n[r]=i},{buildGraph:!0})}function Bi(t,e,i){fo(t,e,(n,r)=>{if(n instanceof Array){if(/^\d+$/.test(r))n.splice(parseInt(r),1);else if(i&&i.descendArray)for(let o of n)N(o)&&delete o[r]}else N(n)&&delete n[r]},i)}var t_=/^\$[a-zA-Z0-9_]+$/;function Ue(t){return t_.test(t)}function yo(t){if(Vh.has(Fe(t).toLowerCase()))return Pi(t)?{$regex:t}:{$eq:t};if(Ni(t)){if(!Object.keys(t).some(Ue))return{$eq:t};if(ge(t,"$regex")){let i=Object.assign({},t);return i.$regex=new RegExp(t.$regex,t.$options),delete i.$options,i}}return t}var lt=function(t){return t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t}(lt||{}),te=class t{constructor(e,i,n,r=Date.now()){this._opts=e,this._root=i,this._local=n,this.timestamp=r,this.update(i,n)}static init(e,i,n){return e instanceof t?new t(e._opts,D(e.root)?i:e.root,Object.assign({},e.local,n)):new t(e,i,n)}update(e,i){var n;return this._root=e,this._local=i&&Object.assign({},i,{variables:Object.assign({},(n=this._local)===null||n===void 0?void 0:n.variables,i?.variables)}),this}getOptions(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:Bn.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var e;return(e=this._opts)===null||e===void 0?void 0:e.collation}get processingMode(){var e;return((e=this._opts)===null||e===void 0?void 0:e.processingMode)||lt.CLONE_OFF}get useStrictMode(){var e;return(e=this._opts)===null||e===void 0?void 0:e.useStrictMode}get scriptEnabled(){var e;return(e=this._opts)===null||e===void 0?void 0:e.scriptEnabled}get useGlobalContext(){var e;return(e=this._opts)===null||e===void 0?void 0:e.useGlobalContext}get hashFunction(){var e;return(e=this._opts)===null||e===void 0?void 0:e.hashFunction}get collectionResolver(){var e;return(e=this._opts)===null||e===void 0?void 0:e.collectionResolver}get jsonSchemaValidator(){var e;return(e=this._opts)===null||e===void 0?void 0:e.jsonSchemaValidator}get variables(){var e;return(e=this._opts)===null||e===void 0?void 0:e.variables}get context(){var e;return(e=this._opts)===null||e===void 0?void 0:e.context}};function $n(t){return t instanceof te?t.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:lt.CLONE_OFF},t),{context:t?.context?Bn.from(t?.context):Bn.init({})}))}var Q=function(t){return t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t}(Q||{}),Bn=class t{constructor(e){this.operators=Pn(e)}static init(e){return new t(kn({[Q.ACCUMULATOR]:{},[Q.EXPRESSION]:{},[Q.PIPELINE]:{},[Q.PROJECTION]:{},[Q.QUERY]:{},[Q.WINDOW]:{}},e,{skipValidation:!0}))}static from(e){return new t(e.operators)}addOperators(e,i){for(let[n,r]of Object.entries(i))this.getOperator(e,n)||(this.operators[e][n]=r);return this}addAccumulatorOps(e){return this.addOperators(Q.ACCUMULATOR,e)}addExpressionOps(e){return this.addOperators(Q.EXPRESSION,e)}addQueryOps(e){return this.addOperators(Q.QUERY,e)}addPipelineOps(e){return this.addOperators(Q.PIPELINE,e)}addProjectionOps(e){return this.addOperators(Q.PROJECTION,e)}addWindowOps(e){return this.addOperators(Q.WINDOW,e)}getOperator(e,i){return e in this.operators&&this.operators[e][i]||null}},Hh=Bn.init({});function tc(t,e){for(let[i,n]of Object.entries(e)){v(Ja(n)&&Ue(i),`'${i}' is not a valid operator`);let r=He(t,i,null);v(!r||n===r,`${i} already exists for '${t}' operators. Cannot change operator function once registered.`)}Hh.addOperators(t,e)}function He(t,e,i){let{context:n,useGlobalContext:r}=i||{},o=n?n.getOperator(t,e):null;return!o&&r?Hh.getOperator(t,e):o}var Uh={$$ROOT(t,e,i){return i.root},$$CURRENT(t,e,i){return t},$$REMOVE(t,e,i){},$$NOW(t,e,i){return new Date(i.timestamp)}},Xa={$$KEEP(t,e,i){return t},$$PRUNE(t,e,i){},$$DESCEND(t,e,i){if(!ge(e,"$cond"))return t;let n;for(let[r,o]of Object.entries(t))if(Ni(o)){if(o instanceof Array){let s=[];for(let a of o)N(a)&&(a=ec(a,e,i.update(a))),D(a)||s.push(a);n=s}else n=ec(o,e,i.update(o));D(n)?delete t[r]:t[r]=n}return t}};function p(t,e,i,n){var r;let o=te.init(n,t);if(i=i||"",Ue(i)){let s=He(Q.EXPRESSION,i,n);if(s)return s(t,e,o);let a=He(Q.ACCUMULATOR,i,n);if(a)return t instanceof Array||(t=p(t,e,null,o),e=null),v(t instanceof Array,`'${i}' target must be an array.`),a(t,e,o.update(null,o.local));throw new Error(`operator '${i}' is not registered`)}if(L(e)&&e.length>0&&e[0]==="$"){if(ge(Xa,e))return e;let s=o.root,a=e.split(".");if(ge(Uh,a[0]))s=Uh[a[0]](t,null,o),e=e.slice(a[0].length+1);else if(a[0].slice(0,2)==="$$"){s=Object.assign({},o.variables,{this:t},(r=o.local)===null||r===void 0?void 0:r.variables);let u=a[0].slice(2);v(ge(s,u),`Use of undefined variable: ${u}`),e=e.slice(2)}else e=e.slice(1);return e===""?s:ut(s,e)}if(I(e))return e.map(s=>p(t,s,null,o));if(N(e)){let s={};for(let[a,u]of Object.entries(e))if(s[a]=p(t,u,a,o),[Q.EXPRESSION,Q.ACCUMULATOR].some(c=>!!He(c,a,n)))return v(Object.keys(e).length===1,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),s[a];return s}return e}function ec(t,e,i){let n=p(t,e,null,i);return ge(Xa,n)?Xa[n](t,e,i):n}function Me(t){return t instanceof $i?t:new $i(t)}function Do(...t){let e=0;return Me(()=>{for(;e<t.length;){let i=t[e].next();if(!i.done)return i;e++}return{done:!0}})}function n_(t){return!!t&&typeof t=="object"&&t?.next instanceof Function}function i_(t,e){let i=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,i)}var nc=new Error,dt=function(t){return t[t.MAP=0]="MAP",t[t.FILTER=1]="FILTER",t[t.TAKE=2]="TAKE",t[t.DROP=3]="DROP",t}(dt||{});function r_(t,e,i){let n=!1,r=-1,o=0;return function(s){try{e:for(;!n;){let a=t();r++;let u=-1,c=e.length,l=!1;for(;++u<c;){let d=e[u];switch(d.action){case dt.MAP:a=d.func(a,r);break;case dt.FILTER:if(!d.func(a,r))continue e;break;case dt.TAKE:--d.count,d.count||(l=!0);break;case dt.DROP:--d.count,d.count||i_(e,u);continue e;default:break e}}if(n=l,s)i[o++]=a;else return{value:a,done:!1}}}catch(a){if(a!==nc)throw a}return n=!0,{done:n}}}var $i=class{constructor(e){this.iteratees=[],this.yieldedValues=[],this.isDone=!1;let i;if(e instanceof Function&&(e={next:e}),n_(e)){let n=e;i=()=>{let r=n.next();if(r.done)throw nc;return r.value}}else if(e instanceof Array){let n=e,r=n.length,o=0;i=()=>{if(o<r)return n[o++];throw nc}}else if(!(e instanceof Function))throw new Error(`Source is of type '${typeof e}'. Must be Array, Function, or Generator`);this.getNext=r_(i,this.iteratees,this.yieldedValues)}push(e,i){return typeof i=="function"?this.iteratees.push({action:e,func:i}):typeof i=="number"&&this.iteratees.push({action:e,count:i}),this}next(){return this.getNext()}map(e){return this.push(dt.MAP,e)}filter(e){return this.push(dt.FILTER,e)}take(e){return e>0?this.push(dt.TAKE,e):this}drop(e){return e>0?this.push(dt.DROP,e):this}transform(e){let i=this,n;return Me(()=>(n||(n=Me(e(i.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){let i=this.next();if(i.done)break;if(e(i.value)===!1)return!1}return!0}reduce(e,i){let n=this.next();for(i===void 0&&!n.done&&(i=n.value,n=this.next());!n.done;)i=e(i,n.value),n=this.next();return i}size(){return this.reduce((e,i)=>++e,0)}[Symbol.iterator](){return this}};var Je=class{constructor(e,i){this.pipeline=e,this.options=$n(i)}stream(e){let i=Me(e),n=this.options.processingMode;(n==lt.CLONE_ALL||n==lt.CLONE_INPUT)&&i.map(Pn);let r=new Array;if(!xe(this.pipeline))for(let o of this.pipeline){let s=Object.keys(o),a=s[0],u=He(Q.PIPELINE,a,this.options);v(s.length===1&&!!u,`invalid pipeline operator ${a}`),r.push(a),i=u(i,o[a],this.options)}return(n==lt.CLONE_OUTPUT||n==lt.CLONE_ALL&&Qt([["$group","$unwind"],r]).length)&&i.map(Pn),i}run(e){return this.stream(e).value()}};var bo=class{constructor(e,i,n,r){this.source=e,this.predicate=i,this.projection=n,this.options=r,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result?this.result:(N(this.projection)&&this.operators.push({$project:this.projection}),this.result=Me(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new Je(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){let e=Me([...this.buffer]);return this.buffer=[],Do(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options=Object.assign(Object.assign({},this.options),{collation:e}),this}next(){if(this.buffer.length>0)return this.buffer.pop();let e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;let e=this.fetch().next();return e.done?!1:(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}};var Te=class{constructor(e,i){this.condition=e,this.options=$n(i),this.compiled=[],this.compile()}compile(){v(N(this.condition),"query criteria must be an object");let e={};for(let[i,n]of Object.entries(this.condition)){if(i==="$where")Object.assign(e,{field:i,expr:n});else if(Ye(["$and","$or","$nor","$expr","$jsonSchema"],i))this.processOperator(i,i,n);else{v(!Ue(i),`unknown top level operator: ${i}`);for(let[r,o]of Object.entries(yo(n)))this.processOperator(i,r,o)}e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,i,n){let r=He(Q.QUERY,i,this.options);if(!r)throw new Error(`unknown operator ${i}`);let o=r(e,n,this.options);this.compiled.push(o)}test(e){for(let i=0,n=this.compiled.length;i<n;i++)if(!this.compiled[i](e))return!1;return!0}find(e,i){return new bo(e,n=>this.test(n),i||{},this.options)}remove(e){return e.reduce((i,n)=>(this.test(n)||i.push(n),i),[])}};var Ln=1e3*60*60*24,zh={week:Ln*7,day:Ln,hour:1e3*60*60,minute:1e3*60,second:1e3,millisecond:1};var IO={week:Ln*7,day:Ln,hour:Ln/24,minute:6e4,second:1e3,millisecond:1};function z(t){let e=(i,n,r)=>{let o={unwrapArray:!0},s=Math.max(1,i.split(".").length-1);return a=>{let u=ut(a,i,o);return t(u,n,Object.assign(Object.assign({},r),{depth:s}))}};return e.op="query",e}function be(t){return(e,i,n)=>{let r=p(e,i,null,n);return t(...r)}}function Li(t,e,i){if(Ne(t,e)||D(t)&&D(e))return!0;if(t instanceof Array){let n=Ne.bind(null,e);return t.some(n)||Za(t,i?.depth).some(n)}return!1}function wo(t,e,i){return!Li(t,e,i)}function oc(t,e,i){return D(t)?e.some(n=>n===null):Qt([ct(t),e],i?.hashFunction).length>0}function Co(t,e,i){return!oc(t,e,i)}function Eo(t,e,i){return Mo(t,e,(n,r)=>se(n,r)<0)}function So(t,e,i){return Mo(t,e,(n,r)=>se(n,r)<=0)}function Oo(t,e,i){return Mo(t,e,(n,r)=>se(n,r)>0)}function xo(t,e,i){return Mo(t,e,(n,r)=>se(n,r)>=0)}function Qh(t,e,i){return ct(t).some(n=>e.length===2&&n%e[0]===e[1])}function Jh(t,e,i){let n=ct(t),r=o=>L(o)&&Qe(e.exec(o),i?.useStrictMode);return n.some(r)||Za(n,1).some(r)}function Zh(t,e,i){return(e===!1||e===0)&&t===void 0||(e===!0||e===1)&&t!==void 0}function Xh(t,e,i){if(!I(t)||!I(e)||!t.length||!e.length)return!1;let n=!0;for(let r of e){if(!n)break;N(r)&&Ye(Object.keys(r),"$elemMatch")?n=sc(t,r.$elemMatch,i):r instanceof RegExp?n=t.some(o=>typeof o=="string"&&r.test(o)):n=t.some(o=>Ne(r,o))}return n}function ef(t,e,i){return Array.isArray(t)&&t.length===e}function h_(t){return Ue(t)&&["$and","$or","$nor"].indexOf(t)===-1}function sc(t,e,i){if(I(t)&&!xe(t)){let n=s=>s,r=e;Object.keys(e).every(h_)&&(r={temp:e},n=s=>({temp:s}));let o=new Te(r,i);for(let s=0,a=t.length;s<a;s++)if(o.test(n(t[s])))return!0}return!1}var Wh=t=>t===null,qh=t=>V(t)&&t>=-2147483648&&t<=2147483647&&t.toString().indexOf(".")===-1,Kh=t=>V(t)&&t>=Qa&&t<=Ya&&t.toString().indexOf(".")===-1,f_={array:I,bool:Fi,boolean:Fi,date:ki,decimal:V,double:V,int:qh,long:Kh,number:V,null:Wh,object:N,regex:Pi,regexp:Pi,string:L,undefined:D,function:t=>{throw new Error("unsupported type key `function`.")},1:V,2:L,3:N,4:I,6:D,8:Fi,9:ki,10:Wh,11:Pi,16:qh,18:Kh,19:V};function Yh(t,e,i){let n=f_[e];return n?n(t):!1}function tf(t,e,i){return Array.isArray(e)?e.findIndex(n=>Yh(t,n,i))>=0:Yh(t,e,i)}function Mo(t,e,i){return ct(t).some(n=>Fe(n)===Fe(e)&&i(n,e))}var tT=be(Co);var uR=be(Li);var hR=be(Oo);var mR=be(xo);var _R=be(Eo);var bR=be(So);var ER=be(wo);var nf=(t,e)=>{let i={};return t.split("").forEach((n,r)=>i[n]=e*(r+1)),i},dI=Object.assign(Object.assign(Object.assign({},nf("ABCDEFGHIKLM",1)),nf("NOPQRSTUVWXY",-1)),{Z:0});var af={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Z(t,e=af){let i=Object.assign({},af,e),n=new Set(Object.keys(i));return(r,o,s)=>{let a=p(r,o,null,s);if(n.has(`${a}`)){let u=i[`${a}`];if(u instanceof Error)throw new Error(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return u}return t(a)}}var ak=Z(Math.acos,{Infinity:1/0,0:new Error});var lk=Z(Math.acosh,{Infinity:1/0,0:new Error});var fk=Z(Math.asin);var gk=Z(Math.asinh,{Infinity:1/0,"-Infinity":-1/0});var yk=Z(Math.atan);var Sk=Z(Math.atanh,{1:1/0,"-1":-1/0});var Mk=Z(Math.cos);var Ik=Z(Math.cosh,{"-Infinity":1/0,Infinity:1/0});var __=Math.PI/180,Nk=Z(t=>t*__,{Infinity:1/0,"-Infinity":1/0});var y_=180/Math.PI,Bk=Z(t=>t*y_,{Infinity:1/0,"-Infinity":-1/0});var Vk=Z(Math.sin);var Hk=Z(Math.sinh,{"-Infinity":-1/0,Infinity:1/0});var Wk=Z(Math.tan);var Ro=(t,e,i)=>{if(xe(e)||!N(e))return t;let n=se,r=i.collation;return N(r)&&L(r.locale)&&(n=C_(r)),t.transform(o=>{let s=Object.keys(e);for(let a of s.reverse()){let u=vo(o,l=>ut(l,a),i.hashFunction),c=Array.from(u.keys()).sort(n);e[a]===-1&&c.reverse(),o=[],c.reduce((l,d)=>De(l,u.get(d)),o)}return o})},w_={1:"base",2:"accent",3:"variant"};function C_(t){let e={sensitivity:w_[t.strength||3],caseFirst:t.caseFirst==="off"?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:t.alternate==="shifted"};(t.caseLevel||!1)===!0&&(e.sensitivity==="base"&&(e.sensitivity="case"),e.sensitivity==="accent"&&(e.sensitivity="variant"));let i=new Intl.Collator(t.locale,e);return(n,r)=>{if(!L(n)||!L(r))return se(n,r);let o=i.compare(n,r);return o<0?-1:o>0?1:0}}var uc=(t,e,i)=>{if(xe(e))return t;let n=Object.keys(e),r=!1;lf(e,i);let o=i.idKey;if(Ye(n,o)){let a=e[o];(a===0||a===!1)&&(n=n.filter(mo.bind(null,[o])),r=n.length==0)}else n.push(o);let s=te.init(i);return t.map(a=>cc(a,e,s.update(a),n,r))};function cc(t,e,i,n,r){let o={},s=!1,a=!1,u=[];r&&u.push(i.idKey);for(let c of n){let l,d=e[c];if(c!==i.idKey&&Ye([0,!1],d)&&(a=!0),c===i.idKey&&xe(d))l=t[c];else if(L(d))l=p(t,d,c,i);else if(!Ye([1,!0],d))if(d instanceof Array)l=d.map(f=>{let m=p(t,f,null,i);return D(m)?null:m});else if(N(d)){let f=d,m=Object.keys(d),b=m.length==1?m[0]:"",_=He(Q.PROJECTION,b,i);if(_)b==="$slice"?ct(f[b]).every(V)?(l=_(t,f[b],c,i),s=!0):l=p(t,f,c,i):l=_(t,f[b],c,i);else if(Ue(b))l=p(t,f[b],b,i);else if(ge(t,c)){lf(f,i);let y=t[c];y instanceof Array?l=y.map(x=>cc(x,f,i,m,!1)):(y=N(y)?y:t,l=cc(y,f,i,m,!1))}else l=p(t,d,null,i)}else{u.push(c);continue}let h=Nn(t,c,{preserveMissing:!0});h!==void 0&&kn(o,h,{flatten:!0}),mo([0,1,!1,!0],d)&&(l===void 0?Bi(o,c,{descendArray:!0}):_o(o,c,l))}if(ho(o),(s||a||r)&&(o=De({},t,o),u.length>0))for(let c of u)Bi(o,c,{descendArray:!0});return o}function lf(t,e){let i=[!1,!1];for(let[n,r]of Object.entries(t)){if(n===e?.idKey)return;r===0||r===!1?i[0]=!0:(r===1||r===!0)&&(i[1]=!0),v(!(i[0]&&i[1]),"Projection cannot have a mix of inclusion and exclusion.")}}var df=(t,e,i)=>{v(I(e),"Invalid expression: $and expects value to be an Array.");let n=e.map(r=>new Te(r,i));return r=>n.every(o=>o.test(r))};var Io=(t,e,i)=>{v(I(e),"Invalid expression. $or expects value to be an Array");let n=e.map(r=>new Te(r,i));return r=>n.some(o=>o.test(r))};var hf=(t,e,i)=>{v(I(e),"Invalid expression. $nor expects value to be an array.");let n=Io("$or",e,i);return r=>!n(r)};var ff=(t,e,i)=>{let n={};n[t]=yo(e);let r=new Te(n,i);return o=>!r.test(o)};var lc=z(Li);var dc=z(Oo);var hc=z(xo);var fc=z(oc);var pc=z(Eo);var mc=z(So);var gc=z(wo);var vc=z(Co);var pf=z(Qh);var mf=z(Jh);var EL=z(Xh);var gf=z(sc);var vf=z(ef);var _f=z(Zh);var yf=z(tf);var Df=!1;function bf(t){return Df||(tc(Q.PIPELINE,{$sort:Ro,$project:uc}),tc(Q.QUERY,{$and:df,$eq:lc,$elemMatch:gf,$exists:_f,$gt:dc,$gte:hc,$in:fc,$lt:pc,$lte:mc,$ne:gc,$nin:vc,$mod:pf,$nor:hf,$not:ff,$or:Io,$regex:mf,$size:vf,$type:yf}),Df=!0),new Te(t)}function Vi(t,e){var i=ye(t.primaryKey);e=Y(e),e.selector&&(e.selector=_c(e.selector));var n=Ve(e);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([c,l])=>{(typeof l!="object"||l===null)&&(n.selector[c]={$eq:l})})):n.selector={},n.index){var r=Hr(n.index);r.includes(i)||r.push(i),n.index=r}if(n.sort){var u=n.sort.find(c=>Id(c)===i);u||(n.sort=n.sort.slice(0),n.sort.push({[i]:"asc"}))}else if(n.index)n.sort=n.index.map(c=>({[c]:"asc"}));else{if(t.indexes){var o=new Set;Object.entries(n.selector).forEach(([c,l])=>{var d=!1;typeof l=="object"&&l!==null?d=!!Object.keys(l).find(h=>lo.has(h)):d=!0,d&&o.add(c)});var s=-1,a;t.indexes.forEach(c=>{var l=wn(c)?c:[c],d=l.findIndex(h=>!o.has(h));d>0&&d>s&&(s=d,a=l)}),a&&(n.sort=a.map(c=>({[c]:"asc"})))}n.sort||(n.sort=[{[i]:"asc"}])}return n}function _c(t){if(typeof t!="object"||t===null)return t;var e=Object.keys(t),i={};return e.forEach(n=>{var r=t[n];if(n==="$regex"&&r instanceof RegExp){var o=Nd(r);i.$regex=o.pattern,i.$options=o.flags}else Array.isArray(r)?i[n]=r.map(s=>_c(s)):i[n]=_c(r)}),i}function Ao(t,e){if(!e.sort)throw E("SNH",{query:e});var i=[];e.sort.forEach(r=>{var o=Object.keys(r)[0],s=Object.values(r)[0];i.push({key:o,direction:s,getValueFn:Yr(o)})});var n=(r,o)=>{for(var s=0;s<i.length;++s){var a=i[s],u=a.getValueFn(r),c=a.getValueFn(o);if(u!==c){var l=a.direction==="asc"?se(u,c):se(c,u);return l}}};return n}function Vn(t,e){if(!e.sort)throw E("SNH",{query:e});var i=bf(e.selector),n=r=>{if(r._deleted)return!1;var o=i.find([r]),s=o.next();return!!s};return n}function S_(t,e){return!e.sort||e.sort.length===0?[t]:e.sort.map(i=>Object.keys(i)[0])}var O_=new WeakMap;function x_(t){return je(O_,t,()=>{var e=t.collection,i=Vi(e.storageInstance.schema,Ve(t.mangoQuery)),n=e.schema.primaryPath,r=Ao(e.schema.jsonSchema,i),o=(c,l)=>{var d={docA:c,docB:l,rxQuery:t};return r(d.docA,d.docB)},s=Vn(e.schema.jsonSchema,i),a=c=>{var l={doc:c,rxQuery:t};return s(l.doc)},u={primaryKey:t.collection.schema.primaryPath,skip:i.skip,limit:i.limit,sortFields:S_(n,i),sortComparator:o,queryMatcher:a};return u})}function wf(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var i=x_(t),n=B(t._result).docsData.slice(0),r=B(t._result).docsDataMap,o=!1,s=e.map(u=>Bd(u)).filter(Dd),a=s.find(u=>{var c={queryParams:i,changeEvent:u,previousResults:n,keyDocumentMap:r},l=Fh(c);if(l==="runFullQueryAgain")return!0;if(l!=="doNothing")return o=!0,Nh(l,i,u,n,r),!1});return a?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:n}}var M_=function(){function t(){this._map=new Map}var e=t.prototype;return e.getByQuery=function(n){var r=n.toString();return je(this._map,r,()=>n)},t}();function Ef(){return new M_}function Cf(t,e){e.uncached=!0;var i=e.toString();t._map.delete(i)}function T_(t){return t.refCount$.observers.length}var R_=100,I_=30*1e3,A_=(t,e)=>(i,n)=>{if(!(n._map.size<t)){var r=re()-e,o=[],s=Array.from(n._map.values());for(var a of s)if(!(T_(a)>0)){if(a._lastEnsureEqual===0&&a._creationTime<r){Cf(n,a);continue}o.push(a)}var u=o.length-t;if(!(u<=0)){var c=o.sort((d,h)=>d._lastEnsureEqual-h._lastEnsureEqual),l=c.slice(0,u);l.forEach(d=>Cf(n,d))}}},Dc=A_(R_,I_),yc=new WeakSet;function Sf(t){yc.has(t)||(yc.add(t),Od().then(()=>Td(200)).then(()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),yc.delete(t)}))}var F_=0,N_=function(){return++F_},bc=function(){function t(i,n,r,o={}){this.id=N_(),this._execOverDatabaseCount=0,this._creationTime=re(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new J(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Le,this.op=i,this.mangoQuery=n,this.collection=r,this.other=o,n||(this.mangoQuery=Jt()),this.isFindOneByIdQuery=B_(this.collection.schema.primaryPath,n)}var e=t.prototype;return e._setResultData=function(n){if(typeof n=="number"){this._result={docsData:[],docsMap:new Map,docsDataMap:new Map,count:n,docs:[],time:re()};return}else n instanceof Map&&(n=Array.from(n.values()));var r=new Map,o=new Map,s=n.map(u=>this.collection._docCache.getCachedRxDocument(u)),a=s.map(u=>(r.set(u.primary,u._data),o.set(u.primary,u),u._data));this._result={docsData:a,docsMap:o,docsDataMap:r,count:a.length,docs:s,time:re()}},e._execOverDatabase=function(){return S(this,null,function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=re(),this.op==="count"){var n=this.getPreparedQuery(),r=yield this.collection.storageInstance.count(n);if(r.mode==="slow"&&!this.collection.database.allowSlowCount)throw E("QU14",{collection:this.collection,queryObj:this.mangoQuery});return r.count}if(this.op==="findByIds"){var o=B(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,s=new Map,a=[];if(o.forEach(l=>{var d=this.collection._docCache.getLatestDocumentDataIfExists(l);if(d){if(!d._deleted){var h=this.collection._docCache.getCachedRxDocument(d);s.set(l,h)}}else a.push(l)}),a.length>0){var u=yield this.collection.storageInstance.findDocumentsById(a,!1);Object.values(u).forEach(l=>{var d=this.collection._docCache.getCachedRxDocument(l);s.set(d.primary,d)})}return s}var c=wc(this);return c.then(l=>(this._lastExecEnd=re(),l))})},e.exec=function(n){if(n&&this.op!=="findOne")throw E("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Of(this).then(()=>zc(this.$)).then(r=>{if(!r&&n)throw E("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return r})},e.toString=function(){var n=On({op:this.op,query:this.mangoQuery,other:this.other},!0),r=JSON.stringify(n,Ad);return this.toString=()=>r,r},e.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:Vi(this.collection.schema.jsonSchema,this.mangoQuery)};le("prePrepareQuery",n);var r=this.collection.database.storage.statics.prepareQuery(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>r,r},e.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},e.remove=function(){return this.exec().then(n=>Array.isArray(n)?Promise.all(n.map(r=>r.remove())):n.remove())},e.update=function(n){throw K("update")},e.where=function(n){throw K("query-builder")},e.sort=function(n){throw K("query-builder")},e.skip=function(n){throw K("query-builder")},e.limit=function(n){throw K("query-builder")},Ie(t,[{key:"$",get:function(){if(!this._$){var i=this.collection.$.pipe(q(n=>!n.isLocal),Ft(null),ae(()=>Of(this)),R(()=>this._result),Ji(Qr),en((n,r)=>!!(n&&n.time===B(r).time)),q(n=>!!n),R(n=>{var r=B(n);return this.op==="count"?r.count:this.op==="findOne"?r.docs.length===0?null:r.docs[0]:this.op==="findByIds"?r.docsMap:r.docs.slice(0)}));this._$=Gn(i,this.refCount$.pipe(q(()=>!1)))}return this._$}},{key:"queryMatcher",get:function(){var i=this.collection.schema.jsonSchema,n=Vi(this.collection.schema.jsonSchema,this.mangoQuery);return xn(this,"queryMatcher",Vn(i,n))}},{key:"asRxQuery",get:function(){return this}}]),t}();function Jt(){return{selector:{}}}function k_(t){return t.collection._queryCache.getByQuery(t)}function xt(t,e,i,n){le("preCreateRxQuery",{op:t,queryObj:e,collection:i,other:n});var r=new bc(t,e,i,n);return r=k_(r),Sf(i),r}function xf(t){var e=t.asRxQuery.collection._changeEventBuffer.counter;return t._latestChangeEvent>=e}function Of(t){return t.collection.database.destroyed||xf(t)?Le:(t._ensureEqualQueue=t._ensureEqualQueue.then(()=>P_(t)),t._ensureEqualQueue)}function P_(t){if(t._lastEnsureEqual=re(),t.collection.database.destroyed||xf(t))return Le;var e=!1,i=!1;if(t._latestChangeEvent===-1&&(i=!0),!i){var n=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(n===null)i=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.counter;var r=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(t.op==="count"){var o=B(t._result).count,s=o;r.forEach(c=>{var l=c.previousDocumentData&&t.doesDocumentDataMatch(c.previousDocumentData),d=t.doesDocumentDataMatch(c.documentData);!l&&d&&s++,l&&!d&&s--}),s!==o&&(e=!0,t._setResultData(s))}else{var a=wf(t,r);a.runFullQueryAgain?i=!0:a.changed&&(e=!0,t._setResultData(a.newResults))}}}if(i){var u=t.collection._changeEventBuffer.counter;return t._execOverDatabase().then(c=>(t._latestChangeEvent=u,typeof c=="number"?((!t._result||c!==t._result.count)&&(e=!0,t._setResultData(c)),e):((!t._result||!Cd(t.collection.schema.primaryPath,c,t._result.docsData))&&(e=!0,t._setResultData(c)),e)))}return Promise.resolve(e)}function wc(t){return S(this,null,function*(){var e=[],i=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var n=t.isFindOneByIdQuery;if(n=n.filter(l=>{var d=t.collection._docCache.getLatestDocumentDataIfExists(l);return d?(d._deleted||e.push(d),!1):!0}),n.length>0){var r=yield i.storageInstance.findDocumentsById(n,!1);Object.values(r).forEach(l=>{e.push(l)})}}else{var o=t.isFindOneByIdQuery,s=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!s){var a=yield i.storageInstance.findDocumentsById([o],!1);a.hasOwnProperty(o)&&(s=a[o])}s&&!s._deleted&&e.push(s)}else{var u=t.getPreparedQuery(),c=yield i.storageInstance.query(u);e=c.documents}return e})}function B_(t,e){if(!e.skip&&e.selector&&Object.keys(e.selector).length===1&&e.selector[t]){var i=e.selector[t];if(typeof i=="string")return i;if(Object.keys(i).length===1&&typeof i.$eq=="string"||Object.keys(i).length===1&&Array.isArray(i.$eq)&&!i.$eq.find(n=>typeof n!="string"))return i.$eq}return!1}var jn="collection",Cc="storage-token",$_="RxInternalDocument",No=eo({version:0,title:$_,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[jn,Cc,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function ko(t,e){return Ti(No,{key:t,context:e})}function Po(t,e){return S(this,null,function*(){var i=t.prepareQuery(e.schema,{selector:{context:jn},sort:[{id:"asc"}],skip:0}),n=yield e.query(i),r=n.documents;return r})}var Mf="storageToken",Fo=ko(Mf,Cc);function Tf(t){return S(this,null,function*(){var e=Kt(10),i=t.password?t.hashFunction(JSON.stringify(t.password)):void 0,n={id:Fo,context:Cc,key:Mf,data:{token:e,instanceToken:t.token,passwordHash:i},_deleted:!1,_meta:wt(),_rev:$e(),_attachments:{}},r=yield t.internalStore.bulkWrite([{document:n}],"internal-add-storage-token");if(r.success[Fo])return r.success[Fo];var o=B(r.error[Fo]);if(o.isError&&o.status===409){var s=o;if(i&&i!==s.documentInDb.data.passwordHash)throw E("DB1",{passwordHash:i,existingPasswordHash:s.documentInDb.data.passwordHash});var a=s.documentInDb;return B(a)}throw o})}function Ec(t,e){return t+"-"+e.version}function Bo(t,e){return e=Y(e),e=Ld(t,e),e=Xr(t.primaryPath,t.jsonSchema,e),e._meta=wt(),e.hasOwnProperty("_deleted")||(e._deleted=!1),e.hasOwnProperty("_attachments")||(e._attachments={}),e.hasOwnProperty("_rev")||(e._rev=$e()),e}function Rf(t,e){return S(this,null,function*(){e.multiInstance=t.multiInstance;var i=yield t.storage.createStorageInstance(e);return i})}function $o(t,e,i,n,r,o){return S(this,null,function*(){var s=yield Po(t.statics,e),a=s.filter(d=>d.data.name===r),u=[];a.forEach(d=>{u.push({collectionName:d.data.name,schema:d.data.schema,isCollection:!0}),d.data.connectedStorages.forEach(h=>u.push({collectionName:h.collectionName,isCollection:!1,schema:h.schema}))});var c=new Set;if(u=u.filter(d=>{var h=d.collectionName+"||"+d.schema.version;return c.has(h)?!1:(c.add(h),!0)}),yield Promise.all(u.map(d=>S(this,null,function*(){var h=yield t.createStorageInstance({collectionName:d.collectionName,databaseInstanceToken:i,databaseName:n,multiInstance:!1,options:{},schema:d.schema,devMode:G.isDevMode()});yield h.remove(),d.isCollection&&(yield Et("postRemoveRxCollection",{storage:t,databaseName:n,collectionName:r}))}))),o){var l=a.map(d=>{var h=to(d);return h._deleted=!0,h._meta.lwt=re(),h._rev=Cn(i,d),{previous:d,document:h}});yield e.bulkWrite(l,"rx-database-remove-collection-all")}})}var If=function(){function t(i,n,r){this.cacheItemByDocId=new Map,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var s=o.docId,a=this.cacheItemByDocId.get(s);a&&(a.documentByRevisionHeight.delete(o.revisionHeight),a.documentByRevisionHeight.size===0&&this.cacheItemByDocId.delete(s))}):void 0,this.primaryPath=i,this.changes$=n,this.documentCreator=r,n.subscribe(o=>{var s=o.documentId,a=this.cacheItemByDocId.get(s);if(a){var u=Zr(o);a.latestDoc=u}})}var e=t.prototype;return e.getCachedRxDocument=function(n){var r=n[this.primaryPath],o=bd(n._rev),s=je(this.cacheItemByDocId,r,()=>L_(n)),a=s.documentByRevisionHeight.get(o),u=a?a.deref():void 0;return u||(n=G.deepFreezeWhenDevMode(n),u=this.documentCreator(n),s.documentByRevisionHeight.set(o,j_(u)),this.registry&&this.registry.register(u,{docId:r,revisionHeight:o})),u},e.getLatestDocumentData=function(n){var r=Ke(this.cacheItemByDocId,n);return r.latestDoc},e.getLatestDocumentDataIfExists=function(n){var r=this.cacheItemByDocId.get(n);if(r)return r.latestDoc},t}();function L_(t){return{documentByRevisionHeight:new Map,latestDoc:t}}var V_=typeof WeakRef=="function";function j_(t){return V_?new WeakRef(t):{deref(){return t}}}var U_=function(){function t(i){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=i,this.subs.push(this.collection.$.pipe(q(n=>!n.isLocal)).subscribe(n=>this._handleChangeEvent(n)))}var e=t.prototype;return e._handleChangeEvent=function(n){for(this.counter++,this.buffer.push(n),this.eventCounterMap.set(n,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},e.getArrayIndexByPointer=function(n){var r=this.buffer[0],o=this.eventCounterMap.get(r);if(n<o)return null;var s=n-o;return s},e.getFrom=function(n){var r=[],o=this.getArrayIndexByPointer(n);if(o===null)return null;for(;;){var s=this.buffer[o];if(o++,s)r.push(s);else return r}},e.runFrom=function(n,r){var o=this.getFrom(n);if(o===null)throw new Error("out of bounds");o.forEach(s=>r(s))},e.reduceByLastOfDoc=function(n){return n.slice(0);var r},e.destroy=function(){this.subs.forEach(n=>n.unsubscribe())},t}();function Af(t){return new U_(t)}var H_=new WeakMap;function G_(t){var e=t.schema.getDocumentPrototype(),i=W_(t),n=Ai,r={};return[e,i,n].forEach(o=>{var s=Object.getOwnPropertyNames(o);s.forEach(a=>{var u=Object.getOwnPropertyDescriptor(o,a),c=!0;(a.startsWith("_")||a.endsWith("_")||a.startsWith("$")||a.endsWith("$"))&&(c=!1),typeof u.value=="function"?Object.defineProperty(r,a,{get(){return u.value.bind(this)},enumerable:c,configurable:!1}):(u.enumerable=c,u.configurable=!1,u.writable&&(u.writable=!1),Object.defineProperty(r,a,u))})}),r}function z_(t){return je(H_,t,()=>Yd(G_(t)))}function Ff(t,e){var i=Qd(z_(t),t,G.deepFreezeWhenDevMode(e));return t._runHooksSync("post","create",e,i),le("postCreateRxDocument",i),i}function W_(t){var e={};return Object.entries(t.methods).forEach(([i,n])=>{e[i]=n}),e}var Sc=function(t,e){return En(t.newDocumentState,t.realMasterState)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};var kf=["pre","post"],Pf=["insert","save","remove","create"],Nf=!1,Oc=function(){function t(i,n,r,o,s={},a={},u={},c={},l={},d=Dc,h={},f=Sc){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Ef(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=i,this.name=n,this.schema=r,this.internalStorageInstance=o,this.instanceCreationOptions=s,this.migrationStrategies=a,this.methods=u,this.attachments=c,this.options=l,this.cacheReplacementPolicy=d,this.statics=h,this.conflictHandler=f,q_(this.asRxCollection)}var e=t.prototype;return e.prepare=function(){return S(this,null,function*(){this.storageInstance=no(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new Kd(this.storageInstance,this.schema.primaryPath,(s,a)=>La(this,s,a),s=>this._runHooks("post","save",s));var n=this.database.eventBulks$.pipe(q(s=>s.collectionName===this.name));this.$=n.pipe(ae(s=>s.events)),this.checkpoint$=n.pipe(R(s=>s.checkpoint)),this._changeEventBuffer=Af(this.asRxCollection),this._docCache=new If(this.schema.primaryPath,this.$.pipe(q(s=>!s.isLocal)),s=>Ff(this.asRxCollection,s));var r=yield this.database.storageToken,o=this.storageInstance.changeStream().subscribe(s=>{var a={id:s.id,internal:!1,collectionName:this.name,storageToken:r,events:s.events.map(u=>zd(!1,u,this)),databaseToken:this.database.token,checkpoint:s.checkpoint,context:s.context};this.database.$emit(a)});return this._subs.push(o),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(s=>{this.conflictHandler(s.input,s.context).then(a=>{this.storageInstance.resolveConflictResultionTask({id:s.id,output:a})})})),st})},e.migrationNeeded=function(){throw K("migration")},e.getDataMigrator=function(){throw K("migration")},e.migrate=function(n=10){return this.getDataMigrator().migrate(n)},e.migratePromise=function(n=10){return this.getDataMigrator().migratePromise(n)},e.insert=function(n){return S(this,null,function*(){var r=yield this.bulkInsert([n]),o=r.error[0];Ii(this,n[this.schema.primaryPath],n,o);var s=B(r.success[0]);return s})},e.bulkInsert=function(n){return S(this,null,function*(){if(n.length===0)return{success:[],error:[]};var r=this.schema.primaryPath,o=n.map(d=>{var h=Bo(this.schema,d);return h}),s=this.hasHooks("pre","insert")?yield Promise.all(o.map(d=>this._runHooks("pre","insert",d).then(()=>d))):o,a=new Map,u=s.map(d=>{a.set(d[r],d);var h={document:d};return h}),c=yield this.storageInstance.bulkWrite(u,"rx-collection-bulk-insert"),l=Object.values(c.success).map(d=>this._docCache.getCachedRxDocument(d));return this.hasHooks("post","insert")&&(yield Promise.all(l.map(d=>this._runHooks("post","insert",a.get(d.primary),d)))),{success:l,error:Object.values(c.error)}})},e.bulkRemove=function(n){return S(this,null,function*(){if(n.length===0)return{success:[],error:[]};var r=yield this.findByIds(n).exec(),o=[],s=new Map;Array.from(r.values()).forEach(d=>{var h=d.toMutableJSON(!0);o.push(h),s.set(d.primary,h)}),yield Promise.all(o.map(d=>{var h=d[this.schema.primaryPath];return this._runHooks("pre","remove",d,r.get(h))}));var a=o.map(d=>{var h=Y(d);return h._deleted=!0,{previous:d,document:h}}),u=yield this.storageInstance.bulkWrite(a,"rx-collection-bulk-remove"),c=Object.keys(u.success);yield Promise.all(c.map(d=>this._runHooks("post","remove",s.get(d),r.get(d))));var l=c.map(d=>Ke(r,d));return{success:l,error:Object.values(u.error)}})},e.bulkUpsert=function(n){return S(this,null,function*(){var r=[],o=new Map;n.forEach(c=>{var l=Bo(this.schema,c),d=l[this.schema.primaryPath];if(!d)throw E("COL3",{primaryPath:this.schema.primaryPath,data:l,schema:this.schema.jsonSchema});o.set(d,l),r.push(l)});var s=yield this.bulkInsert(r),a=s.success.slice(0),u=yield Promise.all(s.error.map(c=>S(this,null,function*(){if(c.status!==409)throw E("VD2",{collection:this.name,writeError:c});var l=c.documentId,d=Ke(o,l),h=B(c.documentInDb),f=this._docCache.getCachedRxDocument(h),m=yield f.incrementalModify(()=>d);return m})));return zr(a,u),a})},e.upsert=function(n){return this.bulkUpsert([n]).then(r=>r[0])},e.incrementalUpsert=function(n){var r=Bo(this.schema,n),o=r[this.schema.primaryPath];if(!o)throw E("COL4",{data:n});var s=this._incrementalUpsertQueues.get(o);return s||(s=st),s=s.then(()=>Y_(this,o,r)).then(a=>a.inserted?a.doc:K_(a.doc,r)),this._incrementalUpsertQueues.set(o,s),s},e.find=function(n){if(typeof n=="string")throw E("COL5",{queryObj:n});n||(n=Jt());var r=xt("find",n,this);return r},e.findOne=function(n){var r;if(typeof n=="string")r=xt("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=Jt()),n.limit)throw E("QU6");n.limit=1,r=xt("findOne",n,this)}if(typeof n=="number"||Array.isArray(n))throw Rn("COL6",{queryObj:n});return r},e.count=function(n){n||(n=Jt());var r=xt("count",n,this);return r},e.findByIds=function(n){var r={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},o=xt("findByIds",r,this);return o},e.exportJSON=function(){throw K("json-dump")},e.importJSON=function(n){throw K("json-dump")},e.insertCRDT=function(n){throw K("crdt")},e.addHook=function(n,r,o,s=!1){if(typeof o!="function")throw Rn("COL7",{key:r,when:n});if(!kf.includes(n))throw Rn("COL8",{key:r,when:n});if(!Pf.includes(r))throw E("COL9",{key:r});if(n==="post"&&r==="create"&&s===!0)throw E("COL10",{when:n,key:r,parallel:s});var a=o.bind(this),u=s?"parallel":"series";this.hooks[r]=this.hooks[r]||{},this.hooks[r][n]=this.hooks[r][n]||{series:[],parallel:[]},this.hooks[r][n][u].push(a)},e.getHooks=function(n,r){return!this.hooks[r]||!this.hooks[r][n]?{series:[],parallel:[]}:this.hooks[r][n]},e.hasHooks=function(n,r){var o=this.getHooks(n,r);return o?o.series.length>0||o.parallel.length>0:!1},e._runHooks=function(n,r,o,s){var a=this.getHooks(n,r);if(!a)return st;var u=a.series.map(c=>()=>c(o,s));return Rd(u).then(()=>Promise.all(a.parallel.map(c=>c(o,s))))},e._runHooksSync=function(n,r,o,s){var a=this.getHooks(n,r);a&&a.series.forEach(u=>u(o,s))},e.promiseWait=function(n){var r=new Promise(o=>{var s=setTimeout(()=>{this.timeouts.delete(s),o()},n);this.timeouts.add(s)});return r},e.destroy=function(){return this.destroyed?Le:(this.destroyed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],Et("postDestroyRxCollection",this).then(()=>!0))))},e.remove=function(){return S(this,null,function*(){yield this.destroy(),yield $o(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.hashFunction)})},Ie(t,[{key:"insert$",get:function(){return this.$.pipe(q(i=>i.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(q(i=>i.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(q(i=>i.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}]),t}();function q_(t){if(!Nf){Nf=!0;var e=Object.getPrototypeOf(t);Pf.forEach(i=>{kf.map(n=>{var r=n+qr(i);e[r]=function(o,s){return this.addHook(n,i,o,s)}})})}}function K_(t,e){return t.incrementalModify(i=>e)}function Y_(t,e,i){var n=t._docCache.getLatestDocumentDataIfExists(e);return n?Promise.resolve({doc:t._docCache.getCachedRxDocument(n),inserted:!1}):t.findOne(e).exec().then(r=>r?{doc:r,inserted:!1}:t.insert(i).then(o=>({doc:o,inserted:!0})))}function Bf({database:t,name:e,schema:i,instanceCreationOptions:n={},migrationStrategies:r={},autoMigrate:o=!0,statics:s={},methods:a={},attachments:u={},options:c={},localDocuments:l=!1,cacheReplacementPolicy:d=Dc,conflictHandler:h=Sc}){var f={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:i.jsonSchema,options:n,multiInstance:t.multiInstance,password:t.password,devMode:G.isDevMode()};return le("preCreateRxStorageInstance",f),Rf(t,f).then(m=>{var b=new Oc(t,e,i,m,n,r,a,u,c,d,s,h);return b.prepare().then(()=>{Object.entries(s).forEach(([y,x])=>{Object.defineProperty(b,y,{get:()=>x.bind(b)})});var _=st;return o&&b.schema.version!==0&&(_=b.migratePromise()),_}).then(()=>(le("createRxCollection",{collection:b,creator:{name:e,schema:i,storageInstance:m,instanceCreationOptions:n,migrationStrategies:r,methods:a,attachments:u,options:c,cacheReplacementPolicy:d,localDocuments:l,statics:s}}),b)).catch(_=>m.close().then(()=>Promise.reject(_)))})}var Tc=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Tc.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Mc(this)},wrapCall:function(e){var i=this;this.lock();var n;try{n=e()}catch(r){throw this.unlock(),r}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(r){return i.unlock(),r}).catch(function(r){throw i.unlock(),r})},requestIdlePromise:function(e){var i=this;e=e||{};var n,r=new Promise(function(a){return n=a}),o=function(){xc(i,r),n()};if(r._manRes=o,e.timeout){var s=setTimeout(function(){r._manRes()},e.timeout);r._timeoutObj=s}return this._iC.add(r),Mc(this),r},cancelIdlePromise:function(e){xc(this,e)},requestIdleCallback:function(e,i){var n=this._lHN++,r=this.requestIdlePromise(i);return this._hPM.set(n,r),this._pHM.set(r,n),r.then(function(){return e()}),n},cancelIdleCallback:function(e){var i=this._hPM.get(e);this.cancelIdlePromise(i)},clear:function(){var e=this;this._iC.forEach(function(i){return xc(e,i)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function Q_(t){if(t._iC.size!==0){var e=t._iC.values(),i=e.next().value;i._manRes(),setTimeout(function(){return Mc(t)},0)}}function xc(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var i=t._pHM.get(e);t._hPM.delete(i),t._pHM.delete(e)}t._iC.delete(e)}}function Mc(t){t._tryIR||t._iC.size===0||(t._tryIR=!0,setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}setTimeout(function(){if(!t.isIdle()){t._tryIR=!1;return}Q_(t),t._tryIR=!1},0)},0))}var $f=function(){function t(e){this.ttl=e,this.map=new Map,this._to=!1}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.add=function(e){var i=this;this.map.set(e,Lf()),this._to||(this._to=!0,setTimeout(function(){i._to=!1,J_(i)},0))},t.prototype.clear=function(){this.map.clear()},t}();function J_(t){for(var e=Lf()-t.ttl,i=t.map[Symbol.iterator]();;){var n=i.next().value;if(!n)return;var r=n[0],o=n[1];if(o<e)t.map.delete(r);else return}}function Lf(){return new Date().getTime()}var Lo=new Set,Vf=0,Rc=function(){function t(i,n,r,o,s,a,u=!1,c={},l,d,h,f){this.idleQueue=new Tc,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new ee,this.observable$=this.eventBulks$.pipe(ae(m=>m.events)),this.storageToken=Le,this.storageTokenDocument=Le,this.emittedEventBulkIds=new $f(60*1e3),this.name=i,this.token=n,this.storage=r,this.instanceCreationOptions=o,this.password=s,this.multiInstance=a,this.eventReduce=u,this.options=c,this.internalStore=l,this.hashFunction=d,this.cleanupPolicy=h,this.allowSlowCount=f,Vf++,this.name!=="pseudoInstance"&&(this.internalStore=no(this.asRxDatabase,l,No),this.storageTokenDocument=Tf(this.asRxDatabase).catch(m=>this.startupErrors.push(m)),this.storageToken=this.storageTokenDocument.then(m=>m.data.token).catch(m=>this.startupErrors.push(m)))}var e=t.prototype;return e.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},e.removeCollectionDoc=function(n,r){return S(this,null,function*(){var o=yield Gd(this.internalStore,ko(Ec(n,r),jn));if(!o)throw E("SNH",{name:n,schema:r});var s=to(o);s._deleted=!0,yield this.internalStore.bulkWrite([{document:s,previous:o}],"rx-database-remove-collection")})},e.addCollections=function(n){return S(this,null,function*(){var r={},o={},s=[],a={};Object.entries(n).forEach(([l,d])=>{var h=l,f=d.schema;r[h]=f;var m=Jd(f,this.hashFunction);if(o[h]=m,this.collections[l])throw E("DB3",{name:l});var b=Ec(l,f),_={id:ko(b,jn),key:b,context:jn,data:{name:h,schemaHash:m.hash,schema:m.jsonSchema,version:m.version,connectedStorages:[]},_deleted:!1,_meta:wt(),_rev:$e(),_attachments:{}};s.push({document:_});var y=Object.assign({},d,{name:h,schema:m,database:this}),x=Y(d);x.database=this,x.name=l,le("preCreateRxCollection",x),y.conflictHandler=x.conflictHandler,a[h]=y});var u=yield this.internalStore.bulkWrite(s,"rx-database-add-collection");yield ey(this),Object.entries(u.error).forEach(([l,d])=>{if(d.status!==409)throw E("DB12",{database:this.name,writeError:d});var h=B(d.documentInDb),f=h.data.name,m=o[f];if(h.data.schemaHash!==m.hash)throw E("DB6",{database:this.name,collection:f,previousSchemaHash:h.data.schemaHash,schemaHash:m.hash,previousSchema:h.data.schema,schema:B(r[f])})});var c={};return yield Promise.all(Object.keys(n).map(l=>S(this,null,function*(){var d=a[l],h=yield Bf(d);c[l]=h,this.collections[l]=h,this[l]||Object.defineProperty(this,l,{get:()=>this.collections[l]})}))),c})},e.lockedRun=function(n){return this.idleQueue.wrapCall(n)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(n){throw K("json-dump")},e.importJSON=function(n){throw K("json-dump")},e.backup=function(n){throw K("backup")},e.leaderElector=function(){throw K("leader-election")},e.isLeader=function(){throw K("leader-election")},e.waitForLeadership=function(){throw K("leader-election")},e.migrationStates=function(){throw K("migration")},e.destroy=function(){return S(this,null,function*(){return this.destroyed?Le:(this.destroyed=!0,yield Et("preDestroyRxDatabase",this),this.eventBulks$.complete(),Vf--,this._subs.map(n=>n.unsubscribe()),this.name==="pseudoInstance"?Le:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>Promise.all(Object.keys(this.collections).map(n=>this.collections[n]).map(n=>n.destroy()))).then(()=>this.internalStore.close()).then(()=>Lo.delete(this.name)).then(()=>!0))})},e.remove=function(){return this.destroy().then(()=>X_(this.name,this.storage))},Ie(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),t}();function Z_(t){if(Lo.has(t))throw E("DB8",{name:t,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}function jf(t,e,i,n,r,o){return S(this,null,function*(){var s=yield e.createStorageInstance({databaseInstanceToken:t,databaseName:i,collectionName:Hd,schema:No,options:n,multiInstance:r,password:o,devMode:G.isDevMode()});return s})}function Uf({storage:t,instanceCreationOptions:e,name:i,password:n,multiInstance:r=!0,eventReduce:o=!1,ignoreDuplicate:s=!1,options:a={},cleanupPolicy:u,allowSlowCount:c=!1,localDocuments:l=!1,hashFunction:d=qt}){le("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:i,password:n,multiInstance:r,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:l}),s||Z_(i),Lo.add(i);var h=Kt(10);return jf(h,t,i,e,r,n).catch(f=>{throw Lo.delete(i),f}).then(f=>{var m=new Rc(i,h,t,e,n,r,o,a,f,d,u,c);return Et("createRxDatabase",{database:m,creator:{storage:t,instanceCreationOptions:e,name:i,password:n,multiInstance:r,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:l}}).then(()=>m)})}function X_(t,e){return S(this,null,function*(){var i=Kt(10),n=yield jf(i,e,t,{},!1),r=yield Po(e.statics,n),o=new Set;r.forEach(a=>o.add(a.data.name));var s=Array.from(o);return yield Promise.all(s.map(a=>$o(e,n,i,t,a))),yield Et("postRemoveRxDatabase",{databaseName:t,storage:e}),yield n.remove(),s})}function ey(t){return S(this,null,function*(){if(yield t.storageToken,t.startupErrors[0])throw t.startupErrors[0]})}var ty={RxSchema:Va.prototype,RxDocument:Ai,RxQuery:bc.prototype,RxCollection:Oc.prototype,RxDatabase:Rc.prototype},Ic=new Set,Hf=new Set;function Ac(t){if(le("preAddRxPlugin",{plugin:t,plugins:Ic}),!Ic.has(t)){{if(Hf.has(t.name))throw E("PL3",{name:t.name,plugin:t});Ic.add(t),Hf.add(t.name)}if(!t.rxdb)throw Rn("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach(([e,i])=>i(ty[e])),t.overwritable&&Object.assign(G,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach(([e,i])=>{i.after&&In[e].push(i.after),i.before&&In[e].unshift(i.before)})}}var Gf={prepareQuery(t,e){if(!e.sort)throw E("SNH",{query:e});var i=Ph(t,e);return{query:e,queryPlan:i}},checkpointSchema:Vd};function ny(t,e){var i=e.map(n=>{var r=St(t,n);if(!r)throw new Error("not in schema: "+n);var o=r.type,s;(o==="number"||o==="integer")&&(s=Nc(r));var a=Yr(n),u=r.maxLength?r.maxLength:0,c;o==="string"?c=d=>{var h=a(d);return h||(h=""),h.padEnd(u," ")}:o==="boolean"?c=d=>{var h=a(d);return h?"1":"0"}:c=d=>{var h=a(d);return kc(s,h)};var l={fieldName:n,schemaPart:r,parsedLengths:s,getValue:a,getIndexStringPart:c};return l});return i}function Fc(t,e){var i=ny(t,e),n=i.length,r=i.map(s=>s.getIndexStringPart),o=function(s){for(var a="",u=0;u<n;++u)a+=r[u](s);return a};return o}function Nc(t){var e=Math.floor(t.minimum),i=Math.ceil(t.maximum),n=t.multipleOf,r=i-e,o=r.toString().length,s=n.toString().split("."),a=0;return s.length>1&&(a=s[1].length),{minimum:e,maximum:i,nonDecimals:o,decimals:a,roundedMinimum:e}}function kc(t,e){typeof e>"u"&&(e=0),e<t.minimum&&(e=t.minimum),e>t.maximum&&(e=t.maximum);var i=(Math.floor(e)-t.roundedMinimum).toString(),n=i.padStart(t.nonDecimals,"0");if(t.decimals>0){var r=e.toString().split("."),o=r.length>1?r[1]:"0";n+=o.padEnd(t.decimals,"0")}return n}function Vo(t,e,i,n){var r="";return e.forEach((o,s)=>{var a=St(t,o),u=i[s],c=a.type;switch(c){case"string":var l=B(a.maxLength);typeof u=="string"?r+=u.padEnd(l," "):r+="".padEnd(l," ");break;case"boolean":if(u===null)r+=n?"0":Ae;else{var d=u?"1":"0";r+=d}break;case"number":case"integer":var h=Nc(a);if(u===null||u===Ot){var f=n?"0":Ae;r+=f.repeat(h.nonDecimals+h.decimals)}else r+=kc(h,u);break;default:throw new Error("unknown index type "+c)}}),r}function zf(t,e,i,n){var r="";return e.forEach((o,s)=>{var a=St(t,o),u=i[s],c=a.type;switch(c){case"string":var l=B(a.maxLength);typeof u=="string"&&u!==Ae?r+=u.padEnd(l," "):r+="".padEnd(l,n?Ae:" ");break;case"boolean":if(u===null)r+=n?"0":"1";else{var d=u?"1":"0";r+=d}break;case"number":case"integer":var h=Nc(a);if(u===null||u===Ae){var f=n?"9":"0";r+=f.repeat(h.nonDecimals+h.decimals)}else r+=kc(h,u);break;default:throw new Error("unknown index type "+c)}}),r}function iy(t){var e={name:this.name,instanceToken:this.token,collections:[]},i=Object.keys(this.collections).filter(n=>!t||t.includes(n)).filter(n=>n.charAt(0)!=="_").map(n=>this.collections[n]);return Promise.all(i.map(n=>n.exportJSON())).then(n=>(e.collections=n,e))}var ry=function(t){var e=t.collections.filter(i=>!this.collections[i.name]).map(i=>i.name);if(e.length>0)throw E("JD1",{missingCollections:e});return Promise.all(t.collections.map(i=>this.collections[i.name].importJSON(i)))},oy=function(){var t={name:this.name,schemaHash:this.schema.hash,docs:[]},e=xt("find",Jt(),this);return wc(e).then(i=>(t.docs=i.map(n=>(n=Y(n),delete n._rev,delete n._attachments,n)),t))};function sy(t){if(t.schemaHash!==this.schema.hash)throw E("JD2",{schemaHash:t.schemaHash,own:this.schema.hash});var e=t.docs;return this.storageInstance.bulkWrite(e.map(i=>{var n=Object.assign({},i,{_meta:{lwt:re()},_rev:$e(),_attachments:{},_deleted:!1});return{document:n}}),"json-dump-import")}var Wf={name:"json-dump",rxdb:!0,prototypes:{RxDatabase:t=>{t.exportJSON=iy,t.importJSON=ry},RxCollection:t=>{t.exportJSON=oy,t.importJSON=sy}},overwritable:{}};function ay(t,e,i,n,r){for(var o=r+1;n<=r;){var s=n+r>>>1,a=t[s],u=i!==void 0?i(a,e):a-e;u>=0?(o=s,r=s-1):n=s+1}return o}function cy(t,e,i,n,r){for(var o=r+1;n<=r;){var s=n+r>>>1,a=t[s],u=i!==void 0?i(a,e):a-e;u>0?(o=s,r=s-1):n=s+1}return o}function uy(t,e,i,n,r){for(var o=n-1;n<=r;){var s=n+r>>>1,a=t[s],u=i!==void 0?i(a,e):a-e;u<0?(o=s,n=s+1):r=s-1}return o}function ly(t,e,i,n,r){for(var o=n-1;n<=r;){var s=n+r>>>1,a=t[s],u=i!==void 0?i(a,e):a-e;u<=0?(o=s,n=s+1):r=s-1}return o}function dy(t,e,i,n,r){for(;n<=r;){var o=n+r>>>1,s=t[o],a=i!==void 0?i(s,e):s-e;if(a===0)return o;a<=0?n=o+1:r=o-1}return-1}function ji(t,e,i,n,r,o){return typeof i=="function"?o(t,e,i,n===void 0?0:n|0,r===void 0?t.length-1:r|0):o(t,e,void 0,i===void 0?0:i|0,n===void 0?t.length-1:n|0)}function qf(t,e,i,n,r){return ji(t,e,i,n,r,ay)}function jo(t,e,i,n,r){return ji(t,e,i,n,r,cy)}function Kf(t,e,i,n,r){return ji(t,e,i,n,r,uy)}function Yf(t,e,i,n,r){return ji(t,e,i,n,r,ly)}function Pc(t,e,i,n,r){return ji(t,e,i,n,r,dy)}function Bc(t,e,i){return[t,e,i].join("--memory--")}function Ui(t){if(t.internals.removed)throw new Error("removed")}function Hi(t,e){return t+"||"+e}function hy(t,e){return t.indexString<e.indexString?-1:1}function $c(t,e,i,n,r){e.documents.set(t,n.document);for(var o=0;o<i.length;++o){var s=i[o],a=s.docsWithIndex,u=s.getIndexableString(n.document),c=ro(a,{id:t,doc:n.document,indexString:u},hy,0);if(r){var l=s.getIndexableString(r);if(l===u){var d=a[c-1];if(d&&d.id===t)a.splice(c-1,1);else{var h=a[c+1];if(h.id===t)a.splice(c+1,1);else throw E("SNH",{args:{row:n,byIndex:s}})}}else{var f=Pc(a,{indexString:l},Zt);a.splice(f,1)}}}}function Qf(t,e,i,n){var r=n[t];i.documents.delete(r),Object.values(i.byIndex).forEach(o=>{var s=o.docsWithIndex,a=o.getIndexableString(n),u=Pc(s,{indexString:a},Zt);s.splice(u,1)})}function Zt(t,e){return t.indexString<e.indexString?-1:t.indexString===e.indexString?0:1}function Jf(t,e){var i=ye(e.primaryKey),n=e.indexes?e.indexes.map(s=>Hr(s)):[];n.push([i]),n.push(["_meta.lwt",i]),n.forEach(s=>{s.unshift("_deleted"),t.byIndex[Un(s)]={index:s,docsWithIndex:[],getIndexableString:Fc(e,s)}});var r=["_meta.lwt",i],o=Un(r);t.byIndex[o]={index:r,docsWithIndex:[],getIndexableString:Fc(e,r)}}function Un(t){return t.join(",")}var fy=function(){function t(i,n,r,o,s,a,u){this.closed=!1,this.storage=i,this.databaseName=n,this.collectionName=r,this.schema=o,this.internals=s,this.options=a,this.settings=u,this.primaryPath=ye(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=function(n,r){Ui(this);var o=this.internals,s=this.internals.documents,a=this.primaryPath,u={},c={},l=Wd(this,a,s,n,r);c=l.errors;for(var d=Object.values(this.internals.byIndex),h=l.bulkInsertDocs,f=0;f<h.length;++f){var m=h[f],b=m.document[a];$c(b,o,d,m,void 0),u[b]=m.document}for(var _=l.bulkUpdateDocs,y=0;y<_.length;++y){var x=_[y],O=x.document[a];$c(O,o,d,x,s.get(O)),u[O]=x.document}if(this.schema.attachments){var k=o.attachments;l.attachmentsAdd.forEach(j=>{k.set(Hi(j.documentId,j.attachmentId),{writeData:j.attachmentData,digest:j.digest})}),this.schema.attachments&&(l.attachmentsUpdate.forEach(j=>{k.set(Hi(j.documentId,j.attachmentId),{writeData:j.attachmentData,digest:j.digest})}),l.attachmentsRemove.forEach(j=>{k.delete(Hi(j.documentId,j.attachmentId))}))}if(l.eventBulk.events.length>0){var $=B(l.newestRow).document;l.eventBulk.checkpoint={id:$[a],lwt:$._meta.lwt},o.changes$.next(l.eventBulk)}return Promise.resolve({success:u,error:c})},e.findDocumentsById=function(n,r){for(var o=this.internals.documents,s={},a=0;a<n.length;++a){var u=n[a],c=o.get(u);c&&(!c._deleted||r)&&(s[u]=c)}return Promise.resolve(s)},e.query=function(n){var r=n.queryPlan,o=n.query,s=o.skip?o.skip:0,a=o.limit?o.limit:1/0,u=s+a,c=!1;r.selectorSatisfiedByIndex||(c=Vn(this.schema,n.query));var l=r.index,d=!r.sortFieldsSameAsIndexFields,h=["_deleted"].concat(l),f=r.startKeys;f=[!1].concat(f);var m=Vo(this.schema,h,f,r.inclusiveStart),b=r.endKeys;b=[!1].concat(b);for(var _=zf(this.schema,h,b,r.inclusiveEnd),y=Un(h),x=this.internals.byIndex[y].docsWithIndex,O=(r.inclusiveStart?qf:jo)(x,{indexString:m},Zt),k=(r.inclusiveEnd?Yf:Kf)(x,{indexString:_},Zt),$=[],j=!1;!j;){var M=x[O];if(!M||O>k)break;var ie=M.doc;(!c||c(ie))&&$.push(ie),($.length>=u&&!d||O>=x.length)&&(j=!0),O++}if(d){var Mt=Ao(this.schema,n.query);$=$.sort(Mt)}return $=$.slice(s,u),Promise.resolve({documents:$})},e.count=function(n){return S(this,null,function*(){var r=yield this.query(n);return{count:r.documents.length,mode:"fast"}})},e.getChangedDocumentsSince=function(n,r){for(var o=r?r.lwt:xi,s=r?r.id:"",a=["_meta.lwt",this.primaryPath],u=Un(a),c=Vo(this.schema,["_meta.lwt",this.primaryPath],[o,s],!1),l=this.internals.byIndex[u].docsWithIndex,d=jo(l,{indexString:c},Zt),h=[];h.length<n&&d<l.length;){var f=l[d];h.push(f.doc),d++}var m=yd(h);return Promise.resolve({documents:h,checkpoint:m?{id:m[this.primaryPath],lwt:m._meta.lwt}:r||{id:"",lwt:0}})},e.cleanup=function(n){for(var r=re()-n,o=["_deleted","_meta.lwt",this.primaryPath],s=Un(o),a=this.internals.byIndex[s].docsWithIndex,u=Vo(this.schema,o,[!0,0,""],!1),c=jo(a,{indexString:u},Zt),l=!1;!l;){var d=a[c];!d||d.doc._meta.lwt>r?l=!0:(Qf(this.primaryPath,this.schema,this.internals,d.doc),c++)}return xd},e.getAttachmentData=function(n,r,o){Ui(this);var s=Ke(this.internals.attachments,Hi(n,r));if(!o||s.digest!==o)throw new Error("attachment does not exist");return Promise.resolve(s.writeData.data)},e.changeStream=function(){return Ui(this),this.internals.changes$.asObservable()},e.remove=function(){return S(this,null,function*(){Ui(this),this.internals.removed=!0,this.storage.collectionStates.delete(Bc(this.databaseName,this.collectionName,this.schema.version)),yield this.close()})},e.close=function(){return this.closed?Promise.reject(new Error("already closed")):(this.closed=!0,this.internals.refCount=this.internals.refCount-1,st)},e.conflictResultionTasks=function(){return this.internals.conflictResultionTasks$.asObservable()},e.resolveConflictResultionTask=function(n){return st},t}();function Zf(t,e,i){var n=Bc(e.databaseName,e.collectionName,e.schema.version),r=t.collectionStates.get(n);r?r.refCount=r.refCount+1:(r={removed:!1,refCount:1,documents:new Map,attachments:e.schema.attachments?new Map:void 0,byIndex:{},conflictResultionTasks$:new ee,changes$:new ee},Jf(r,e.schema),t.collectionStates.set(n,r));var o=new fy(t,e.databaseName,e.collectionName,e.schema,r,e.options,i);return Promise.resolve(o)}var py=new Map;function Xf(t={}){var e={name:"memory",statics:Gf,collectionStates:py,createStorageInstance(i){qd(i);var n=Object.assign({},t,i.options);return Zf(this,i,n)}};return e}var ep=(()=>{let e=class e{getTopicCollection(){return this.rxdb.collections.topics}getSectionCollection(){return this.rxdb.collections.sections}build(n){return S(this,null,function*(){Ac(Wf),this.rxdb=yield Uf({name:"igdbwdb",storage:Xf()}),yield this.rxdb.addCollections({topics:{schema:this.getTopicJsonSchema()},sections:{schema:this.getSectionJsonSchema()}}),yield this.rxdb.importJSON(n)})}getSectionJsonSchema(){return{version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:10},order:{type:"number"},slug:{type:"string"},title:{type:"string"},stripped:{type:"string"},html:{type:"string"},topicId:{type:"string"},parents:{type:"array",items:{type:"number"}},level:{type:"number"}}}}getTopicJsonSchema(){return{version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:10},order:{type:"number"},icon:{type:"string"},slug:{type:"string"},overview:{type:"string"},date:{type:["number","null"]},title:{type:"string"},stripped:{type:"string"},html:{type:"string"}}}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var t3=(()=>{let e=class e{constructor(n){this.databaseService=n}getAllTopics(){return S(this,null,function*(){let n={sort:[{order:"asc"}]};return yield this.databaseService.getTopicCollection().find(n).exec()})}getAllSections(){return S(this,null,function*(){let n={sort:[{order:"asc"}]};return yield(yield this.databaseService.getSectionCollection()).find(n).exec()})}getTopic(n){return S(this,null,function*(){let r={selector:{id:n}};return yield this.databaseService.getTopicCollection().findOne(r).exec()})}getSection(n){return S(this,null,function*(){let r={selector:{id:n}};return yield(yield this.databaseService.getSectionCollection()).findOne(r).exec()})}getSections(n){return S(this,null,function*(){let r={selector:{id:{$in:n}}};return yield this.databaseService.getSectionCollection().find(r).exec()})}getTopics(n){return S(this,null,function*(){let r={selector:{id:{$in:n}},sort:[{order:"asc"}]};return yield(yield this.databaseService.getTopicCollection()).find(r).exec()})}findSections(n){return S(this,null,function*(){let r=new RegExp(n,"gi"),o={selector:{$or:[{stripped:{$regex:r}},{title:{$regex:r}}]},sort:[{order:"asc"}]};return yield(yield this.databaseService.getSectionCollection()).find(o).exec()})}getSectionsByTopic(n){return S(this,null,function*(){let r={selector:{topicId:n},sort:[{order:"asc"}]};return yield(yield this.databaseService.getSectionCollection()).find(r).exec()})}};e.\u0275fac=function(r){return new(r||e)(A(ep))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var o3=(()=>{let e=class e{constructor(){this.idCounter=0,this.toastSubject=new J({})}getToastObservable(){return this.toastSubject.asObservable()}addToast(n){let r=this.toastSubject.value,o=this.idCounter++;return r[o]=n,this.toastSubject.next(r),o}removeToast(n){let r=this.toastSubject.value,o=r[n];return delete r[n],this.toastSubject.next(r),o}getActiveIds(){return Object.keys(this.toastSubject.value).map(n=>parseInt(n))}closeAll(){this.toastSubject.next({})}info(n,r=5e3){return this.addToast({message:n,timeout:r,type:"info"})}warning(n,r=5e3){return this.addToast({message:n,timeout:r,type:"warning"})}error(n,r=5e3){return this.addToast({message:n,timeout:r,type:"danger"})}success(n,r=5e3){return this.addToast({message:n,timeout:r,type:"success"})}light(n,r=5e3){return this.addToast({message:n,timeout:r,type:"light"})}dark(n,r=5e3){return this.addToast({message:n,timeout:r,type:"dark"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var c3=(()=>{let e=class e{constructor(){this.breakpointSubject=new J(this.calculateBreakpoint(window.innerWidth)),this.viewportSubject=new J(this.getViewportDimensions()),this.scrollSubject=new J(this.getScrollPosition()),pe(window,"resize").subscribe(()=>{let{width:n,height:r}=this.getViewportDimensions(),o=this.calculateBreakpoint(n);this.viewportSubject.next({width:n,height:r}),this.breakpointSubject.getValue()!==o&&this.breakpointSubject.next(o)}),pe(window,"scroll").subscribe(()=>this.scrollSubject.next(this.getScrollPosition()))}getViewportValue(){return this.viewportSubject.value}getViewportObserable(){return this.viewportSubject.asObservable()}getBreakpointValue(){return this.breakpointSubject.value}getBreakpointObservable(){return this.breakpointSubject.asObservable()}getScrollObservable(){return this.scrollSubject.asObservable()}calculateBreakpoint(n){return n>=1400?"xxl":n>=1200?"xl":n>=992?"lg":n>=768?"md":n>=576?"sm":"xs"}getViewportDimensions(){return{width:window.innerWidth,height:window.innerHeight}}getScrollPosition(){let n=document.body,r=document.documentElement,o=Math.max(n.scrollHeight,n.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight),s=window.scrollY,a=this.getViewportDimensions().height,u=Math.ceil(s/o*100);return{documentHeight:o,viewportTop:s,viewportBottom:a,scrollPercentage:u}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var d3=(()=>{let e=class e{constructor(){this.searchHistoryKey="search-history",this.searchHistorySubject=new J([]),this.searchModalVisibleSubject=new J(!1);let n=localStorage.getItem(this.searchHistoryKey);if(n)try{this.searchHistorySubject.next(JSON.parse(n))}catch{console.error("Search history is corrupted!"),this.clearHistory()}this.historyChangeSubscription=this.searchHistorySubject.subscribe(r=>{localStorage.setItem(this.searchHistoryKey,JSON.stringify(r))})}setModalVisibility(n){this.searchModalVisibleSubject.next(n)}searchModalVisibleObservable(){return this.searchModalVisibleSubject.asObservable()}getHistory(){return this.searchHistorySubject.value}searchHistoryObservable(){return this.searchHistorySubject.asObservable()}addHistoryItem(n){let r=this.searchHistorySubject.value;r.includes(n)?r.push(r.splice(r.indexOf(n),1)[0]):r.push(n),this.searchHistorySubject.next(r)}removeHistoryItem(n){let r=this.searchHistorySubject.value;r.splice(r.indexOf(n),1),this.searchHistorySubject.next(r)}clearHistory(){this.searchHistorySubject.next([])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var p3=(()=>{let e=class e{constructor(){this.networkStatusSubject=new J(window.navigator.onLine),Gn(pe(window,"online"),pe(window,"offline")).subscribe(n=>this.networkStatusSubject.next(n.type==="online"))}getStatusObservable(){return this.networkStatusSubject.asObservable()}updateStatus(n){this.networkStatusSubject.next(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();export{ne as a,ti as b,By as c,$y as d,Ly as e,Vy as f,Sp as g,xp as h,Pu as i,Pp as j,e1 as k,Wu as l,D1 as m,vm as n,zt as o,Km as p,ha as q,W1 as r,q1 as s,K1 as t,Y1 as u,f0 as v,ql as w,Pl as x,pD as y,mD as z,Vl as A,G0 as B,vD as C,K0 as D,Q0 as E,_D as F,d3 as G,Ob as H,Fb as I,Nb as J,kb as K,Pb as L,ep as M,t3 as N,o3 as O,c3 as P,p3 as Q};
